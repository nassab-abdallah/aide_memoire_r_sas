<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nassab ABDALLAH">
<meta name="author" content="Damien EUZENAT">
<meta name="description" content="Trucs et astuces en R.">

<title>Trucs et astuces en R – Aide-mémoire SAS - R - pandas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-d166b450ba5a8e9f7a0ab969bf6592c1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-1f8c722e8b49f6f46c44cdb877d489f3.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-6ee3c1bbc456f82f5865bfb7d567950a.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Trucs et astuces en R.html">Trucs et astuces</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Recherche" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Aide-mémoire SAS - R - pandas</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Basculer le mode sombre"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Recherche"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accueil</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-aide_memoire_r_sas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Aide-mémoire</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-mise_en_garde.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mise en garde</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Trucs et astuces en R.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Trucs et astuces</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-specificites_sas_r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spécificités de SAS et R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-avantages_inconvenients_env_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Avantages et inconvénients des environnements R</span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Sur cette page</h2>
   
  <ul>
  <li><a href="#effets-des-calculs-en-virgule-flottante" id="toc-effets-des-calculs-en-virgule-flottante" class="nav-link active" data-scroll-target="#effets-des-calculs-en-virgule-flottante"><span class="header-section-number">1</span> Effets des calculs en virgule flottante</a></li>
  <li><a href="#les-types-dobjet" id="toc-les-types-dobjet" class="nav-link" data-scroll-target="#les-types-dobjet"><span class="header-section-number">2</span> Les types d’objet</a></li>
  <li><a href="#les-affectations" id="toc-les-affectations" class="nav-link" data-scroll-target="#les-affectations"><span class="header-section-number">3</span> Les affectations</a></li>
  <li><a href="#principe-de-vectorisation" id="toc-principe-de-vectorisation" class="nav-link" data-scroll-target="#principe-de-vectorisation"><span class="header-section-number">4</span> Principe de vectorisation</a></li>
  <li><a href="#principe-de-coercion" id="toc-principe-de-coercion" class="nav-link" data-scroll-target="#principe-de-coercion"><span class="header-section-number">5</span> Principe de coercion</a></li>
  <li><a href="#principe-de-recycling" id="toc-principe-de-recycling" class="nav-link" data-scroll-target="#principe-de-recycling"><span class="header-section-number">6</span> Principe de recycling</a></li>
  <li><a href="#opérateurs-de-contrôle" id="toc-opérateurs-de-contrôle" class="nav-link" data-scroll-target="#opérateurs-de-contrôle"><span class="header-section-number">7</span> Opérateurs de contrôle</a></li>
  <li><a href="#les-valeurs-manquantes" id="toc-les-valeurs-manquantes" class="nav-link" data-scroll-target="#les-valeurs-manquantes"><span class="header-section-number">8</span> Les valeurs manquantes</a></li>
  <li><a href="#sélection-déléments" id="toc-sélection-déléments" class="nav-link" data-scroll-target="#sélection-déléments"><span class="header-section-number">9</span> Sélection d’éléments</a></li>
  <li><a href="#les-listes" id="toc-les-listes" class="nav-link" data-scroll-target="#les-listes"><span class="header-section-number">10</span> Les listes</a></li>
  <li><a href="#différences-entre-sort-order-rank" id="toc-différences-entre-sort-order-rank" class="nav-link" data-scroll-target="#différences-entre-sort-order-rank"><span class="header-section-number">11</span> Différences entre sort(), order(), rank()</a></li>
  <li><a href="#ramasse-miettes-garbage-collector" id="toc-ramasse-miettes-garbage-collector" class="nav-link" data-scroll-target="#ramasse-miettes-garbage-collector"><span class="header-section-number">12</span> Ramasse-miettes (Garbage Collector)</a></li>
  <li><a href="#fonctions-try-et-trycatch-à-faire" id="toc-fonctions-try-et-trycatch-à-faire" class="nav-link" data-scroll-target="#fonctions-try-et-trycatch-à-faire"><span class="header-section-number">13</span> Fonctions try() et tryCatch() À FAIRE</a></li>
  <li><a href="#informations-sur-r" id="toc-informations-sur-r" class="nav-link" data-scroll-target="#informations-sur-r"><span class="header-section-number">14</span> Informations sur R</a></li>
  <li><a href="#le-comportement-de-lopérateur-c" id="toc-le-comportement-de-lopérateur-c" class="nav-link" data-scroll-target="#le-comportement-de-lopérateur-c"><span class="header-section-number">15</span> Le comportement de l’opérateur c()</a></li>
  <li><a href="#trucs-et-astuces-divers" id="toc-trucs-et-astuces-divers" class="nav-link" data-scroll-target="#trucs-et-astuces-divers"><span class="header-section-number">16</span> Trucs et astuces divers</a></li>
  <li><a href="#le-pipe-sur-r" id="toc-le-pipe-sur-r" class="nav-link" data-scroll-target="#le-pipe-sur-r"><span class="header-section-number">17</span> Le pipe sur R</a></li>
  <li><a href="#fonction-pour-copier-des-données-r-dans-le-presse-papier-et-les-coller-par-exemple-dans-excel" id="toc-fonction-pour-copier-des-données-r-dans-le-presse-papier-et-les-coller-par-exemple-dans-excel" class="nav-link" data-scroll-target="#fonction-pour-copier-des-données-r-dans-le-presse-papier-et-les-coller-par-exemple-dans-excel"><span class="header-section-number">18</span> Fonction pour copier des données R dans le presse-papier et les coller (par exemple dans Excel)</a></li>
  <li><a href="#conseils-divers" id="toc-conseils-divers" class="nav-link" data-scroll-target="#conseils-divers"><span class="header-section-number">19</span> Conseils divers</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Trucs et astuces en <code>R</code></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
  </div>
  </div>

<div>
  <div class="description">
    <p>Trucs et astuces en <code>R</code>.</p>
  </div>
</div>

<div class="quarto-title-meta-author column-page-right">
  <div class="quarto-title-meta-heading">Auteur·rice·s</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Nassab ABDALLAH </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Dares/SCS, <a href="mailto:nassab.abdallah@travail.gouv.fr" class="email">nassab.abdallah@travail.gouv.fr</a>
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Damien EUZENAT </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Dares/DIP, <a href="mailto:damien.euzenat@travail.gouv.fr" class="email">damien.euzenat@travail.gouv.fr</a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta column-page-right">

      
    <div>
    <div class="quarto-title-meta-heading">Date de publication</div>
    <div class="quarto-title-meta-contents">
      <p class="date">5 décembre 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="justify">
<p>Voici quelques trucs et astuces utiles à connaître sur R, issus en partie des livres <a href="https://www.burns-stat.com/pages/Tutor/R_inferno.pdf">The R Inferno</a> et <a href="https://adv-r.hadley.nz/">Advanced R</a>, à consulter pour plus de détails.</p>
</div>
<section id="effets-des-calculs-en-virgule-flottante" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Effets des calculs en virgule flottante</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">2</span>) <span class="sc">^</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">/</span> <span class="dv">49</span> <span class="sc">*</span> <span class="dv">49</span> <span class="sc">==</span> <span class="dv">1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>.<span class="dv">1</span> <span class="sc">==</span> .<span class="dv">3</span> <span class="sc">/</span> <span class="dv">3</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by=</span>.<span class="dv">1</span>) <span class="sc">==</span> .<span class="dv">3</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">c</span>(.<span class="dv">3</span>, .<span class="dv">4</span> <span class="sc">-</span> .<span class="dv">1</span>, .<span class="dv">5</span> <span class="sc">-</span> .<span class="dv">2</span>, .<span class="dv">6</span> <span class="sc">-</span> .<span class="dv">3</span>, .<span class="dv">7</span> <span class="sc">-</span> .<span class="dv">4</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3 0.3 0.3</code></pre>
</div>
</div>
</section>
<section id="les-types-dobjet" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Les types d’objet</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># En savoir plus sur ses données</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"cars"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(cars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(cars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(cars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(cars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   50 obs. of  2 variables:
 $ speed: num  4 4 7 7 8 9 10 10 10 11 ...
 $ dist : num  2 10 4 22 16 10 18 26 34 17 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(cars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 50  2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.data.frame</span>(cars), <span class="fu">is.list</span>(cars), <span class="fu">is.vector</span>(cars), <span class="fu">is.array</span>(cars))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<p>Notation L</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Notation L : imposer à R de créer un nombre sous format "integer", pour des raisons d'efficacité</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">1</span>L)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
</section>
<section id="les-affectations" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Les affectations</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importance des espaces</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="dv">3</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># S'agit-il de ?</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ou de ?</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">3</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Il s'agit du premier cas !</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Les {} permettent de réaliser une affectation (&lt;-) au sein d'un traitement plus complexe !</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple ici : sommer les positions paires multipliées par 2 et les positions impaires multipliées par 3</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>({x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span> ; x[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> x[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>] <span class="sc">*</span> <span class="dv">2</span> ; x[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">!=</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> x[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">!=</span> <span class="dv">0</span>] <span class="sc">*</span> <span class="dv">3</span> ; x})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 51</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher ou non la valeur de l'objet affecté pendant l'affectation</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> pi</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>(x <span class="ot">&lt;-</span> pi)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.141593</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparaisons multiples</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="sc">&lt;</span> x <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">1</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Incorrect</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="sc">&lt;</span> x <span class="sc">&lt;</span> <span class="dv">1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:6:7: unexpected '&lt;'
5: # Incorrect
6: 0 &lt; x &lt;
         ^</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ne pas confondre !</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">:</span><span class="dv">10</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  0  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  0  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Privilégier seq_len à : lorsqu'il y a un risque de 0</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonctionnement identique</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>n</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_len</span>(n)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Problème avec les 0</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>n</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_len</span>(n)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>integer(0)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Préférer seq_along à : au cas où la taille de l'objet est 0</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>() ;<span class="fu">length</span>(x)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) <span class="fu">print</span>(i)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(x)) <span class="fu">print</span>(i)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq</span>(<span class="at">along=</span>x)) <span class="fu">print</span>(i)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Différences seq, seq_len et seq_along</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># seq : créé une séquence d'éléments successifs, espacés éventuellement d'un pas</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 5 7 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 5 7 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seq_len : créé une séquence d'éléments de 1 jusqu'au paramètre de la fonction (supposé positif)</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_len</span>(<span class="dv">10</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seq_along : créé une séquence d'éléments de 1 jusqu'au nombre d'éléments du vecteur</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(<span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seq se comporte comme seq_along si le vecteur comprend plusieurs éléments, et comme seq_len s'il comprend un seul élément</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plusieurs éléments</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>vecteur <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_len</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Un seul élement</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>vecteur <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_len</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Equivalent des list-comprehensions de type Python en R</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Somme des entiers de 1 à 1 000 multiples de 3 ou 5, en une ligne !</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 4 manières de faire</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>({l <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span> ; l[l <span class="sc">%%</span> <span class="dv">3</span> <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> l <span class="sc">%%</span> <span class="dv">5</span> <span class="sc">==</span> <span class="dv">0</span>]})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 234168</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>({l <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span> ; l[<span class="fu">seq_along</span>(l) <span class="sc">%%</span> <span class="dv">3</span> <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> <span class="fu">seq_along</span>(l) <span class="sc">%%</span> <span class="dv">5</span> <span class="sc">==</span> <span class="dv">0</span>]})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 234168</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(l<span class="ot">&lt;-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>)[l <span class="sc">%%</span> <span class="dv">3</span> <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> l <span class="sc">%%</span> <span class="dv">5</span> <span class="sc">==</span> <span class="dv">0</span>])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 234168</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>((<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>)[(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span> <span class="sc">%%</span> <span class="dv">3</span>) <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span> <span class="sc">%%</span> <span class="dv">5</span>) <span class="sc">==</span> <span class="dv">0</span>])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 234168</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Opérations mathématiques</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Infini</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nan = not a number</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</section>
<section id="principe-de-vectorisation" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Principe de vectorisation</h1>
<p>La fonction s’applique à tous les éléments du vecteur !!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple de vecteur</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>valeurs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>valeurs <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Valeurs au carré</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>valeurs <span class="sc">**</span> <span class="dv">2</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   4   9  16  25  36  49  64  81 100</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># logarithme des valeurs</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(valeurs)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.0000000 0.6931472 1.0986123 1.3862944 1.6094379 1.7917595 1.9459101
 [8] 2.0794415 2.1972246 2.3025851</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Maximum des valeurs</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(valeurs)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limite des valeurs</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(valeurs)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(valeurs)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inattendu</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Attention aux parenthèses !</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Inattendu ! Correspond à (1-1, 2-1, 3-1, ..., 10-1)</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>n<span class="dv">-1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0 1 2 3 4 5 6 7 8 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>(n<span class="dv">-1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5 6 7 8 9</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Minimum ou maximum élément par élément</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">8</span>)</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Minimum : 2 possibilités</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="fu">pmin</span>(x1, x2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 0 5 2 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapply</span>(min, x1, x2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 0 5 2 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Maximum : 2 possibilités</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pmax</span>(x1, x2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 2 7 6 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapply</span>(max, x1, x2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 2 7 6 8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculer (x - min) / (max - min) pour chaque élément x d'un vecteur</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(x, <span class="cf">function</span>(xi, mn, mx) {(xi <span class="sc">-</span> mn) <span class="sc">/</span> (mx <span class="sc">-</span> mn)}, <span class="at">mn =</span> <span class="fu">min</span>(x), <span class="at">mx =</span> <span class="fu">max</span>(x))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0 0.5 1.0</code></pre>
</div>
</div>
</section>
<section id="principe-de-coercion" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Principe de coercion</h1>
<p>Dans les comparaisons, les objets R sont successivement convertis en logical, integer, numeric, complex et character, jusqu’à ce que la comparaison puisse se faire.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># TRUE / FALSE est transformé en integer (1 / 0)</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">==</span> <span class="dv">1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">==</span> <span class="dv">2</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">==</span> <span class="dv">0</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># TRUE est convertit en character</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">==</span> <span class="st">"1"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 5 est convertit en character</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">&lt;</span> <span class="st">'7'</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 50 est convertit en character</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="dv">50</span> <span class="sc">&lt;</span> <span class="st">'7'</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="principe-de-recycling" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Principe de recycling</h1>
<p>En R Base, quand 2 vecteurs ne sont pas de même taille, le plus court vecteur est recyclé pour être de même taille que le plus long vecteur.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Si la taille du plus long vecteur est un entier multiple de la taile du plus court, R n'affiche pas d'avertissement</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> y</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6 5 7 9</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Si la taille du plus long vecteur n'est pas un entier multiple de la taille du plus court, R affiche un avertissement</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> y</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in x + y: longer object length is not a multiple of shorter object
length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6 5 7 9 8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mais certaines fonctions pratiquent le recycling sans avertissement</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1 1" "2 2" "3 1"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Et data.frame() renvoie une erreur</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="co">#data.frame(1:2, 1:3)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="opérateurs-de-contrôle" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Opérateurs de contrôle</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Conditions if / else</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">identical</span>(x, <span class="dv">1</span>)) {</span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"x est égal à 1"</span>)</span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"x est différent de 1"</span>)</span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x est égal à 1"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">identical</span>(x, <span class="dv">1</span>)) {<span class="fu">print</span>(<span class="st">"x est égal à 1"</span>)</span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {<span class="fu">print</span>(<span class="st">"x est différent de 1"</span>)}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x est égal à 1"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">identical</span>(x, <span class="dv">1</span>)) <span class="fu">print</span>(<span class="st">"x est égal à 1"</span>) <span class="cf">else</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"x est différent de 1"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x est égal à 1"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">identical</span>(x, <span class="dv">1</span>)) <span class="fu">print</span>(<span class="st">"x est égal à 1"</span>) <span class="cf">else</span> <span class="fu">print</span>(<span class="st">"x est différent de 1"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x est égal à 1"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Incorrect</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">identical</span>(x, <span class="dv">1</span>)) <span class="fu">print</span>(<span class="st">"x est égal à 1"</span>)</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span> <span class="fu">print</span>(<span class="st">"x est différent de 1"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:3:1: unexpected 'else'
2: if (identical(x, 1)) print("x est égal à 1")
3: else
   ^</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonctions et conditions if / else</span></span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>condition <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">langue =</span> <span class="st">"Français"</span>) {</span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (langue <span class="sc">==</span> <span class="st">"Français"</span>) {</span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a><span class="st">"salut"</span></span>
<span id="cb152-6"><a href="#cb152-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (langue <span class="sc">==</span> <span class="st">"Anglais"</span>) {</span>
<span id="cb152-7"><a href="#cb152-7" aria-hidden="true" tabindex="-1"></a><span class="st">"hello"</span></span>
<span id="cb152-8"><a href="#cb152-8" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (langue <span class="sc">==</span> <span class="st">"Russe"</span>) {</span>
<span id="cb152-9"><a href="#cb152-9" aria-hidden="true" tabindex="-1"></a><span class="st">"привет"</span></span>
<span id="cb152-10"><a href="#cb152-10" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb152-11"><a href="#cb152-11" aria-hidden="true" tabindex="-1"></a><span class="fu">stop</span>(<span class="st">"salut"</span>)</span>
<span id="cb152-12"><a href="#cb152-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb152-13"><a href="#cb152-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb152-14"><a href="#cb152-14" aria-hidden="true" tabindex="-1"></a><span class="fu">condition</span>(<span class="st">"Anglais"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Autre possibilité avec switch, mais à réserver aux variables caractères !</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>condition <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">langue =</span> <span class="st">"Français"</span>) {</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span>(langue,</span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>Français <span class="ot">=</span> <span class="st">"salut"</span>,</span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a><span class="at">Anglais =</span> <span class="st">"hello"</span>,</span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a><span class="at">Russe =</span> <span class="st">"привет"</span>,</span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a><span class="fu">stop</span>(<span class="st">"salut"</span>)</span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb154-10"><a href="#cb154-10" aria-hidden="true" tabindex="-1"></a><span class="fu">condition</span>(<span class="st">"Français"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "salut"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Penser au print</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) i</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="fu">print</span>(i)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Différences print et cat</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Salut !</span><span class="sc">\n</span><span class="st">Comment vas-tu ?"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Salut !
Comment vas-tu ?</code></pre>
</div>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Salut !</span><span class="sc">\n</span><span class="st">Comment vas-tu ?"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Salut !\nComment vas-tu ?"</code></pre>
</div>
</div>
</section>
<section id="les-valeurs-manquantes" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Les valeurs manquantes</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformer les valeurs manquantes en 0</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">X1 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">2</span>), <span class="at">X2 =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">3</span>))</span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  X1 X2
1  1 NA
2 NA NA
3  2  3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">is.na</span>(x)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  X1 X2
1  1  0
2  0  0
3  2  3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour les valeurs manquantes, toujours utiliser is.na et non ==</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="cn">NA</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA NA NA NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="cn">NA</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE  TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Utiliser %in% et non == pour vérifier une appartenance à plusieurs variables</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>x1 <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE FALSE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sélection de données en cas de valeurs manquantes</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>xna <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec ce code, les NA sont conservés</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>xna[xna <span class="sc">==</span> <span class="dv">2</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA  2  2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code sans les NA</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>xna[<span class="sc">!</span><span class="fu">is.na</span>(xna) <span class="sc">&amp;</span> xna <span class="sc">==</span> <span class="dv">2</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code compact sans les NA</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>xna[<span class="fu">which</span>(xna <span class="sc">==</span> <span class="dv">2</span>)]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Incidence des NA dans le calcul de statistiques !</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Besoin de l'instruction na.rm = TRUE pour en supprimer l'incidence</span></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="cn">NA</span>, <span class="dv">8</span>)</span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(x)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Une moyenne de NA donne NaN (Not a Number) avec na.rm = TRUE !</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Et donne NA avec na.rm = FALSE !</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>), <span class="at">na.rm =</span> <span class="cn">FALSE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</section>
<section id="sélection-déléments" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Sélection d’éléments</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le 1er élément est numéroté 1 et non 0 comme dans Python</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">4</span>)] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Marche !!</span></span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">3</span>) <span class="fu">print</span>(x[i])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>numeric(0)
[1] 1
[1] 2
[1] 3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cas où les noms ne sont pas uniques</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">a =</span> <span class="dv">3</span>)</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>x[<span class="st">"a"</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>a 
1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">names</span>(x) <span class="sc">%in%</span> <span class="st">"a"</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>a a 
1 3 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Options drop = FALSE</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">X1 =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">X2 =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>), <span class="at">x3 =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>))</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.frame</span>(x[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.frame</span>(x[, <span class="fu">c</span>(<span class="dv">1</span>)])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.frame</span>(x[, <span class="fu">c</span>(<span class="dv">1</span>), <span class="at">drop =</span> <span class="cn">FALSE</span>])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonction subset</span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x1 =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">x2 =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>), <span class="at">x3 =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>))</span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(x, <span class="at">select =</span> x1)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x1
1  1
2  2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(x, <span class="at">select =</span> <span class="sc">-</span>x1)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x2 x3
1  3  5
2  4  6</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(x, x1 <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x1 x2 x3
1  1  3  5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Incorrect</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(x, <span class="at">x1 =</span> <span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x1 x2 x3
1  1  3  5
2  2  4  6</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Référence à des noms de colonne non usuels</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">rnorm</span>(<span class="dv">5</span>), <span class="at">y =</span> <span class="fu">runif</span>(<span class="dv">5</span>))</span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df) <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-5"><a href="#cb213-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb213-6"><a href="#cb213-6" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span><span class="st">`</span><span class="at">1</span><span class="st">`</span></span>
<span id="cb213-7"><a href="#cb213-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-8"><a href="#cb213-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Incorrect</span></span>
<span id="cb213-9"><a href="#cb213-9" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span><span class="dv">1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:9:4: unexpected numeric constant
8: # Incorrect
9: df$1
      ^</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Utilisation de assign pour assigner une valeur à un objet en le désignant sous forme caractère</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="fu">assign</span>(<span class="st">'objet'</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a>objet</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="fu">assign</span>(<span class="fu">paste</span>(<span class="st">'objet'</span>, i, <span class="at">sep =</span> <span class="st">'_'</span>), i)</span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>objet_5</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</section>
<section id="les-listes" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Les listes</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Créer une liste</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a>liste</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>list()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pré-allouer une liste de 5 éléments</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"list"</span>, <span class="dv">5</span>)</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a>liste</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL

[[5]]
NULL</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajouter un élément à une liste</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Il faut passer par cette syntaxe</span></span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">c</span>(liste, <span class="fu">list</span>(<span class="dv">3</span>))</span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true" tabindex="-1"></a>liste</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier une liste</span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"2"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"0"</span> <span class="ot">=</span> <span class="dv">0</span>, <span class="st">"1"</span> <span class="ot">=</span> <span class="dv">1</span>)</span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a>liste</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$`2`
[1] 2

$`0`
[1] 0

$`1`
[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a>liste[<span class="fu">order</span>(<span class="fu">names</span>(liste))]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$`0`
[1] 0

$`1`
[1] 1

$`2`
[1] 2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraction de listes</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">nombres =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">lettres =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a>liste<span class="sc">$</span>nombres</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On veut faire appel à un élement de la liste à partir d'une variable extérieure</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a>var <span class="ot">&lt;-</span> <span class="st">"nombres"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ne marche pas, car nombres est en caractère</span></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>liste<span class="sc">$</span>var</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonctionne</span></span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>liste[[var]]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sélection dans une liste</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">nombres =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">lettres =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a>liste[<span class="st">"nombres"</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$nombres
[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.list</span>(liste[<span class="st">"nombres"</span>])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a>liste[[<span class="st">"nombres"</span>]]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.list</span>(liste[[<span class="st">"nombres"</span>]])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Suppression des éléments d'une liste</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">nombres =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">lettres =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a>liste[<span class="sc">-</span><span class="dv">1</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$lettres
[1] "a" "b" "c" "d" "e"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>liste[<span class="st">"nombres"</span>] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a>liste</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$lettres
[1] "a" "b" "c" "d" "e"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dernier élément de chaque composante d'une liste</span></span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">26</span>, letters)</span>
<span id="cb248-3"><a href="#cb248-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(liste, tail, <span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 26

[[2]]
[1] "z"</code></pre>
</div>
</div>
</section>
<section id="différences-entre-sort-order-rank" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> Différences entre sort(), order(), rank()</h1>
<p>sort() trie un vecteur par ordre croissant. rank() donne le rang de chaque élément du vecteur, le plus petit élément se voyant attribué le rang 1. order() renvoie l’indice du vecteur trié par ordre croissant.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a>vecteur <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>)</span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 2 5 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rank</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 3 1 2 4</code></pre>
</div>
</div>
<p>Une autre solution que sort() pour trier un vecteur est :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a>vecteur <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>)</span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a>vecteur[<span class="fu">order</span>(vecteur)]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
<p>À noter aussi que sort() permet aussi d’exécuter simultanément les fonctions sort() et order(). Ainsi :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a>vecteur <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>)</span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(vecteur, <span class="at">index.return =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$x
[1] 1 2 3 4 5

$ix
[1] 3 4 2 5 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonction sort()</span></span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(vecteur, <span class="at">index.return =</span> <span class="cn">TRUE</span>)<span class="sc">$</span>x</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonction order()</span></span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(vecteur, <span class="at">index.return =</span> <span class="cn">TRUE</span>)<span class="sc">$</span>ix</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 2 5 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 2 5 1</code></pre>
</div>
</div>
</section>
<section id="ramasse-miettes-garbage-collector" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Ramasse-miettes (Garbage Collector)</h1>
<p>Si la mémoire vive de l’ordinateur est saturée, on peut essayer de la “purger” en utilisant la fonction gc() de <code>R</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  906550 48.5    1791804 95.7  1791804 95.7
Vcells 1760134 13.5   10146329 77.5  7606546 58.1</code></pre>
</div>
</div>
</section>
<section id="fonctions-try-et-trycatch-à-faire" class="level1" data-number="13">
<h1 data-number="13"><span class="header-section-number">13</span> Fonctions try() et tryCatch() À FAIRE</h1>
</section>
<section id="informations-sur-r" class="level1" data-number="14">
<h1 data-number="14"><span class="header-section-number">14</span> Informations sur R</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Informations sur la session de R</span></span>
<span id="cb270-2"><a href="#cb270-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span>
<span id="cb270-3"><a href="#cb270-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.info</span>()</span>
<span id="cb270-4"><a href="#cb270-4" aria-hidden="true" tabindex="-1"></a>.Platform</span>
<span id="cb270-5"><a href="#cb270-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-6"><a href="#cb270-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Version de R</span></span>
<span id="cb270-7"><a href="#cb270-7" aria-hidden="true" tabindex="-1"></a>R.version.string</span>
<span id="cb270-8"><a href="#cb270-8" aria-hidden="true" tabindex="-1"></a><span class="fu">getRversion</span>()</span>
<span id="cb270-9"><a href="#cb270-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-10"><a href="#cb270-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Lien vers le bureau de l'utilisateur</span></span>
<span id="cb270-11"><a href="#cb270-11" aria-hidden="true" tabindex="-1"></a><span class="fu">file.path</span>(<span class="fu">path.expand</span>(<span class="st">'~'</span>), <span class="st">"Desktop"</span>)</span>
<span id="cb270-12"><a href="#cb270-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-13"><a href="#cb270-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Chemin de l'exécutable R est-il installé ?</span></span>
<span id="cb270-14"><a href="#cb270-14" aria-hidden="true" tabindex="-1"></a><span class="fu">R.home</span>(<span class="st">"bin"</span>)</span>
<span id="cb270-15"><a href="#cb270-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-16"><a href="#cb270-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Où sont installés les packages R</span></span>
<span id="cb270-17"><a href="#cb270-17" aria-hidden="true" tabindex="-1"></a><span class="fu">.libPaths</span>()</span>
<span id="cb270-18"><a href="#cb270-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-19"><a href="#cb270-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Version d'un package installé (ici openxlsx)</span></span>
<span id="cb270-20"><a href="#cb270-20" aria-hidden="true" tabindex="-1"></a><span class="co"># packageVersion("openxlsx")</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="le-comportement-de-lopérateur-c" class="level1" data-number="15">
<h1 data-number="15"><span class="header-section-number">15</span> Le comportement de l’opérateur c()</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="co"># c() est instable : c(x, y) n'est pas forcément du même type que c(y, x)</span></span>
<span id="cb271-2"><a href="#cb271-2" aria-hidden="true" tabindex="-1"></a><span class="co"># format double</span></span>
<span id="cb271-3"><a href="#cb271-3" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">NA</span>, <span class="fu">Sys.Date</span>())</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]    NA 20062</code></pre>
</div>
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="co"># format Date</span></span>
<span id="cb273-2"><a href="#cb273-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">Sys.Date</span>(), <span class="cn">NA</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-12-05" NA          </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combiner des dates et date-times avec c() conduit à des résultats potentiellement incorrects</span></span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true" tabindex="-1"></a>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2025-01-01"</span>)</span>
<span id="cb275-3"><a href="#cb275-3" aria-hidden="true" tabindex="-1"></a>datetime <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">"2025-01-01 09:00"</span>)</span>
<span id="cb275-4"><a href="#cb275-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb275-5"><a href="#cb275-5" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(date, datetime)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-01-01" "2025-01-01"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Incorrect</span></span>
<span id="cb277-2"><a href="#cb277-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(datetime, date)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-01-01 09:00:00 UTC" "2025-01-01 00:00:00 UTC"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Valeurs manquantes</span></span>
<span id="cb279-2"><a href="#cb279-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Si le NA est placé avant, c() supprime tous les attributs</span></span>
<span id="cb279-3"><a href="#cb279-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple 1</span></span>
<span id="cb279-4"><a href="#cb279-4" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">"2025-01-01"</span>), <span class="cn">NA</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-01-01" NA          </code></pre>
</div>
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">NA</span>, <span class="fu">as.Date</span>(<span class="st">"2025-01-01"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]    NA 20089</code></pre>
</div>
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple 2</span></span>
<span id="cb283-2"><a href="#cb283-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">NA</span>, <span class="fu">as.POSIXct</span>(<span class="st">"2025-01-01 09:00"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]         NA 1735722000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">as.POSIXct</span>(<span class="st">"2025-01-01 09:00"</span>), <span class="cn">NA</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-01-01 09:00:00 UTC" NA                       </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="co"># c() convertit de character &gt; complex &gt; double &gt; integer &gt; logical</span></span>
<span id="cb287-2"><a href="#cb287-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="dv">1</span>L, <span class="fl">2.5</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0 1.0 2.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="st">"x"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FALSE" "x"    </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combiner 2 facteurs donne un integer</span></span>
<span id="cb291-2"><a href="#cb291-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">factor</span>(<span class="st">"a"</span>), <span class="fu">factor</span>(<span class="st">"b"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] a b
Levels: a b</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data frames</span></span>
<span id="cb293-2"><a href="#cb293-2" aria-hidden="true" tabindex="-1"></a><span class="co"># c() combines 2 data.frames dans une liste</span></span>
<span id="cb293-3"><a href="#cb293-3" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span>)</span>
<span id="cb293-4"><a href="#cb293-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">2</span>)</span>
<span id="cb293-5"><a href="#cb293-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">c</span>(df1, df1))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 2
 $ x: num 1
 $ x: num 1</code></pre>
</div>
</div>
</section>
<section id="trucs-et-astuces-divers" class="level1" data-number="16">
<h1 data-number="16"><span class="header-section-number">16</span> Trucs et astuces divers</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Créer un objet sous forme de code R !</span></span>
<span id="cb295-2"><a href="#cb295-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"mtcars"</span>)</span>
<span id="cb295-3"><a href="#cb295-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dput</span>(mtcars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>structure(list(mpg = c(21, 21, 22.8, 21.4, 18.7, 18.1, 14.3, 
24.4, 22.8, 19.2, 17.8, 16.4, 17.3, 15.2, 10.4, 10.4, 14.7, 32.4, 
30.4, 33.9, 21.5, 15.5, 15.2, 13.3, 19.2, 27.3, 26, 30.4, 15.8, 
19.7, 15, 21.4), cyl = c(6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 
8, 8, 8, 8, 8, 4, 4, 4, 4, 8, 8, 8, 8, 4, 4, 4, 8, 6, 8, 4), 
    disp = c(160, 160, 108, 258, 360, 225, 360, 146.7, 140.8, 
    167.6, 167.6, 275.8, 275.8, 275.8, 472, 460, 440, 78.7, 75.7, 
    71.1, 120.1, 318, 304, 350, 400, 79, 120.3, 95.1, 351, 145, 
    301, 121), hp = c(110, 110, 93, 110, 175, 105, 245, 62, 95, 
    123, 123, 180, 180, 180, 205, 215, 230, 66, 52, 65, 97, 150, 
    150, 245, 175, 66, 91, 113, 264, 175, 335, 109), drat = c(3.9, 
    3.9, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3.92, 
    3.07, 3.07, 3.07, 2.93, 3, 3.23, 4.08, 4.93, 4.22, 3.7, 2.76, 
    3.15, 3.73, 3.08, 4.08, 4.43, 3.77, 4.22, 3.62, 3.54, 4.11
    ), wt = c(2.62, 2.875, 2.32, 3.215, 3.44, 3.46, 3.57, 3.19, 
    3.15, 3.44, 3.44, 4.07, 3.73, 3.78, 5.25, 5.424, 5.345, 2.2, 
    1.615, 1.835, 2.465, 3.52, 3.435, 3.84, 3.845, 1.935, 2.14, 
    1.513, 3.17, 2.77, 3.57, 2.78), qsec = c(16.46, 17.02, 18.61, 
    19.44, 17.02, 20.22, 15.84, 20, 22.9, 18.3, 18.9, 17.4, 17.6, 
    18, 17.98, 17.82, 17.42, 19.47, 18.52, 19.9, 20.01, 16.87, 
    17.3, 15.41, 17.05, 18.9, 16.7, 16.9, 14.5, 15.5, 14.6, 18.6
    ), vs = c(0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 
    0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1), am = c(1, 
    1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 
    0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1), gear = c(4, 4, 4, 3, 
    3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3, 3, 
    3, 3, 4, 5, 5, 5, 5, 5, 4), carb = c(4, 4, 1, 1, 2, 1, 4, 
    2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1, 2, 2, 4, 2, 1, 
    2, 2, 4, 6, 8, 2)), row.names = c("Mazda RX4", "Mazda RX4 Wag", 
"Datsun 710", "Hornet 4 Drive", "Hornet Sportabout", "Valiant", 
"Duster 360", "Merc 240D", "Merc 230", "Merc 280", "Merc 280C", 
"Merc 450SE", "Merc 450SL", "Merc 450SLC", "Cadillac Fleetwood", 
"Lincoln Continental", "Chrysler Imperial", "Fiat 128", "Honda Civic", 
"Toyota Corolla", "Toyota Corona", "Dodge Challenger", "AMC Javelin", 
"Camaro Z28", "Pontiac Firebird", "Fiat X1-9", "Porsche 914-2", 
"Lotus Europa", "Ford Pantera L", "Ferrari Dino", "Maserati Bora", 
"Volvo 142E"), class = "data.frame")</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="co"># En tidyverse, la fonction tribble peut être utile pour créer des bases lignes par lignes</span></span>
<span id="cb297-2"><a href="#cb297-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb297-3"><a href="#cb297-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tribble</span>(</span>
<span id="cb297-4"><a href="#cb297-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>x, <span class="sc">~</span>y,</span>
<span id="cb297-5"><a href="#cb297-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"a"</span>,   <span class="dv">1</span>,</span>
<span id="cb297-6"><a href="#cb297-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"b"</span>,   <span class="dv">2</span></span>
<span id="cb297-7"><a href="#cb297-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  x         y
  &lt;chr&gt; &lt;dbl&gt;
1 a         1
2 b         2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Outils de debogage</span></span>
<span id="cb299-2"><a href="#cb299-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">error =</span> recover)</span>
<span id="cb299-3"><a href="#cb299-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">error=</span><span class="cn">NULL</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Définir ses propres opérateurs</span></span>
<span id="cb300-2"><a href="#cb300-2" aria-hidden="true" tabindex="-1"></a><span class="co"># R reconnait le texte entre %% comme un opérateur binaire</span></span>
<span id="cb300-3"><a href="#cb300-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple, simplifier la fonction paste</span></span>
<span id="cb300-4"><a href="#cb300-4" aria-hidden="true" tabindex="-1"></a><span class="st">'%+%'</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) { <span class="fu">paste</span>(x, y, <span class="at">sep =</span> <span class="st">""</span>) }</span>
<span id="cb300-5"><a href="#cb300-5" aria-hidden="true" tabindex="-1"></a><span class="st">"Groupe_"</span> <span class="sc">%+%</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">9</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Groupe_0" "Groupe_1" "Groupe_2" "Groupe_3" "Groupe_4" "Groupe_5"
 [7] "Groupe_6" "Groupe_7" "Groupe_8" "Groupe_9"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb302"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Récupérer les éléments à la diagonale d'un dataframe</span></span>
<span id="cb302-2"><a href="#cb302-2" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="fu">as.matrix</span>(mtcars))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  21.00   6.00 108.00 110.00   3.15   3.46  15.84   1.00   0.00   4.00
[11]   4.00</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="co"># S'assurer qu'un objet R existe déjà</span></span>
<span id="cb304-2"><a href="#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exists</span>(<span class="st">"mtcars"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="le-pipe-sur-r" class="level1" data-number="17">
<h1 data-number="17"><span class="header-section-number">17</span> Le pipe sur R</h1>
<p>Cet opérateur permet d’enchaîner les opérations et d’avoir un code plus lisible.</p>
<p>Il existe différents types :</p>
<ul>
<li><p><strong>Le pipe de Rbase :</strong> <code>|&gt;</code></p></li>
<li><p><strong>Le pipe du tidyverse :</strong> <code>%&gt;%</code></p></li>
</ul>
<p>Les deux pipes fonctionnent de la même manière mais diffèrent sur les points suivants :</p>
<table class="caption-top table">
<colgroup>
<col style="width: 32%">
<col style="width: 18%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th>Thème</th>
<th><code>|&gt;</code></th>
<th><code>%&gt;%</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Placeholder (pour indiquer où placer l’objet)</td>
<td><p><code>_</code></p>
<p><code>x |&gt; f(y, a = _)</code></p></td>
<td><p><code>.</code></p>
<p><code>x %&gt;% f(y, a = .)</code></p></td>
</tr>
<tr class="even">
<td>Package</td>
<td>Aucun : directement sur R</td>
<td>Magrittr (pipe disponible lorsqu’on effectue <code>library(tidyverse)</code>) |</td>
</tr>
<tr class="odd">
<td>Fonction</td>
<td>Impossible</td>
<td>Possible</td>
</tr>
<tr class="even">
<td>Temps de calcul</td>
<td>Rapide</td>
<td>Plus lent</td>
</tr>
<tr class="odd">
<td>Opérateurs</td>
<td><code>|&gt;</code></td>
<td><code>%&gt;%</code> <code>%&lt;&gt;%</code> <code>%$%</code> <code>%!&gt;%</code> <code>%T&gt;%</code></td>
</tr>
</tbody>
</table>
<p><em>Source</em> :</p>
<ul>
<li><a href="https://larmarange.github.io/guide-R/manipulation/pipe.html#le-pipe-natif-de-r" class="uri">https://larmarange.github.io/guide-R/manipulation/pipe.html#le-pipe-natif-de-r</a></li>
</ul>
</section>
<section id="fonction-pour-copier-des-données-r-dans-le-presse-papier-et-les-coller-par-exemple-dans-excel" class="level1" data-number="18">
<h1 data-number="18"><span class="header-section-number">18</span> Fonction pour copier des données R dans le presse-papier et les coller (par exemple dans Excel)</h1>
<p>Pour coller des données de R dans Excel, on peut :</p>
<ul>
<li>faire passer la fonction <code>R</code> CopierColler() ci-dessous sur les données <code>R</code> que l’on souhaite copier dans Excel ;</li>
<li>puis coller le presse-papier directement dans Excel.</li>
</ul>
<p>La fonction peut être assez pratique.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Copier des données dans le presse-papier</span></span>
<span id="cb306-2"><a href="#cb306-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> mtcars</span>
<span id="cb306-3"><a href="#cb306-3" aria-hidden="true" tabindex="-1"></a>CopierColler <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">col.names =</span> <span class="cn">TRUE</span>, <span class="at">dec =</span> <span class="st">","</span>, <span class="at">na =</span> <span class="st">""</span>, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>, ...) {</span>
<span id="cb306-4"><a href="#cb306-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.table</span>(x, <span class="st">"clipboard"</span>, <span class="at">sep =</span> sep, <span class="at">row.names =</span> row.names, <span class="at">col.names =</span> col.names, <span class="at">dec =</span> dec, <span class="at">na =</span> na, <span class="at">quote =</span> quote, ...)</span>
<span id="cb306-5"><a href="#cb306-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb306-6"><a href="#cb306-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonctionne sous système Windows, pas Linux</span></span>
<span id="cb306-7"><a href="#cb306-7" aria-hidden="true" tabindex="-1"></a><span class="co">#CopierColler(x)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="conseils-divers" class="level1" data-number="19">
<h1 data-number="19"><span class="header-section-number">19</span> Conseils divers</h1>
<p>Il est déconseillé de nommer des variables temporaires <code>var</code>, car ce nom désigne la fonction <code>R</code> permettant de calculer une variance.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple : variance d'un échantillon aléatoire de 1000 observations tiré d'une loi normale centrée réduite</span></span>
<span id="cb307-2"><a href="#cb307-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.027658</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb309"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le format en résultat de sapply est imprévisible</span></span>
<span id="cb309-2"><a href="#cb309-2" aria-hidden="true" tabindex="-1"></a><span class="co"># integer</span></span>
<span id="cb309-3"><a href="#cb309-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(<span class="dv">1</span>L, <span class="cf">function</span>(x) <span class="fu">c</span>(x, x))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]
[1,]    1
[2,]    1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb311"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list</span></span>
<span id="cb311-2"><a href="#cb311-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(<span class="fu">integer</span>(), <span class="cf">function</span>(x) <span class="fu">c</span>(x, x))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>list()</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb313"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le résultat de ifelse() dépend du format de la condition</span></span>
<span id="cb313-2"><a href="#cb313-2" aria-hidden="true" tabindex="-1"></a><span class="co"># logical</span></span>
<span id="cb313-3"><a href="#cb313-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="cn">NA</span>, <span class="dv">1</span>L, <span class="dv">1</span>L)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb315"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="co"># integer</span></span>
<span id="cb315-2"><a href="#cb315-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="cn">FALSE</span>, <span class="dv">1</span>L, <span class="dv">1</span>L)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/nassab-abdallah\.github\.io\/aide_memoire_r_sas\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Code source</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb317" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb317-2"><a href="#cb317-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Trucs et astuces en `R`"</span></span>
<span id="cb317-3"><a href="#cb317-3" aria-hidden="true" tabindex="-1"></a><span class="an">lang :</span><span class="co"> fr</span></span>
<span id="cb317-4"><a href="#cb317-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb317-5"><a href="#cb317-5" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: Nassab ABDALLAH</span></span>
<span id="cb317-6"><a href="#cb317-6" aria-hidden="true" tabindex="-1"></a><span class="co">    affiliation: Dares/SCS, &lt;nassab.abdallah@travail.gouv.fr&gt;</span></span>
<span id="cb317-7"><a href="#cb317-7" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: Damien EUZENAT</span></span>
<span id="cb317-8"><a href="#cb317-8" aria-hidden="true" tabindex="-1"></a><span class="co">    affiliation: Dares/DIP, &lt;damien.euzenat@travail.gouv.fr&gt;</span></span>
<span id="cb317-9"><a href="#cb317-9" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb317-10"><a href="#cb317-10" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb317-11"><a href="#cb317-11" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb317-12"><a href="#cb317-12" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-expand: 2</span></span>
<span id="cb317-13"><a href="#cb317-13" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-location: left</span></span>
<span id="cb317-14"><a href="#cb317-14" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb317-15"><a href="#cb317-15" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb317-16"><a href="#cb317-16" aria-hidden="true" tabindex="-1"></a><span class="co">    smooth-scroll: true</span></span>
<span id="cb317-17"><a href="#cb317-17" aria-hidden="true" tabindex="-1"></a><span class="co">    link-external-icon: true</span></span>
<span id="cb317-18"><a href="#cb317-18" aria-hidden="true" tabindex="-1"></a><span class="co">    link-external-newwindow: true</span></span>
<span id="cb317-19"><a href="#cb317-19" aria-hidden="true" tabindex="-1"></a><span class="co">    page-layout: full</span></span>
<span id="cb317-20"><a href="#cb317-20" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb317-21"><a href="#cb317-21" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb317-22"><a href="#cb317-22" aria-hidden="true" tabindex="-1"></a><span class="co"># format : native    </span></span>
<span id="cb317-23"><a href="#cb317-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-24"><a href="#cb317-24" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb317-25"><a href="#cb317-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-26"><a href="#cb317-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary for listings and search engines</span></span>
<span id="cb317-27"><a href="#cb317-27" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> |</span></span>
<span id="cb317-28"><a href="#cb317-28" aria-hidden="true" tabindex="-1"></a><span class="co">  Trucs et astuces en `R`.</span></span>
<span id="cb317-29"><a href="#cb317-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-30"><a href="#cb317-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Date published</span></span>
<span id="cb317-31"><a href="#cb317-31" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "`r Sys.Date()`"</span></span>
<span id="cb317-32"><a href="#cb317-32" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb317-33"><a href="#cb317-33" aria-hidden="true" tabindex="-1"></a><span class="co">  rmdformats::robobook:</span></span>
<span id="cb317-34"><a href="#cb317-34" aria-hidden="true" tabindex="-1"></a><span class="co">    highlight: tango</span></span>
<span id="cb317-35"><a href="#cb317-35" aria-hidden="true" tabindex="-1"></a><span class="co">    number_sections: true</span></span>
<span id="cb317-36"><a href="#cb317-36" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb317-37"><a href="#cb317-37" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb317-38"><a href="#cb317-38" aria-hidden="true" tabindex="-1"></a><span class="co">  - R</span></span>
<span id="cb317-39"><a href="#cb317-39" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb317-40"><a href="#cb317-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-41"><a href="#cb317-41" aria-hidden="true" tabindex="-1"></a>::: justify</span>
<span id="cb317-42"><a href="#cb317-42" aria-hidden="true" tabindex="-1"></a>Voici quelques trucs et astuces utiles à connaître sur R, issus en partie des livres <span class="co">[</span><span class="ot">The R Inferno</span><span class="co">](https://www.burns-stat.com/pages/Tutor/R_inferno.pdf)</span> et <span class="co">[</span><span class="ot">Advanced R</span><span class="co">](https://adv-r.hadley.nz/)</span>, à consulter pour plus de détails.</span>
<span id="cb317-43"><a href="#cb317-43" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb317-44"><a href="#cb317-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-45"><a href="#cb317-45" aria-hidden="true" tabindex="-1"></a><span class="fu"># Effets des calculs en virgule flottante</span></span>
<span id="cb317-46"><a href="#cb317-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-47"><a href="#cb317-47" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-48"><a href="#cb317-48" aria-hidden="true" tabindex="-1"></a><span class="in">sqrt(2) ^ 2 == 2</span></span>
<span id="cb317-49"><a href="#cb317-49" aria-hidden="true" tabindex="-1"></a><span class="in">1 / 49 * 49 == 1</span></span>
<span id="cb317-50"><a href="#cb317-50" aria-hidden="true" tabindex="-1"></a><span class="in">.1 == .3 / 3</span></span>
<span id="cb317-51"><a href="#cb317-51" aria-hidden="true" tabindex="-1"></a><span class="in">seq(0, 1, by=.1) == .3</span></span>
<span id="cb317-52"><a href="#cb317-52" aria-hidden="true" tabindex="-1"></a><span class="in">unique(c(.3, .4 - .1, .5 - .2, .6 - .3, .7 - .4))</span></span>
<span id="cb317-53"><a href="#cb317-53" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-54"><a href="#cb317-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-55"><a href="#cb317-55" aria-hidden="true" tabindex="-1"></a><span class="fu"># Les types d'objet</span></span>
<span id="cb317-56"><a href="#cb317-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-57"><a href="#cb317-57" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-58"><a href="#cb317-58" aria-hidden="true" tabindex="-1"></a><span class="in"># En savoir plus sur ses données</span></span>
<span id="cb317-59"><a href="#cb317-59" aria-hidden="true" tabindex="-1"></a><span class="in">data("cars")</span></span>
<span id="cb317-60"><a href="#cb317-60" aria-hidden="true" tabindex="-1"></a><span class="in">typeof(cars)</span></span>
<span id="cb317-61"><a href="#cb317-61" aria-hidden="true" tabindex="-1"></a><span class="in">class(cars)</span></span>
<span id="cb317-62"><a href="#cb317-62" aria-hidden="true" tabindex="-1"></a><span class="in">mode(cars)</span></span>
<span id="cb317-63"><a href="#cb317-63" aria-hidden="true" tabindex="-1"></a><span class="in">str(cars)</span></span>
<span id="cb317-64"><a href="#cb317-64" aria-hidden="true" tabindex="-1"></a><span class="in">dim(cars)</span></span>
<span id="cb317-65"><a href="#cb317-65" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.data.frame(cars), is.list(cars), is.vector(cars), is.array(cars))</span></span>
<span id="cb317-66"><a href="#cb317-66" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-67"><a href="#cb317-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-68"><a href="#cb317-68" aria-hidden="true" tabindex="-1"></a>Notation L</span>
<span id="cb317-69"><a href="#cb317-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-70"><a href="#cb317-70" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-71"><a href="#cb317-71" aria-hidden="true" tabindex="-1"></a><span class="in"># Notation L : imposer à R de créer un nombre sous format "integer", pour des raisons d'efficacité</span></span>
<span id="cb317-72"><a href="#cb317-72" aria-hidden="true" tabindex="-1"></a><span class="in">class(1)</span></span>
<span id="cb317-73"><a href="#cb317-73" aria-hidden="true" tabindex="-1"></a><span class="in">class(1L)</span></span>
<span id="cb317-74"><a href="#cb317-74" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-75"><a href="#cb317-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-76"><a href="#cb317-76" aria-hidden="true" tabindex="-1"></a><span class="fu"># Les affectations</span></span>
<span id="cb317-77"><a href="#cb317-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-78"><a href="#cb317-78" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-79"><a href="#cb317-79" aria-hidden="true" tabindex="-1"></a><span class="in"># Importance des espaces</span></span>
<span id="cb317-80"><a href="#cb317-80" aria-hidden="true" tabindex="-1"></a><span class="in">x&lt;-3</span></span>
<span id="cb317-81"><a href="#cb317-81" aria-hidden="true" tabindex="-1"></a><span class="in"># S'agit-il de ?</span></span>
<span id="cb317-82"><a href="#cb317-82" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- 3</span></span>
<span id="cb317-83"><a href="#cb317-83" aria-hidden="true" tabindex="-1"></a><span class="in"># Ou de ?</span></span>
<span id="cb317-84"><a href="#cb317-84" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt; -3</span></span>
<span id="cb317-85"><a href="#cb317-85" aria-hidden="true" tabindex="-1"></a><span class="in"># Il s'agit du premier cas !</span></span>
<span id="cb317-86"><a href="#cb317-86" aria-hidden="true" tabindex="-1"></a><span class="in">x</span></span>
<span id="cb317-87"><a href="#cb317-87" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-88"><a href="#cb317-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-89"><a href="#cb317-89" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-90"><a href="#cb317-90" aria-hidden="true" tabindex="-1"></a><span class="in"># Les {} permettent de réaliser une affectation (&lt;-) au sein d'un traitement plus complexe !</span></span>
<span id="cb317-91"><a href="#cb317-91" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple ici : sommer les positions paires multipliées par 2 et les positions impaires multipliées par 3</span></span>
<span id="cb317-92"><a href="#cb317-92" aria-hidden="true" tabindex="-1"></a><span class="in">sum({x &lt;- 1:6 ; x[1:length(x) %% 2 == 0] &lt;- x[1:length(x) %% 2 == 0] * 2 ; x[1:length(x) %% 2 != 0] &lt;- x[1:length(x) %% 2 != 0] * 3 ; x})</span></span>
<span id="cb317-93"><a href="#cb317-93" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-94"><a href="#cb317-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-95"><a href="#cb317-95" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-96"><a href="#cb317-96" aria-hidden="true" tabindex="-1"></a><span class="in"># Afficher ou non la valeur de l'objet affecté pendant l'affectation</span></span>
<span id="cb317-97"><a href="#cb317-97" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- pi</span></span>
<span id="cb317-98"><a href="#cb317-98" aria-hidden="true" tabindex="-1"></a><span class="in">(x &lt;- pi)</span></span>
<span id="cb317-99"><a href="#cb317-99" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-100"><a href="#cb317-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-101"><a href="#cb317-101" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, error=TRUE}</span></span>
<span id="cb317-102"><a href="#cb317-102" aria-hidden="true" tabindex="-1"></a><span class="in"># Comparaisons multiples</span></span>
<span id="cb317-103"><a href="#cb317-103" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- 0.5</span></span>
<span id="cb317-104"><a href="#cb317-104" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb317-105"><a href="#cb317-105" aria-hidden="true" tabindex="-1"></a><span class="in">0 &lt; x &amp; x &lt; 1</span></span>
<span id="cb317-106"><a href="#cb317-106" aria-hidden="true" tabindex="-1"></a><span class="in"># Incorrect</span></span>
<span id="cb317-107"><a href="#cb317-107" aria-hidden="true" tabindex="-1"></a><span class="in">0 &lt; x &lt; 1</span></span>
<span id="cb317-108"><a href="#cb317-108" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-109"><a href="#cb317-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-110"><a href="#cb317-110" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-111"><a href="#cb317-111" aria-hidden="true" tabindex="-1"></a><span class="in"># Ne pas confondre !</span></span>
<span id="cb317-112"><a href="#cb317-112" aria-hidden="true" tabindex="-1"></a><span class="in">seq(0:10)</span></span>
<span id="cb317-113"><a href="#cb317-113" aria-hidden="true" tabindex="-1"></a><span class="in">0:10</span></span>
<span id="cb317-114"><a href="#cb317-114" aria-hidden="true" tabindex="-1"></a><span class="in">seq(0, 10)</span></span>
<span id="cb317-115"><a href="#cb317-115" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-116"><a href="#cb317-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-117"><a href="#cb317-117" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-118"><a href="#cb317-118" aria-hidden="true" tabindex="-1"></a><span class="in"># Privilégier seq_len à : lorsqu'il y a un risque de 0</span></span>
<span id="cb317-119"><a href="#cb317-119" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonctionnement identique</span></span>
<span id="cb317-120"><a href="#cb317-120" aria-hidden="true" tabindex="-1"></a><span class="in">n &lt;- 5</span></span>
<span id="cb317-121"><a href="#cb317-121" aria-hidden="true" tabindex="-1"></a><span class="in">1:n</span></span>
<span id="cb317-122"><a href="#cb317-122" aria-hidden="true" tabindex="-1"></a><span class="in">seq_len(n)</span></span>
<span id="cb317-123"><a href="#cb317-123" aria-hidden="true" tabindex="-1"></a><span class="in"># Problème avec les 0</span></span>
<span id="cb317-124"><a href="#cb317-124" aria-hidden="true" tabindex="-1"></a><span class="in">n &lt;- 0</span></span>
<span id="cb317-125"><a href="#cb317-125" aria-hidden="true" tabindex="-1"></a><span class="in">1:n</span></span>
<span id="cb317-126"><a href="#cb317-126" aria-hidden="true" tabindex="-1"></a><span class="in">seq_len(n)</span></span>
<span id="cb317-127"><a href="#cb317-127" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-128"><a href="#cb317-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-129"><a href="#cb317-129" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-130"><a href="#cb317-130" aria-hidden="true" tabindex="-1"></a><span class="in"># Préférer seq_along à : au cas où la taille de l'objet est 0</span></span>
<span id="cb317-131"><a href="#cb317-131" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- c() ;length(x)</span></span>
<span id="cb317-132"><a href="#cb317-132" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in 1:length(x)) print(i)</span></span>
<span id="cb317-133"><a href="#cb317-133" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in seq_along(x)) print(i)</span></span>
<span id="cb317-134"><a href="#cb317-134" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in seq(along=x)) print(i)</span></span>
<span id="cb317-135"><a href="#cb317-135" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-136"><a href="#cb317-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-137"><a href="#cb317-137" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-138"><a href="#cb317-138" aria-hidden="true" tabindex="-1"></a><span class="in"># Différences seq, seq_len et seq_along</span></span>
<span id="cb317-139"><a href="#cb317-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-140"><a href="#cb317-140" aria-hidden="true" tabindex="-1"></a><span class="in"># seq : créé une séquence d'éléments successifs, espacés éventuellement d'un pas</span></span>
<span id="cb317-141"><a href="#cb317-141" aria-hidden="true" tabindex="-1"></a><span class="in">seq(from = 1, to = 10, by = 2)</span></span>
<span id="cb317-142"><a href="#cb317-142" aria-hidden="true" tabindex="-1"></a><span class="in">seq(1, 10, 2)</span></span>
<span id="cb317-143"><a href="#cb317-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-144"><a href="#cb317-144" aria-hidden="true" tabindex="-1"></a><span class="in"># seq_len : créé une séquence d'éléments de 1 jusqu'au paramètre de la fonction (supposé positif)</span></span>
<span id="cb317-145"><a href="#cb317-145" aria-hidden="true" tabindex="-1"></a><span class="in">seq_len(10)</span></span>
<span id="cb317-146"><a href="#cb317-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-147"><a href="#cb317-147" aria-hidden="true" tabindex="-1"></a><span class="in"># seq_along : créé une séquence d'éléments de 1 jusqu'au nombre d'éléments du vecteur</span></span>
<span id="cb317-148"><a href="#cb317-148" aria-hidden="true" tabindex="-1"></a><span class="in">seq_along(c(7,9,1,0))</span></span>
<span id="cb317-149"><a href="#cb317-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-150"><a href="#cb317-150" aria-hidden="true" tabindex="-1"></a><span class="in"># seq se comporte comme seq_along si le vecteur comprend plusieurs éléments, et comme seq_len s'il comprend un seul élément</span></span>
<span id="cb317-151"><a href="#cb317-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-152"><a href="#cb317-152" aria-hidden="true" tabindex="-1"></a><span class="in"># Plusieurs éléments</span></span>
<span id="cb317-153"><a href="#cb317-153" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur &lt;- c(10, 20, 30)</span></span>
<span id="cb317-154"><a href="#cb317-154" aria-hidden="true" tabindex="-1"></a><span class="in">seq_along(vecteur)</span></span>
<span id="cb317-155"><a href="#cb317-155" aria-hidden="true" tabindex="-1"></a><span class="in">seq_len(vecteur)</span></span>
<span id="cb317-156"><a href="#cb317-156" aria-hidden="true" tabindex="-1"></a><span class="in">seq(vecteur)</span></span>
<span id="cb317-157"><a href="#cb317-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-158"><a href="#cb317-158" aria-hidden="true" tabindex="-1"></a><span class="in"># Un seul élement</span></span>
<span id="cb317-159"><a href="#cb317-159" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur &lt;- 10</span></span>
<span id="cb317-160"><a href="#cb317-160" aria-hidden="true" tabindex="-1"></a><span class="in">seq_along(vecteur)</span></span>
<span id="cb317-161"><a href="#cb317-161" aria-hidden="true" tabindex="-1"></a><span class="in">seq_len(vecteur)</span></span>
<span id="cb317-162"><a href="#cb317-162" aria-hidden="true" tabindex="-1"></a><span class="in">seq(vecteur)</span></span>
<span id="cb317-163"><a href="#cb317-163" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-164"><a href="#cb317-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-165"><a href="#cb317-165" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-166"><a href="#cb317-166" aria-hidden="true" tabindex="-1"></a><span class="in"># Equivalent des list-comprehensions de type Python en R</span></span>
<span id="cb317-167"><a href="#cb317-167" aria-hidden="true" tabindex="-1"></a><span class="in"># Somme des entiers de 1 à 1 000 multiples de 3 ou 5, en une ligne !</span></span>
<span id="cb317-168"><a href="#cb317-168" aria-hidden="true" tabindex="-1"></a><span class="in"># 4 manières de faire</span></span>
<span id="cb317-169"><a href="#cb317-169" aria-hidden="true" tabindex="-1"></a><span class="in">sum({l &lt;- 1:1000 ; l[l %% 3 == 0 | l %% 5 == 0]})</span></span>
<span id="cb317-170"><a href="#cb317-170" aria-hidden="true" tabindex="-1"></a><span class="in">sum({l &lt;- 1:1000 ; l[seq_along(l) %% 3 == 0 | seq_along(l) %% 5 == 0]})</span></span>
<span id="cb317-171"><a href="#cb317-171" aria-hidden="true" tabindex="-1"></a><span class="in">sum(l&lt;-(1:1000)[l %% 3 == 0 | l %% 5 == 0])</span></span>
<span id="cb317-172"><a href="#cb317-172" aria-hidden="true" tabindex="-1"></a><span class="in">sum((1:1000)[(1:1000 %% 3) == 0 | (1:1000 %% 5) == 0])</span></span>
<span id="cb317-173"><a href="#cb317-173" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-174"><a href="#cb317-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-175"><a href="#cb317-175" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-176"><a href="#cb317-176" aria-hidden="true" tabindex="-1"></a><span class="in"># Opérations mathématiques</span></span>
<span id="cb317-177"><a href="#cb317-177" aria-hidden="true" tabindex="-1"></a><span class="in"># Infini</span></span>
<span id="cb317-178"><a href="#cb317-178" aria-hidden="true" tabindex="-1"></a><span class="in">1/0</span></span>
<span id="cb317-179"><a href="#cb317-179" aria-hidden="true" tabindex="-1"></a><span class="in"># Nan = not a number</span></span>
<span id="cb317-180"><a href="#cb317-180" aria-hidden="true" tabindex="-1"></a><span class="in">0/0</span></span>
<span id="cb317-181"><a href="#cb317-181" aria-hidden="true" tabindex="-1"></a><span class="in">log(-1)</span></span>
<span id="cb317-182"><a href="#cb317-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-183"><a href="#cb317-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-184"><a href="#cb317-184" aria-hidden="true" tabindex="-1"></a><span class="fu"># Principe de vectorisation</span></span>
<span id="cb317-185"><a href="#cb317-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-186"><a href="#cb317-186" aria-hidden="true" tabindex="-1"></a>La fonction s'applique à tous les éléments du vecteur !!</span>
<span id="cb317-187"><a href="#cb317-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-188"><a href="#cb317-188" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-189"><a href="#cb317-189" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple de vecteur</span></span>
<span id="cb317-190"><a href="#cb317-190" aria-hidden="true" tabindex="-1"></a><span class="in">valeurs &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)</span></span>
<span id="cb317-191"><a href="#cb317-191" aria-hidden="true" tabindex="-1"></a><span class="in">valeurs &lt;- 1:10</span></span>
<span id="cb317-192"><a href="#cb317-192" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-193"><a href="#cb317-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-194"><a href="#cb317-194" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-195"><a href="#cb317-195" aria-hidden="true" tabindex="-1"></a><span class="in"># Valeurs au carré</span></span>
<span id="cb317-196"><a href="#cb317-196" aria-hidden="true" tabindex="-1"></a><span class="in">valeurs ** 2</span></span>
<span id="cb317-197"><a href="#cb317-197" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-198"><a href="#cb317-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-199"><a href="#cb317-199" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-200"><a href="#cb317-200" aria-hidden="true" tabindex="-1"></a><span class="in"># logarithme des valeurs</span></span>
<span id="cb317-201"><a href="#cb317-201" aria-hidden="true" tabindex="-1"></a><span class="in">log(valeurs)</span></span>
<span id="cb317-202"><a href="#cb317-202" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-203"><a href="#cb317-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-204"><a href="#cb317-204" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-205"><a href="#cb317-205" aria-hidden="true" tabindex="-1"></a><span class="in"># Maximum des valeurs</span></span>
<span id="cb317-206"><a href="#cb317-206" aria-hidden="true" tabindex="-1"></a><span class="in">max(valeurs)</span></span>
<span id="cb317-207"><a href="#cb317-207" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-208"><a href="#cb317-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-209"><a href="#cb317-209" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-210"><a href="#cb317-210" aria-hidden="true" tabindex="-1"></a><span class="in"># Limite des valeurs</span></span>
<span id="cb317-211"><a href="#cb317-211" aria-hidden="true" tabindex="-1"></a><span class="in">range(valeurs)</span></span>
<span id="cb317-212"><a href="#cb317-212" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-213"><a href="#cb317-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-214"><a href="#cb317-214" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-215"><a href="#cb317-215" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb317-216"><a href="#cb317-216" aria-hidden="true" tabindex="-1"></a><span class="in">mean(valeurs)</span></span>
<span id="cb317-217"><a href="#cb317-217" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-218"><a href="#cb317-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-219"><a href="#cb317-219" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-220"><a href="#cb317-220" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb317-221"><a href="#cb317-221" aria-hidden="true" tabindex="-1"></a><span class="in">mean(c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10))</span></span>
<span id="cb317-222"><a href="#cb317-222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-223"><a href="#cb317-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-224"><a href="#cb317-224" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-225"><a href="#cb317-225" aria-hidden="true" tabindex="-1"></a><span class="in"># Inattendu</span></span>
<span id="cb317-226"><a href="#cb317-226" aria-hidden="true" tabindex="-1"></a><span class="in">mean(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)</span></span>
<span id="cb317-227"><a href="#cb317-227" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-228"><a href="#cb317-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-229"><a href="#cb317-229" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-230"><a href="#cb317-230" aria-hidden="true" tabindex="-1"></a><span class="in"># Attention aux parenthèses !</span></span>
<span id="cb317-231"><a href="#cb317-231" aria-hidden="true" tabindex="-1"></a><span class="in">n &lt;- 10</span></span>
<span id="cb317-232"><a href="#cb317-232" aria-hidden="true" tabindex="-1"></a><span class="in"># Inattendu ! Correspond à (1-1, 2-1, 3-1, ..., 10-1)</span></span>
<span id="cb317-233"><a href="#cb317-233" aria-hidden="true" tabindex="-1"></a><span class="in">1:n-1</span></span>
<span id="cb317-234"><a href="#cb317-234" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb317-235"><a href="#cb317-235" aria-hidden="true" tabindex="-1"></a><span class="in">1:(n-1)</span></span>
<span id="cb317-236"><a href="#cb317-236" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-237"><a href="#cb317-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-238"><a href="#cb317-238" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-239"><a href="#cb317-239" aria-hidden="true" tabindex="-1"></a><span class="in"># Minimum ou maximum élément par élément</span></span>
<span id="cb317-240"><a href="#cb317-240" aria-hidden="true" tabindex="-1"></a><span class="in">x1 &lt;- c(1, 2, 5, 6, 8)</span></span>
<span id="cb317-241"><a href="#cb317-241" aria-hidden="true" tabindex="-1"></a><span class="in">x2 &lt;- c(4, 0, 7, 2, 1)</span></span>
<span id="cb317-242"><a href="#cb317-242" aria-hidden="true" tabindex="-1"></a><span class="in"># Minimum : 2 possibilités</span></span>
<span id="cb317-243"><a href="#cb317-243" aria-hidden="true" tabindex="-1"></a><span class="in">pmin(x1, x2)</span></span>
<span id="cb317-244"><a href="#cb317-244" aria-hidden="true" tabindex="-1"></a><span class="in">mapply(min, x1, x2)</span></span>
<span id="cb317-245"><a href="#cb317-245" aria-hidden="true" tabindex="-1"></a><span class="in"># Maximum : 2 possibilités</span></span>
<span id="cb317-246"><a href="#cb317-246" aria-hidden="true" tabindex="-1"></a><span class="in">pmax(x1, x2)</span></span>
<span id="cb317-247"><a href="#cb317-247" aria-hidden="true" tabindex="-1"></a><span class="in">mapply(max, x1, x2)</span></span>
<span id="cb317-248"><a href="#cb317-248" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-249"><a href="#cb317-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-250"><a href="#cb317-250" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-251"><a href="#cb317-251" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculer (x - min) / (max - min) pour chaque élément x d'un vecteur</span></span>
<span id="cb317-252"><a href="#cb317-252" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- c(1,2,3)</span></span>
<span id="cb317-253"><a href="#cb317-253" aria-hidden="true" tabindex="-1"></a><span class="in">sapply(x, function(xi, mn, mx) {(xi - mn) / (mx - mn)}, mn = min(x), mx = max(x))</span></span>
<span id="cb317-254"><a href="#cb317-254" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-255"><a href="#cb317-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-256"><a href="#cb317-256" aria-hidden="true" tabindex="-1"></a><span class="fu"># Principe de coercion</span></span>
<span id="cb317-257"><a href="#cb317-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-258"><a href="#cb317-258" aria-hidden="true" tabindex="-1"></a>Dans les comparaisons, les objets R sont successivement convertis en logical, integer, numeric, complex et character, jusqu'à ce que la comparaison puisse se faire.</span>
<span id="cb317-259"><a href="#cb317-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-260"><a href="#cb317-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-261"><a href="#cb317-261" aria-hidden="true" tabindex="-1"></a><span class="in"># TRUE / FALSE est transformé en integer (1 / 0)</span></span>
<span id="cb317-262"><a href="#cb317-262" aria-hidden="true" tabindex="-1"></a><span class="in">TRUE == 1</span></span>
<span id="cb317-263"><a href="#cb317-263" aria-hidden="true" tabindex="-1"></a><span class="in">TRUE == 2</span></span>
<span id="cb317-264"><a href="#cb317-264" aria-hidden="true" tabindex="-1"></a><span class="in">FALSE == 0</span></span>
<span id="cb317-265"><a href="#cb317-265" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-266"><a href="#cb317-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-267"><a href="#cb317-267" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-268"><a href="#cb317-268" aria-hidden="true" tabindex="-1"></a><span class="in"># TRUE est convertit en character</span></span>
<span id="cb317-269"><a href="#cb317-269" aria-hidden="true" tabindex="-1"></a><span class="in">TRUE == "1"</span></span>
<span id="cb317-270"><a href="#cb317-270" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-271"><a href="#cb317-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-272"><a href="#cb317-272" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-273"><a href="#cb317-273" aria-hidden="true" tabindex="-1"></a><span class="in"># 5 est convertit en character</span></span>
<span id="cb317-274"><a href="#cb317-274" aria-hidden="true" tabindex="-1"></a><span class="in">5 &lt; '7'</span></span>
<span id="cb317-275"><a href="#cb317-275" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-276"><a href="#cb317-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-277"><a href="#cb317-277" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-278"><a href="#cb317-278" aria-hidden="true" tabindex="-1"></a><span class="in"># 50 est convertit en character</span></span>
<span id="cb317-279"><a href="#cb317-279" aria-hidden="true" tabindex="-1"></a><span class="in">50 &lt; '7'</span></span>
<span id="cb317-280"><a href="#cb317-280" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-281"><a href="#cb317-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-282"><a href="#cb317-282" aria-hidden="true" tabindex="-1"></a><span class="fu"># Principe de recycling</span></span>
<span id="cb317-283"><a href="#cb317-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-284"><a href="#cb317-284" aria-hidden="true" tabindex="-1"></a>En R Base, quand 2 vecteurs ne sont pas de même taille, le plus court vecteur est recyclé pour être de même taille que le plus long vecteur.</span>
<span id="cb317-285"><a href="#cb317-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-288"><a href="#cb317-288" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb317-289"><a href="#cb317-289" aria-hidden="true" tabindex="-1"></a><span class="co"># Si la taille du plus long vecteur est un entier multiple de la taile du plus court, R n'affiche pas d'avertissement</span></span>
<span id="cb317-290"><a href="#cb317-290" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb317-291"><a href="#cb317-291" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb317-292"><a href="#cb317-292" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> y</span>
<span id="cb317-293"><a href="#cb317-293" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-294"><a href="#cb317-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-297"><a href="#cb317-297" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb317-298"><a href="#cb317-298" aria-hidden="true" tabindex="-1"></a><span class="co"># Si la taille du plus long vecteur n'est pas un entier multiple de la taille du plus court, R affiche un avertissement</span></span>
<span id="cb317-299"><a href="#cb317-299" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb317-300"><a href="#cb317-300" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb317-301"><a href="#cb317-301" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> y</span>
<span id="cb317-302"><a href="#cb317-302" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-303"><a href="#cb317-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-306"><a href="#cb317-306" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb317-307"><a href="#cb317-307" aria-hidden="true" tabindex="-1"></a><span class="co"># Mais certaines fonctions pratiquent le recycling sans avertissement</span></span>
<span id="cb317-308"><a href="#cb317-308" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb317-309"><a href="#cb317-309" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb317-310"><a href="#cb317-310" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-311"><a href="#cb317-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-314"><a href="#cb317-314" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb317-315"><a href="#cb317-315" aria-hidden="true" tabindex="-1"></a><span class="co"># Et data.frame() renvoie une erreur</span></span>
<span id="cb317-316"><a href="#cb317-316" aria-hidden="true" tabindex="-1"></a><span class="co">#data.frame(1:2, 1:3)</span></span>
<span id="cb317-317"><a href="#cb317-317" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-318"><a href="#cb317-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-319"><a href="#cb317-319" aria-hidden="true" tabindex="-1"></a><span class="fu"># Opérateurs de contrôle</span></span>
<span id="cb317-320"><a href="#cb317-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-321"><a href="#cb317-321" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-322"><a href="#cb317-322" aria-hidden="true" tabindex="-1"></a><span class="in"># Conditions if / else</span></span>
<span id="cb317-323"><a href="#cb317-323" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- 1</span></span>
<span id="cb317-324"><a href="#cb317-324" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-325"><a href="#cb317-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-326"><a href="#cb317-326" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-327"><a href="#cb317-327" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb317-328"><a href="#cb317-328" aria-hidden="true" tabindex="-1"></a><span class="in">if (identical(x, 1)) {</span></span>
<span id="cb317-329"><a href="#cb317-329" aria-hidden="true" tabindex="-1"></a><span class="in">print("x est égal à 1")</span></span>
<span id="cb317-330"><a href="#cb317-330" aria-hidden="true" tabindex="-1"></a><span class="in">} else {</span></span>
<span id="cb317-331"><a href="#cb317-331" aria-hidden="true" tabindex="-1"></a><span class="in">print("x est différent de 1")</span></span>
<span id="cb317-332"><a href="#cb317-332" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb317-333"><a href="#cb317-333" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-334"><a href="#cb317-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-335"><a href="#cb317-335" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-336"><a href="#cb317-336" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb317-337"><a href="#cb317-337" aria-hidden="true" tabindex="-1"></a><span class="in">if (identical(x, 1)) {print("x est égal à 1")</span></span>
<span id="cb317-338"><a href="#cb317-338" aria-hidden="true" tabindex="-1"></a><span class="in">} else {print("x est différent de 1")}</span></span>
<span id="cb317-339"><a href="#cb317-339" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-340"><a href="#cb317-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-341"><a href="#cb317-341" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-342"><a href="#cb317-342" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb317-343"><a href="#cb317-343" aria-hidden="true" tabindex="-1"></a><span class="in">if (identical(x, 1)) print("x est égal à 1") else</span></span>
<span id="cb317-344"><a href="#cb317-344" aria-hidden="true" tabindex="-1"></a><span class="in">print("x est différent de 1")</span></span>
<span id="cb317-345"><a href="#cb317-345" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-346"><a href="#cb317-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-347"><a href="#cb317-347" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-348"><a href="#cb317-348" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb317-349"><a href="#cb317-349" aria-hidden="true" tabindex="-1"></a><span class="in">if (identical(x, 1)) print("x est égal à 1") else print("x est différent de 1")</span></span>
<span id="cb317-350"><a href="#cb317-350" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-351"><a href="#cb317-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-352"><a href="#cb317-352" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, error=TRUE}</span></span>
<span id="cb317-353"><a href="#cb317-353" aria-hidden="true" tabindex="-1"></a><span class="in"># Incorrect</span></span>
<span id="cb317-354"><a href="#cb317-354" aria-hidden="true" tabindex="-1"></a><span class="in">if (identical(x, 1)) print("x est égal à 1")</span></span>
<span id="cb317-355"><a href="#cb317-355" aria-hidden="true" tabindex="-1"></a><span class="in">else print("x est différent de 1")</span></span>
<span id="cb317-356"><a href="#cb317-356" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-357"><a href="#cb317-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-358"><a href="#cb317-358" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-359"><a href="#cb317-359" aria-hidden="true" tabindex="-1"></a><span class="in"># Switch</span></span>
<span id="cb317-360"><a href="#cb317-360" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonctions et conditions if / else</span></span>
<span id="cb317-361"><a href="#cb317-361" aria-hidden="true" tabindex="-1"></a><span class="in">condition &lt;- function(langue = "Français") {</span></span>
<span id="cb317-362"><a href="#cb317-362" aria-hidden="true" tabindex="-1"></a><span class="in">if (langue == "Français") {</span></span>
<span id="cb317-363"><a href="#cb317-363" aria-hidden="true" tabindex="-1"></a><span class="in">"salut"</span></span>
<span id="cb317-364"><a href="#cb317-364" aria-hidden="true" tabindex="-1"></a><span class="in">} else if (langue == "Anglais") {</span></span>
<span id="cb317-365"><a href="#cb317-365" aria-hidden="true" tabindex="-1"></a><span class="in">"hello"</span></span>
<span id="cb317-366"><a href="#cb317-366" aria-hidden="true" tabindex="-1"></a><span class="in">} else if (langue == "Russe") {</span></span>
<span id="cb317-367"><a href="#cb317-367" aria-hidden="true" tabindex="-1"></a><span class="in">"привет"</span></span>
<span id="cb317-368"><a href="#cb317-368" aria-hidden="true" tabindex="-1"></a><span class="in">} else {</span></span>
<span id="cb317-369"><a href="#cb317-369" aria-hidden="true" tabindex="-1"></a><span class="in">stop("salut")</span></span>
<span id="cb317-370"><a href="#cb317-370" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb317-371"><a href="#cb317-371" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb317-372"><a href="#cb317-372" aria-hidden="true" tabindex="-1"></a><span class="in">condition("Anglais")</span></span>
<span id="cb317-373"><a href="#cb317-373" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-374"><a href="#cb317-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-375"><a href="#cb317-375" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-376"><a href="#cb317-376" aria-hidden="true" tabindex="-1"></a><span class="in"># Autre possibilité avec switch, mais à réserver aux variables caractères !</span></span>
<span id="cb317-377"><a href="#cb317-377" aria-hidden="true" tabindex="-1"></a><span class="in">condition &lt;- function(langue = "Français") {</span></span>
<span id="cb317-378"><a href="#cb317-378" aria-hidden="true" tabindex="-1"></a><span class="in">switch(langue,</span></span>
<span id="cb317-379"><a href="#cb317-379" aria-hidden="true" tabindex="-1"></a><span class="in">Français = "salut",</span></span>
<span id="cb317-380"><a href="#cb317-380" aria-hidden="true" tabindex="-1"></a><span class="in">Anglais = "hello",</span></span>
<span id="cb317-381"><a href="#cb317-381" aria-hidden="true" tabindex="-1"></a><span class="in">Russe = "привет",</span></span>
<span id="cb317-382"><a href="#cb317-382" aria-hidden="true" tabindex="-1"></a><span class="in">stop("salut")</span></span>
<span id="cb317-383"><a href="#cb317-383" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb317-384"><a href="#cb317-384" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb317-385"><a href="#cb317-385" aria-hidden="true" tabindex="-1"></a><span class="in">condition("Français")</span></span>
<span id="cb317-386"><a href="#cb317-386" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-387"><a href="#cb317-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-388"><a href="#cb317-388" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-389"><a href="#cb317-389" aria-hidden="true" tabindex="-1"></a><span class="in"># Penser au print</span></span>
<span id="cb317-390"><a href="#cb317-390" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in 1:5) i</span></span>
<span id="cb317-391"><a href="#cb317-391" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in 1:5) print(i)</span></span>
<span id="cb317-392"><a href="#cb317-392" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-393"><a href="#cb317-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-394"><a href="#cb317-394" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-395"><a href="#cb317-395" aria-hidden="true" tabindex="-1"></a><span class="in"># Différences print et cat</span></span>
<span id="cb317-396"><a href="#cb317-396" aria-hidden="true" tabindex="-1"></a><span class="in">cat("Salut !\nComment vas-tu ?")</span></span>
<span id="cb317-397"><a href="#cb317-397" aria-hidden="true" tabindex="-1"></a><span class="in">print("Salut !\nComment vas-tu ?")</span></span>
<span id="cb317-398"><a href="#cb317-398" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-399"><a href="#cb317-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-400"><a href="#cb317-400" aria-hidden="true" tabindex="-1"></a><span class="fu"># Les valeurs manquantes</span></span>
<span id="cb317-401"><a href="#cb317-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-402"><a href="#cb317-402" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-403"><a href="#cb317-403" aria-hidden="true" tabindex="-1"></a><span class="in"># Transformer les valeurs manquantes en 0</span></span>
<span id="cb317-404"><a href="#cb317-404" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- data.frame(X1 = c(1, NA, 2), X2 = c(NA, NA, 3))</span></span>
<span id="cb317-405"><a href="#cb317-405" aria-hidden="true" tabindex="-1"></a><span class="in">x</span></span>
<span id="cb317-406"><a href="#cb317-406" aria-hidden="true" tabindex="-1"></a><span class="in">x[is.na(x)] &lt;- 0</span></span>
<span id="cb317-407"><a href="#cb317-407" aria-hidden="true" tabindex="-1"></a><span class="in">x</span></span>
<span id="cb317-408"><a href="#cb317-408" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-409"><a href="#cb317-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-410"><a href="#cb317-410" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-411"><a href="#cb317-411" aria-hidden="true" tabindex="-1"></a><span class="in"># Pour les valeurs manquantes, toujours utiliser is.na et non ==</span></span>
<span id="cb317-412"><a href="#cb317-412" aria-hidden="true" tabindex="-1"></a><span class="in">NA == c(3, 1, 3, NA)</span></span>
<span id="cb317-413"><a href="#cb317-413" aria-hidden="true" tabindex="-1"></a><span class="in">is.na(c(3, 1, 3, NA))</span></span>
<span id="cb317-414"><a href="#cb317-414" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-415"><a href="#cb317-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-416"><a href="#cb317-416" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-417"><a href="#cb317-417" aria-hidden="true" tabindex="-1"></a><span class="in"># Utiliser %in% et non == pour vérifier une appartenance à plusieurs variables</span></span>
<span id="cb317-418"><a href="#cb317-418" aria-hidden="true" tabindex="-1"></a><span class="in">x1 &lt;- 1:6</span></span>
<span id="cb317-419"><a href="#cb317-419" aria-hidden="true" tabindex="-1"></a><span class="in">x1 == c(1, 5)</span></span>
<span id="cb317-420"><a href="#cb317-420" aria-hidden="true" tabindex="-1"></a><span class="in">x1 %in% c(1, 5)</span></span>
<span id="cb317-421"><a href="#cb317-421" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-422"><a href="#cb317-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-423"><a href="#cb317-423" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-424"><a href="#cb317-424" aria-hidden="true" tabindex="-1"></a><span class="in"># Sélection de données en cas de valeurs manquantes</span></span>
<span id="cb317-425"><a href="#cb317-425" aria-hidden="true" tabindex="-1"></a><span class="in">xna &lt;- c(1, NA, 3, 2, 4, 2)</span></span>
<span id="cb317-426"><a href="#cb317-426" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-427"><a href="#cb317-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-428"><a href="#cb317-428" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-429"><a href="#cb317-429" aria-hidden="true" tabindex="-1"></a><span class="in"># Avec ce code, les NA sont conservés</span></span>
<span id="cb317-430"><a href="#cb317-430" aria-hidden="true" tabindex="-1"></a><span class="in">xna[xna == 2]</span></span>
<span id="cb317-431"><a href="#cb317-431" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-432"><a href="#cb317-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-433"><a href="#cb317-433" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-434"><a href="#cb317-434" aria-hidden="true" tabindex="-1"></a><span class="in"># Code sans les NA</span></span>
<span id="cb317-435"><a href="#cb317-435" aria-hidden="true" tabindex="-1"></a><span class="in">xna[!is.na(xna) &amp; xna == 2]</span></span>
<span id="cb317-436"><a href="#cb317-436" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-437"><a href="#cb317-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-438"><a href="#cb317-438" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-439"><a href="#cb317-439" aria-hidden="true" tabindex="-1"></a><span class="in"># Code compact sans les NA</span></span>
<span id="cb317-440"><a href="#cb317-440" aria-hidden="true" tabindex="-1"></a><span class="in">xna[which(xna == 2)]</span></span>
<span id="cb317-441"><a href="#cb317-441" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-442"><a href="#cb317-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-443"><a href="#cb317-443" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-444"><a href="#cb317-444" aria-hidden="true" tabindex="-1"></a><span class="in"># Incidence des NA dans le calcul de statistiques !</span></span>
<span id="cb317-445"><a href="#cb317-445" aria-hidden="true" tabindex="-1"></a><span class="in"># Besoin de l'instruction na.rm = TRUE pour en supprimer l'incidence</span></span>
<span id="cb317-446"><a href="#cb317-446" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- c(1, 5, 6, NA, 8)</span></span>
<span id="cb317-447"><a href="#cb317-447" aria-hidden="true" tabindex="-1"></a><span class="in">mean(x)</span></span>
<span id="cb317-448"><a href="#cb317-448" aria-hidden="true" tabindex="-1"></a><span class="in">mean(x, na.rm = TRUE)</span></span>
<span id="cb317-449"><a href="#cb317-449" aria-hidden="true" tabindex="-1"></a><span class="in">max(x)</span></span>
<span id="cb317-450"><a href="#cb317-450" aria-hidden="true" tabindex="-1"></a><span class="in">max(x, na.rm = TRUE)</span></span>
<span id="cb317-451"><a href="#cb317-451" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-452"><a href="#cb317-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-453"><a href="#cb317-453" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-454"><a href="#cb317-454" aria-hidden="true" tabindex="-1"></a><span class="in"># Une moyenne de NA donne NaN (Not a Number) avec na.rm = TRUE !</span></span>
<span id="cb317-455"><a href="#cb317-455" aria-hidden="true" tabindex="-1"></a><span class="in">mean(c(NA, NA, NA), na.rm = TRUE)</span></span>
<span id="cb317-456"><a href="#cb317-456" aria-hidden="true" tabindex="-1"></a><span class="in"># Et donne NA avec na.rm = FALSE !</span></span>
<span id="cb317-457"><a href="#cb317-457" aria-hidden="true" tabindex="-1"></a><span class="in">mean(c(NA, NA, NA), na.rm = FALSE)</span></span>
<span id="cb317-458"><a href="#cb317-458" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-459"><a href="#cb317-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-460"><a href="#cb317-460" aria-hidden="true" tabindex="-1"></a><span class="fu"># Sélection d'éléments</span></span>
<span id="cb317-461"><a href="#cb317-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-462"><a href="#cb317-462" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-463"><a href="#cb317-463" aria-hidden="true" tabindex="-1"></a><span class="in"># Le 1er élément est numéroté 1 et non 0 comme dans Python</span></span>
<span id="cb317-464"><a href="#cb317-464" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- 1:3</span></span>
<span id="cb317-465"><a href="#cb317-465" aria-hidden="true" tabindex="-1"></a><span class="in">x[c(0, 4)] &lt;- c(-1, 9)</span></span>
<span id="cb317-466"><a href="#cb317-466" aria-hidden="true" tabindex="-1"></a><span class="in"># Marche !!</span></span>
<span id="cb317-467"><a href="#cb317-467" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in 0:3) print(x[i])</span></span>
<span id="cb317-468"><a href="#cb317-468" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-469"><a href="#cb317-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-470"><a href="#cb317-470" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-471"><a href="#cb317-471" aria-hidden="true" tabindex="-1"></a><span class="in"># Cas où les noms ne sont pas uniques</span></span>
<span id="cb317-472"><a href="#cb317-472" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- c(a = 1, b = 2, a = 3)</span></span>
<span id="cb317-473"><a href="#cb317-473" aria-hidden="true" tabindex="-1"></a><span class="in">x["a"]</span></span>
<span id="cb317-474"><a href="#cb317-474" aria-hidden="true" tabindex="-1"></a><span class="in">x[names(x) %in% "a"]</span></span>
<span id="cb317-475"><a href="#cb317-475" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-476"><a href="#cb317-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-477"><a href="#cb317-477" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-478"><a href="#cb317-478" aria-hidden="true" tabindex="-1"></a><span class="in"># Options drop = FALSE</span></span>
<span id="cb317-479"><a href="#cb317-479" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- data.frame(X1 = c(1,2), X2 = c(3,4), x3 = c(5,6))</span></span>
<span id="cb317-480"><a href="#cb317-480" aria-hidden="true" tabindex="-1"></a><span class="in">is.data.frame(x[, c(1,2)])</span></span>
<span id="cb317-481"><a href="#cb317-481" aria-hidden="true" tabindex="-1"></a><span class="in">is.data.frame(x[, c(1)])</span></span>
<span id="cb317-482"><a href="#cb317-482" aria-hidden="true" tabindex="-1"></a><span class="in">is.data.frame(x[, c(1), drop = FALSE])</span></span>
<span id="cb317-483"><a href="#cb317-483" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-484"><a href="#cb317-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-485"><a href="#cb317-485" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-486"><a href="#cb317-486" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonction subset</span></span>
<span id="cb317-487"><a href="#cb317-487" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- data.frame(x1 = c(1,2), x2 = c(3,4), x3 = c(5,6))</span></span>
<span id="cb317-488"><a href="#cb317-488" aria-hidden="true" tabindex="-1"></a><span class="in">subset(x, select = x1)</span></span>
<span id="cb317-489"><a href="#cb317-489" aria-hidden="true" tabindex="-1"></a><span class="in">subset(x, select = -x1)</span></span>
<span id="cb317-490"><a href="#cb317-490" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-491"><a href="#cb317-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-492"><a href="#cb317-492" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-493"><a href="#cb317-493" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb317-494"><a href="#cb317-494" aria-hidden="true" tabindex="-1"></a><span class="in">subset(x, x1 == 1)</span></span>
<span id="cb317-495"><a href="#cb317-495" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-496"><a href="#cb317-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-497"><a href="#cb317-497" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-498"><a href="#cb317-498" aria-hidden="true" tabindex="-1"></a><span class="in"># Incorrect</span></span>
<span id="cb317-499"><a href="#cb317-499" aria-hidden="true" tabindex="-1"></a><span class="in">subset(x, x1 = 1)</span></span>
<span id="cb317-500"><a href="#cb317-500" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-501"><a href="#cb317-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-502"><a href="#cb317-502" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, error=TRUE}</span></span>
<span id="cb317-503"><a href="#cb317-503" aria-hidden="true" tabindex="-1"></a><span class="in"># Référence à des noms de colonne non usuels</span></span>
<span id="cb317-504"><a href="#cb317-504" aria-hidden="true" tabindex="-1"></a><span class="in">df &lt;- data.frame(x = rnorm(5), y = runif(5))</span></span>
<span id="cb317-505"><a href="#cb317-505" aria-hidden="true" tabindex="-1"></a><span class="in">names(df) &lt;- 1:2</span></span>
<span id="cb317-506"><a href="#cb317-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-507"><a href="#cb317-507" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb317-508"><a href="#cb317-508" aria-hidden="true" tabindex="-1"></a><span class="in">df$`1`</span></span>
<span id="cb317-509"><a href="#cb317-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-510"><a href="#cb317-510" aria-hidden="true" tabindex="-1"></a><span class="in"># Incorrect</span></span>
<span id="cb317-511"><a href="#cb317-511" aria-hidden="true" tabindex="-1"></a><span class="in">df$1</span></span>
<span id="cb317-512"><a href="#cb317-512" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-513"><a href="#cb317-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-514"><a href="#cb317-514" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-515"><a href="#cb317-515" aria-hidden="true" tabindex="-1"></a><span class="in"># Utilisation de assign pour assigner une valeur à un objet en le désignant sous forme caractère</span></span>
<span id="cb317-516"><a href="#cb317-516" aria-hidden="true" tabindex="-1"></a><span class="in">assign('objet', 3:5)</span></span>
<span id="cb317-517"><a href="#cb317-517" aria-hidden="true" tabindex="-1"></a><span class="in">objet</span></span>
<span id="cb317-518"><a href="#cb317-518" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in 1:5) assign(paste('objet', i, sep = '_'), i)</span></span>
<span id="cb317-519"><a href="#cb317-519" aria-hidden="true" tabindex="-1"></a><span class="in">objet_5</span></span>
<span id="cb317-520"><a href="#cb317-520" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-521"><a href="#cb317-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-522"><a href="#cb317-522" aria-hidden="true" tabindex="-1"></a><span class="fu"># Les listes</span></span>
<span id="cb317-523"><a href="#cb317-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-524"><a href="#cb317-524" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-525"><a href="#cb317-525" aria-hidden="true" tabindex="-1"></a><span class="in"># Créer une liste</span></span>
<span id="cb317-526"><a href="#cb317-526" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list()</span></span>
<span id="cb317-527"><a href="#cb317-527" aria-hidden="true" tabindex="-1"></a><span class="in">liste</span></span>
<span id="cb317-528"><a href="#cb317-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-529"><a href="#cb317-529" aria-hidden="true" tabindex="-1"></a><span class="in"># Pré-allouer une liste de 5 éléments</span></span>
<span id="cb317-530"><a href="#cb317-530" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- vector(mode = "list", 5)</span></span>
<span id="cb317-531"><a href="#cb317-531" aria-hidden="true" tabindex="-1"></a><span class="in">liste</span></span>
<span id="cb317-532"><a href="#cb317-532" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-533"><a href="#cb317-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-534"><a href="#cb317-534" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-535"><a href="#cb317-535" aria-hidden="true" tabindex="-1"></a><span class="in"># Ajouter un élément à une liste</span></span>
<span id="cb317-536"><a href="#cb317-536" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list(1, 2)</span></span>
<span id="cb317-537"><a href="#cb317-537" aria-hidden="true" tabindex="-1"></a><span class="in"># Il faut passer par cette syntaxe</span></span>
<span id="cb317-538"><a href="#cb317-538" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- c(liste, list(3))</span></span>
<span id="cb317-539"><a href="#cb317-539" aria-hidden="true" tabindex="-1"></a><span class="in">liste</span></span>
<span id="cb317-540"><a href="#cb317-540" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-541"><a href="#cb317-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-542"><a href="#cb317-542" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-543"><a href="#cb317-543" aria-hidden="true" tabindex="-1"></a><span class="in"># Trier une liste</span></span>
<span id="cb317-544"><a href="#cb317-544" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list("2" = 2, "0" = 0, "1" = 1)</span></span>
<span id="cb317-545"><a href="#cb317-545" aria-hidden="true" tabindex="-1"></a><span class="in">liste</span></span>
<span id="cb317-546"><a href="#cb317-546" aria-hidden="true" tabindex="-1"></a><span class="in">liste[order(names(liste))]</span></span>
<span id="cb317-547"><a href="#cb317-547" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-548"><a href="#cb317-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-549"><a href="#cb317-549" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-550"><a href="#cb317-550" aria-hidden="true" tabindex="-1"></a><span class="in"># Extraction de listes</span></span>
<span id="cb317-551"><a href="#cb317-551" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list(nombres = 1:5, lettres = letters[1:5])</span></span>
<span id="cb317-552"><a href="#cb317-552" aria-hidden="true" tabindex="-1"></a><span class="in">liste$nombres</span></span>
<span id="cb317-553"><a href="#cb317-553" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-554"><a href="#cb317-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-555"><a href="#cb317-555" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-556"><a href="#cb317-556" aria-hidden="true" tabindex="-1"></a><span class="in"># On veut faire appel à un élement de la liste à partir d'une variable extérieure</span></span>
<span id="cb317-557"><a href="#cb317-557" aria-hidden="true" tabindex="-1"></a><span class="in">var &lt;- "nombres"</span></span>
<span id="cb317-558"><a href="#cb317-558" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-559"><a href="#cb317-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-560"><a href="#cb317-560" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-561"><a href="#cb317-561" aria-hidden="true" tabindex="-1"></a><span class="in"># Ne marche pas, car nombres est en caractère</span></span>
<span id="cb317-562"><a href="#cb317-562" aria-hidden="true" tabindex="-1"></a><span class="in">liste$var</span></span>
<span id="cb317-563"><a href="#cb317-563" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-564"><a href="#cb317-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-565"><a href="#cb317-565" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-566"><a href="#cb317-566" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonctionne</span></span>
<span id="cb317-567"><a href="#cb317-567" aria-hidden="true" tabindex="-1"></a><span class="in">liste[[var]]</span></span>
<span id="cb317-568"><a href="#cb317-568" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-569"><a href="#cb317-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-570"><a href="#cb317-570" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-571"><a href="#cb317-571" aria-hidden="true" tabindex="-1"></a><span class="in"># Sélection dans une liste</span></span>
<span id="cb317-572"><a href="#cb317-572" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list(nombres = 1:5, lettres = letters[1:5])</span></span>
<span id="cb317-573"><a href="#cb317-573" aria-hidden="true" tabindex="-1"></a><span class="in">liste["nombres"]</span></span>
<span id="cb317-574"><a href="#cb317-574" aria-hidden="true" tabindex="-1"></a><span class="in">is.list(liste["nombres"])</span></span>
<span id="cb317-575"><a href="#cb317-575" aria-hidden="true" tabindex="-1"></a><span class="in">liste[["nombres"]]</span></span>
<span id="cb317-576"><a href="#cb317-576" aria-hidden="true" tabindex="-1"></a><span class="in">is.list(liste[["nombres"]])</span></span>
<span id="cb317-577"><a href="#cb317-577" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-578"><a href="#cb317-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-579"><a href="#cb317-579" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-580"><a href="#cb317-580" aria-hidden="true" tabindex="-1"></a><span class="in"># Suppression des éléments d'une liste</span></span>
<span id="cb317-581"><a href="#cb317-581" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list(nombres = 1:5, lettres = letters[1:5])</span></span>
<span id="cb317-582"><a href="#cb317-582" aria-hidden="true" tabindex="-1"></a><span class="in">liste[-1]</span></span>
<span id="cb317-583"><a href="#cb317-583" aria-hidden="true" tabindex="-1"></a><span class="in">liste["nombres"] &lt;- NULL</span></span>
<span id="cb317-584"><a href="#cb317-584" aria-hidden="true" tabindex="-1"></a><span class="in">liste</span></span>
<span id="cb317-585"><a href="#cb317-585" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-586"><a href="#cb317-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-587"><a href="#cb317-587" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-588"><a href="#cb317-588" aria-hidden="true" tabindex="-1"></a><span class="in"># Dernier élément de chaque composante d'une liste</span></span>
<span id="cb317-589"><a href="#cb317-589" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list(1:26, letters)</span></span>
<span id="cb317-590"><a href="#cb317-590" aria-hidden="true" tabindex="-1"></a><span class="in">lapply(liste, tail, 1)</span></span>
<span id="cb317-591"><a href="#cb317-591" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-592"><a href="#cb317-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-593"><a href="#cb317-593" aria-hidden="true" tabindex="-1"></a><span class="fu"># Différences entre sort(), order(), rank()</span></span>
<span id="cb317-594"><a href="#cb317-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-595"><a href="#cb317-595" aria-hidden="true" tabindex="-1"></a>sort() trie un vecteur par ordre croissant. rank() donne le rang de chaque élément du vecteur, le plus petit élément se voyant attribué le rang 1. order() renvoie l'indice du vecteur trié par ordre croissant.</span>
<span id="cb317-596"><a href="#cb317-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-597"><a href="#cb317-597" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-598"><a href="#cb317-598" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur &lt;- c(5,3,1,2,4)</span></span>
<span id="cb317-599"><a href="#cb317-599" aria-hidden="true" tabindex="-1"></a><span class="in">sort(vecteur)</span></span>
<span id="cb317-600"><a href="#cb317-600" aria-hidden="true" tabindex="-1"></a><span class="in">order(vecteur)</span></span>
<span id="cb317-601"><a href="#cb317-601" aria-hidden="true" tabindex="-1"></a><span class="in">rank(vecteur)</span></span>
<span id="cb317-602"><a href="#cb317-602" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-603"><a href="#cb317-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-604"><a href="#cb317-604" aria-hidden="true" tabindex="-1"></a>Une autre solution que sort() pour trier un vecteur est :</span>
<span id="cb317-605"><a href="#cb317-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-606"><a href="#cb317-606" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-607"><a href="#cb317-607" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur &lt;- c(5,3,1,2,4)</span></span>
<span id="cb317-608"><a href="#cb317-608" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur[order(vecteur)]</span></span>
<span id="cb317-609"><a href="#cb317-609" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-610"><a href="#cb317-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-611"><a href="#cb317-611" aria-hidden="true" tabindex="-1"></a>À noter aussi que sort() permet aussi d'exécuter simultanément les fonctions sort() et order(). Ainsi :</span>
<span id="cb317-612"><a href="#cb317-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-613"><a href="#cb317-613" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-614"><a href="#cb317-614" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur &lt;- c(5,3,1,2,4)</span></span>
<span id="cb317-615"><a href="#cb317-615" aria-hidden="true" tabindex="-1"></a><span class="in">sort(vecteur, index.return = TRUE)</span></span>
<span id="cb317-616"><a href="#cb317-616" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonction sort()</span></span>
<span id="cb317-617"><a href="#cb317-617" aria-hidden="true" tabindex="-1"></a><span class="in">sort(vecteur, index.return = TRUE)$x</span></span>
<span id="cb317-618"><a href="#cb317-618" aria-hidden="true" tabindex="-1"></a><span class="in">sort(vecteur)</span></span>
<span id="cb317-619"><a href="#cb317-619" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonction order()</span></span>
<span id="cb317-620"><a href="#cb317-620" aria-hidden="true" tabindex="-1"></a><span class="in">sort(vecteur, index.return = TRUE)$ix</span></span>
<span id="cb317-621"><a href="#cb317-621" aria-hidden="true" tabindex="-1"></a><span class="in">order(vecteur)</span></span>
<span id="cb317-622"><a href="#cb317-622" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-623"><a href="#cb317-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-624"><a href="#cb317-624" aria-hidden="true" tabindex="-1"></a><span class="fu"># Ramasse-miettes (Garbage Collector)</span></span>
<span id="cb317-625"><a href="#cb317-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-626"><a href="#cb317-626" aria-hidden="true" tabindex="-1"></a>Si la mémoire vive de l'ordinateur est saturée, on peut essayer de la "purger" en utilisant la fonction gc() de <span class="in">`R`</span>.</span>
<span id="cb317-627"><a href="#cb317-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-628"><a href="#cb317-628" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-629"><a href="#cb317-629" aria-hidden="true" tabindex="-1"></a><span class="in">gc()</span></span>
<span id="cb317-630"><a href="#cb317-630" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-631"><a href="#cb317-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-632"><a href="#cb317-632" aria-hidden="true" tabindex="-1"></a><span class="fu"># Fonctions try() et tryCatch() À FAIRE</span></span>
<span id="cb317-633"><a href="#cb317-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-634"><a href="#cb317-634" aria-hidden="true" tabindex="-1"></a><span class="fu"># Informations sur R</span></span>
<span id="cb317-635"><a href="#cb317-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-636"><a href="#cb317-636" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, results='hide'}</span></span>
<span id="cb317-637"><a href="#cb317-637" aria-hidden="true" tabindex="-1"></a><span class="in"># Informations sur la session de R</span></span>
<span id="cb317-638"><a href="#cb317-638" aria-hidden="true" tabindex="-1"></a><span class="in">sessionInfo()</span></span>
<span id="cb317-639"><a href="#cb317-639" aria-hidden="true" tabindex="-1"></a><span class="in">Sys.info()</span></span>
<span id="cb317-640"><a href="#cb317-640" aria-hidden="true" tabindex="-1"></a><span class="in">.Platform</span></span>
<span id="cb317-641"><a href="#cb317-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-642"><a href="#cb317-642" aria-hidden="true" tabindex="-1"></a><span class="in"># Version de R</span></span>
<span id="cb317-643"><a href="#cb317-643" aria-hidden="true" tabindex="-1"></a><span class="in">R.version.string</span></span>
<span id="cb317-644"><a href="#cb317-644" aria-hidden="true" tabindex="-1"></a><span class="in">getRversion()</span></span>
<span id="cb317-645"><a href="#cb317-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-646"><a href="#cb317-646" aria-hidden="true" tabindex="-1"></a><span class="in"># Lien vers le bureau de l'utilisateur</span></span>
<span id="cb317-647"><a href="#cb317-647" aria-hidden="true" tabindex="-1"></a><span class="in">file.path(path.expand('~'), "Desktop")</span></span>
<span id="cb317-648"><a href="#cb317-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-649"><a href="#cb317-649" aria-hidden="true" tabindex="-1"></a><span class="in"># Chemin de l'exécutable R est-il installé ?</span></span>
<span id="cb317-650"><a href="#cb317-650" aria-hidden="true" tabindex="-1"></a><span class="in">R.home("bin")</span></span>
<span id="cb317-651"><a href="#cb317-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-652"><a href="#cb317-652" aria-hidden="true" tabindex="-1"></a><span class="in"># Où sont installés les packages R</span></span>
<span id="cb317-653"><a href="#cb317-653" aria-hidden="true" tabindex="-1"></a><span class="in">.libPaths()</span></span>
<span id="cb317-654"><a href="#cb317-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-655"><a href="#cb317-655" aria-hidden="true" tabindex="-1"></a><span class="in"># Version d'un package installé (ici openxlsx)</span></span>
<span id="cb317-656"><a href="#cb317-656" aria-hidden="true" tabindex="-1"></a><span class="in"># packageVersion("openxlsx")</span></span>
<span id="cb317-657"><a href="#cb317-657" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-658"><a href="#cb317-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-659"><a href="#cb317-659" aria-hidden="true" tabindex="-1"></a><span class="fu"># Le comportement de l'opérateur c()</span></span>
<span id="cb317-660"><a href="#cb317-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-661"><a href="#cb317-661" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-662"><a href="#cb317-662" aria-hidden="true" tabindex="-1"></a><span class="in"># c() est instable : c(x, y) n'est pas forcément du même type que c(y, x)</span></span>
<span id="cb317-663"><a href="#cb317-663" aria-hidden="true" tabindex="-1"></a><span class="in"># format double</span></span>
<span id="cb317-664"><a href="#cb317-664" aria-hidden="true" tabindex="-1"></a><span class="in">c(NA, Sys.Date())</span></span>
<span id="cb317-665"><a href="#cb317-665" aria-hidden="true" tabindex="-1"></a><span class="in"># format Date</span></span>
<span id="cb317-666"><a href="#cb317-666" aria-hidden="true" tabindex="-1"></a><span class="in">c(Sys.Date(), NA)</span></span>
<span id="cb317-667"><a href="#cb317-667" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-668"><a href="#cb317-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-669"><a href="#cb317-669" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-670"><a href="#cb317-670" aria-hidden="true" tabindex="-1"></a><span class="in"># Combiner des dates et date-times avec c() conduit à des résultats potentiellement incorrects</span></span>
<span id="cb317-671"><a href="#cb317-671" aria-hidden="true" tabindex="-1"></a><span class="in">date &lt;- as.Date("2025-01-01")</span></span>
<span id="cb317-672"><a href="#cb317-672" aria-hidden="true" tabindex="-1"></a><span class="in">datetime &lt;- as.POSIXct("2025-01-01 09:00")</span></span>
<span id="cb317-673"><a href="#cb317-673" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb317-674"><a href="#cb317-674" aria-hidden="true" tabindex="-1"></a><span class="in">c(date, datetime)</span></span>
<span id="cb317-675"><a href="#cb317-675" aria-hidden="true" tabindex="-1"></a><span class="in"># Incorrect</span></span>
<span id="cb317-676"><a href="#cb317-676" aria-hidden="true" tabindex="-1"></a><span class="in">c(datetime, date)</span></span>
<span id="cb317-677"><a href="#cb317-677" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-678"><a href="#cb317-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-679"><a href="#cb317-679" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-680"><a href="#cb317-680" aria-hidden="true" tabindex="-1"></a><span class="in"># Valeurs manquantes</span></span>
<span id="cb317-681"><a href="#cb317-681" aria-hidden="true" tabindex="-1"></a><span class="in"># Si le NA est placé avant, c() supprime tous les attributs</span></span>
<span id="cb317-682"><a href="#cb317-682" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple 1</span></span>
<span id="cb317-683"><a href="#cb317-683" aria-hidden="true" tabindex="-1"></a><span class="in">c(as.Date("2025-01-01"), NA)</span></span>
<span id="cb317-684"><a href="#cb317-684" aria-hidden="true" tabindex="-1"></a><span class="in">c(NA, as.Date("2025-01-01"))</span></span>
<span id="cb317-685"><a href="#cb317-685" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple 2</span></span>
<span id="cb317-686"><a href="#cb317-686" aria-hidden="true" tabindex="-1"></a><span class="in">c(NA, as.POSIXct("2025-01-01 09:00"))</span></span>
<span id="cb317-687"><a href="#cb317-687" aria-hidden="true" tabindex="-1"></a><span class="in">c(as.POSIXct("2025-01-01 09:00"), NA)</span></span>
<span id="cb317-688"><a href="#cb317-688" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-689"><a href="#cb317-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-690"><a href="#cb317-690" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-691"><a href="#cb317-691" aria-hidden="true" tabindex="-1"></a><span class="in"># c() convertit de character &gt; complex &gt; double &gt; integer &gt; logical</span></span>
<span id="cb317-692"><a href="#cb317-692" aria-hidden="true" tabindex="-1"></a><span class="in">c(FALSE, 1L, 2.5)</span></span>
<span id="cb317-693"><a href="#cb317-693" aria-hidden="true" tabindex="-1"></a><span class="in">c(FALSE, "x")</span></span>
<span id="cb317-694"><a href="#cb317-694" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-695"><a href="#cb317-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-696"><a href="#cb317-696" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-697"><a href="#cb317-697" aria-hidden="true" tabindex="-1"></a><span class="in"># Combiner 2 facteurs donne un integer</span></span>
<span id="cb317-698"><a href="#cb317-698" aria-hidden="true" tabindex="-1"></a><span class="in">c(factor("a"), factor("b"))</span></span>
<span id="cb317-699"><a href="#cb317-699" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-700"><a href="#cb317-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-701"><a href="#cb317-701" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-702"><a href="#cb317-702" aria-hidden="true" tabindex="-1"></a><span class="in"># Data frames</span></span>
<span id="cb317-703"><a href="#cb317-703" aria-hidden="true" tabindex="-1"></a><span class="in"># c() combines 2 data.frames dans une liste</span></span>
<span id="cb317-704"><a href="#cb317-704" aria-hidden="true" tabindex="-1"></a><span class="in">df1 &lt;- data.frame(x = 1)</span></span>
<span id="cb317-705"><a href="#cb317-705" aria-hidden="true" tabindex="-1"></a><span class="in">df2 &lt;- data.frame(x = 2)</span></span>
<span id="cb317-706"><a href="#cb317-706" aria-hidden="true" tabindex="-1"></a><span class="in">str(c(df1, df1))</span></span>
<span id="cb317-707"><a href="#cb317-707" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-708"><a href="#cb317-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-709"><a href="#cb317-709" aria-hidden="true" tabindex="-1"></a><span class="fu"># Trucs et astuces divers</span></span>
<span id="cb317-710"><a href="#cb317-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-711"><a href="#cb317-711" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-712"><a href="#cb317-712" aria-hidden="true" tabindex="-1"></a><span class="in"># Créer un objet sous forme de code R !</span></span>
<span id="cb317-713"><a href="#cb317-713" aria-hidden="true" tabindex="-1"></a><span class="in">data("mtcars")</span></span>
<span id="cb317-714"><a href="#cb317-714" aria-hidden="true" tabindex="-1"></a><span class="in">dput(mtcars)</span></span>
<span id="cb317-715"><a href="#cb317-715" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-716"><a href="#cb317-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-717"><a href="#cb317-717" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-718"><a href="#cb317-718" aria-hidden="true" tabindex="-1"></a><span class="in"># En tidyverse, la fonction tribble peut être utile pour créer des bases lignes par lignes</span></span>
<span id="cb317-719"><a href="#cb317-719" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb317-720"><a href="#cb317-720" aria-hidden="true" tabindex="-1"></a><span class="in">tribble(</span></span>
<span id="cb317-721"><a href="#cb317-721" aria-hidden="true" tabindex="-1"></a><span class="in">  ~x, ~y,</span></span>
<span id="cb317-722"><a href="#cb317-722" aria-hidden="true" tabindex="-1"></a><span class="in">  "a",   1,</span></span>
<span id="cb317-723"><a href="#cb317-723" aria-hidden="true" tabindex="-1"></a><span class="in">  "b",   2</span></span>
<span id="cb317-724"><a href="#cb317-724" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb317-725"><a href="#cb317-725" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-726"><a href="#cb317-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-727"><a href="#cb317-727" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-728"><a href="#cb317-728" aria-hidden="true" tabindex="-1"></a><span class="in"># Outils de debogage</span></span>
<span id="cb317-729"><a href="#cb317-729" aria-hidden="true" tabindex="-1"></a><span class="in">options(error = recover)</span></span>
<span id="cb317-730"><a href="#cb317-730" aria-hidden="true" tabindex="-1"></a><span class="in">options(error=NULL)</span></span>
<span id="cb317-731"><a href="#cb317-731" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-732"><a href="#cb317-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-733"><a href="#cb317-733" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-734"><a href="#cb317-734" aria-hidden="true" tabindex="-1"></a><span class="in"># Définir ses propres opérateurs</span></span>
<span id="cb317-735"><a href="#cb317-735" aria-hidden="true" tabindex="-1"></a><span class="in"># R reconnait le texte entre %% comme un opérateur binaire</span></span>
<span id="cb317-736"><a href="#cb317-736" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple, simplifier la fonction paste</span></span>
<span id="cb317-737"><a href="#cb317-737" aria-hidden="true" tabindex="-1"></a><span class="in">'%+%' &lt;- function(x, y) { paste(x, y, sep = "") }</span></span>
<span id="cb317-738"><a href="#cb317-738" aria-hidden="true" tabindex="-1"></a><span class="in">"Groupe_" %+% 0:9</span></span>
<span id="cb317-739"><a href="#cb317-739" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-740"><a href="#cb317-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-741"><a href="#cb317-741" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-742"><a href="#cb317-742" aria-hidden="true" tabindex="-1"></a><span class="in"># Récupérer les éléments à la diagonale d'un dataframe</span></span>
<span id="cb317-743"><a href="#cb317-743" aria-hidden="true" tabindex="-1"></a><span class="in">diag(as.matrix(mtcars))</span></span>
<span id="cb317-744"><a href="#cb317-744" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-745"><a href="#cb317-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-746"><a href="#cb317-746" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-747"><a href="#cb317-747" aria-hidden="true" tabindex="-1"></a><span class="in"># S'assurer qu'un objet R existe déjà</span></span>
<span id="cb317-748"><a href="#cb317-748" aria-hidden="true" tabindex="-1"></a><span class="in">exists("mtcars")</span></span>
<span id="cb317-749"><a href="#cb317-749" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-750"><a href="#cb317-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-751"><a href="#cb317-751" aria-hidden="true" tabindex="-1"></a><span class="fu"># Le pipe sur R</span></span>
<span id="cb317-752"><a href="#cb317-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-753"><a href="#cb317-753" aria-hidden="true" tabindex="-1"></a>Cet opérateur permet d'enchaîner les opérations et d'avoir un code plus lisible.</span>
<span id="cb317-754"><a href="#cb317-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-755"><a href="#cb317-755" aria-hidden="true" tabindex="-1"></a>Il existe différents types :</span>
<span id="cb317-756"><a href="#cb317-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-757"><a href="#cb317-757" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Le pipe de Rbase :** <span class="in">`|&gt;`</span></span>
<span id="cb317-758"><a href="#cb317-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-759"><a href="#cb317-759" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Le pipe du tidyverse :** <span class="in">`%&gt;%`</span></span>
<span id="cb317-760"><a href="#cb317-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-761"><a href="#cb317-761" aria-hidden="true" tabindex="-1"></a>Les deux pipes fonctionnent de la même manière mais diffèrent sur les points suivants :</span>
<span id="cb317-762"><a href="#cb317-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-763"><a href="#cb317-763" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb317-764"><a href="#cb317-764" aria-hidden="true" tabindex="-1"></a>| Thème                                         | <span class="in">`|&gt;`</span>                      | <span class="in">`%&gt;%`</span>                                                                 |</span>
<span id="cb317-765"><a href="#cb317-765" aria-hidden="true" tabindex="-1"></a>+===============================================+===========================+=======================================================================+</span>
<span id="cb317-766"><a href="#cb317-766" aria-hidden="true" tabindex="-1"></a>| Placeholder (pour indiquer où placer l'objet) | <span class="in">`_`</span>                       | <span class="in">`.`</span>                                                                   |</span>
<span id="cb317-767"><a href="#cb317-767" aria-hidden="true" tabindex="-1"></a>|                                               |                           |                                                                       |</span>
<span id="cb317-768"><a href="#cb317-768" aria-hidden="true" tabindex="-1"></a>|                                               | <span class="in">`x |&gt; f(y, a = _)`</span>        | <span class="in">`x %&gt;% f(y, a = .)`</span>                                                   |</span>
<span id="cb317-769"><a href="#cb317-769" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb317-770"><a href="#cb317-770" aria-hidden="true" tabindex="-1"></a>| Package                                       | Aucun : directement sur R | Magrittr (pipe disponible lorsqu'on effectue <span class="in">`library(tidyverse)`</span>) \| |</span>
<span id="cb317-771"><a href="#cb317-771" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb317-772"><a href="#cb317-772" aria-hidden="true" tabindex="-1"></a>| Fonction                                      | Impossible                | Possible                                                              |</span>
<span id="cb317-773"><a href="#cb317-773" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb317-774"><a href="#cb317-774" aria-hidden="true" tabindex="-1"></a>| Temps de calcul                               | Rapide                    | Plus lent                                                             |</span>
<span id="cb317-775"><a href="#cb317-775" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb317-776"><a href="#cb317-776" aria-hidden="true" tabindex="-1"></a>| Opérateurs                                    | <span class="in">`|&gt;`</span>                      | <span class="in">`%&gt;%`</span> <span class="in">`%&lt;&gt;%`</span> <span class="in">`%$%`</span> <span class="in">`%!&gt;%`</span> <span class="in">`%T&gt;%`</span>                                      |</span>
<span id="cb317-777"><a href="#cb317-777" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb317-778"><a href="#cb317-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-779"><a href="#cb317-779" aria-hidden="true" tabindex="-1"></a>*Source* :</span>
<span id="cb317-780"><a href="#cb317-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-781"><a href="#cb317-781" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="ot">&lt;https://larmarange.github.io/guide-R/manipulation/pipe.html#le-pipe-natif-de-r&gt;</span></span>
<span id="cb317-782"><a href="#cb317-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-783"><a href="#cb317-783" aria-hidden="true" tabindex="-1"></a><span class="fu"># Fonction pour copier des données R dans le presse-papier et les coller (par exemple dans Excel)</span></span>
<span id="cb317-784"><a href="#cb317-784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-785"><a href="#cb317-785" aria-hidden="true" tabindex="-1"></a>Pour coller des données de R dans Excel, on peut :</span>
<span id="cb317-786"><a href="#cb317-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-787"><a href="#cb317-787" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>faire passer la fonction <span class="in">`R`</span> CopierColler() ci-dessous sur les données <span class="in">`R`</span> que l'on souhaite copier dans Excel ;</span>
<span id="cb317-788"><a href="#cb317-788" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>puis coller le presse-papier directement dans Excel.</span>
<span id="cb317-789"><a href="#cb317-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-790"><a href="#cb317-790" aria-hidden="true" tabindex="-1"></a>La fonction peut être assez pratique.</span>
<span id="cb317-791"><a href="#cb317-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-792"><a href="#cb317-792" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-793"><a href="#cb317-793" aria-hidden="true" tabindex="-1"></a><span class="in"># Copier des données dans le presse-papier</span></span>
<span id="cb317-794"><a href="#cb317-794" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- mtcars</span></span>
<span id="cb317-795"><a href="#cb317-795" aria-hidden="true" tabindex="-1"></a><span class="in">CopierColler &lt;- function(x, row.names = FALSE, col.names = TRUE, dec = ",", na = "", sep = "\t", quote = FALSE, ...) {</span></span>
<span id="cb317-796"><a href="#cb317-796" aria-hidden="true" tabindex="-1"></a><span class="in">  write.table(x, "clipboard", sep = sep, row.names = row.names, col.names = col.names, dec = dec, na = na, quote = quote, ...)</span></span>
<span id="cb317-797"><a href="#cb317-797" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb317-798"><a href="#cb317-798" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonctionne sous système Windows, pas Linux</span></span>
<span id="cb317-799"><a href="#cb317-799" aria-hidden="true" tabindex="-1"></a><span class="in">#CopierColler(x)</span></span>
<span id="cb317-800"><a href="#cb317-800" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-801"><a href="#cb317-801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-802"><a href="#cb317-802" aria-hidden="true" tabindex="-1"></a><span class="fu"># Conseils divers</span></span>
<span id="cb317-803"><a href="#cb317-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-804"><a href="#cb317-804" aria-hidden="true" tabindex="-1"></a>Il est déconseillé de nommer des variables temporaires <span class="in">`var`</span>, car ce nom désigne la fonction <span class="in">`R`</span> permettant de calculer une variance.</span>
<span id="cb317-805"><a href="#cb317-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-806"><a href="#cb317-806" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-807"><a href="#cb317-807" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple : variance d'un échantillon aléatoire de 1000 observations tiré d'une loi normale centrée réduite</span></span>
<span id="cb317-808"><a href="#cb317-808" aria-hidden="true" tabindex="-1"></a><span class="in">var(rnorm(1000))</span></span>
<span id="cb317-809"><a href="#cb317-809" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-810"><a href="#cb317-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-811"><a href="#cb317-811" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-812"><a href="#cb317-812" aria-hidden="true" tabindex="-1"></a><span class="in"># Le format en résultat de sapply est imprévisible</span></span>
<span id="cb317-813"><a href="#cb317-813" aria-hidden="true" tabindex="-1"></a><span class="in"># integer</span></span>
<span id="cb317-814"><a href="#cb317-814" aria-hidden="true" tabindex="-1"></a><span class="in">sapply(1L, function(x) c(x, x))</span></span>
<span id="cb317-815"><a href="#cb317-815" aria-hidden="true" tabindex="-1"></a><span class="in"># list</span></span>
<span id="cb317-816"><a href="#cb317-816" aria-hidden="true" tabindex="-1"></a><span class="in">sapply(integer(), function(x) c(x, x))</span></span>
<span id="cb317-817"><a href="#cb317-817" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb317-818"><a href="#cb317-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb317-819"><a href="#cb317-819" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb317-820"><a href="#cb317-820" aria-hidden="true" tabindex="-1"></a><span class="in"># Le résultat de ifelse() dépend du format de la condition</span></span>
<span id="cb317-821"><a href="#cb317-821" aria-hidden="true" tabindex="-1"></a><span class="in"># logical</span></span>
<span id="cb317-822"><a href="#cb317-822" aria-hidden="true" tabindex="-1"></a><span class="in">ifelse(NA, 1L, 1L)</span></span>
<span id="cb317-823"><a href="#cb317-823" aria-hidden="true" tabindex="-1"></a><span class="in"># integer</span></span>
<span id="cb317-824"><a href="#cb317-824" aria-hidden="true" tabindex="-1"></a><span class="in">ifelse(FALSE, 1L, 1L)</span></span>
<span id="cb317-825"><a href="#cb317-825" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copier vers le presse-papier" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Ce site a été créé avec <a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>