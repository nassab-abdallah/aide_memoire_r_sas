<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nassab ABDALLAH">
<meta name="author" content="Damien EUZENAT">
<meta name="description" content="Trucs et astuces en R.">

<title>Trucs et astuces en R – Aide-mémoire SAS - R - pandas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-f7b04f6ffe41e7141457b7c02a5e8ee3.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-1c0e6e8b5a1adf3305129ee279cf25e4.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Pas de résultats",
    "search-matching-documents-text": "documents trouvés",
    "search-copy-link-title": "Copier le lien vers la recherche",
    "search-hide-matches-text": "Cacher les correspondances additionnelles",
    "search-more-match-text": "correspondance de plus dans ce document",
    "search-more-matches-text": "correspondances de plus dans ce document",
    "search-clear-button-title": "Effacer",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Annuler",
    "search-submit-button-title": "Envoyer",
    "search-label": "Recherche"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Trucs et astuces en R.html">Trucs et astuces</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Basculer la barre latérale" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Recherche" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Aide-mémoire SAS - R - pandas</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Basculer le mode sombre"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Recherche"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accueil</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-aide_memoire_r_sas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Aide-mémoire</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-mise_en_garde.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mise en garde</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Trucs et astuces en R.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Trucs et astuces</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-specificites_sas_r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spécificités de SAS et R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-avantages_inconvenients_env_R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Avantages et inconvénients des environnements R</span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="1">
    <h2 id="toc-title">Sur cette page</h2>
   
  <ul class="collapse">
  <li><a href="#le-fonctionnement-du-langage-r" id="toc-le-fonctionnement-du-langage-r" class="nav-link active" data-scroll-target="#le-fonctionnement-du-langage-r"><span class="header-section-number">1</span> Le fonctionnement du langage <code>R</code></a>
  <ul class="collapse">
  <li><a href="#les-types-dobjet" id="toc-les-types-dobjet" class="nav-link" data-scroll-target="#les-types-dobjet"><span class="header-section-number">1.1</span> Les types d’objet</a></li>
  <li><a href="#les-affectations" id="toc-les-affectations" class="nav-link" data-scroll-target="#les-affectations"><span class="header-section-number">1.2</span> Les affectations</a></li>
  <li><a href="#les-comparaisons" id="toc-les-comparaisons" class="nav-link" data-scroll-target="#les-comparaisons"><span class="header-section-number">1.3</span> Les comparaisons</a></li>
  <li><a href="#opérateurs-de-contrôle" id="toc-opérateurs-de-contrôle" class="nav-link" data-scroll-target="#opérateurs-de-contrôle"><span class="header-section-number">1.4</span> Opérateurs de contrôle</a></li>
  <li><a href="#les-valeurs-manquantes" id="toc-les-valeurs-manquantes" class="nav-link" data-scroll-target="#les-valeurs-manquantes"><span class="header-section-number">1.5</span> Les valeurs manquantes</a></li>
  <li><a href="#sélection-déléments" id="toc-sélection-déléments" class="nav-link" data-scroll-target="#sélection-déléments"><span class="header-section-number">1.6</span> Sélection d’éléments</a></li>
  </ul></li>
  <li><a href="#les-grandes-caractéristiques-du-langage-r" id="toc-les-grandes-caractéristiques-du-langage-r" class="nav-link" data-scroll-target="#les-grandes-caractéristiques-du-langage-r"><span class="header-section-number">2</span> Les grandes caractéristiques du langage <code>R</code></a>
  <ul class="collapse">
  <li><a href="#principe-de-vectorisation" id="toc-principe-de-vectorisation" class="nav-link" data-scroll-target="#principe-de-vectorisation"><span class="header-section-number">2.1</span> Principe de vectorisation</a></li>
  <li><a href="#principe-de-coercion" id="toc-principe-de-coercion" class="nav-link" data-scroll-target="#principe-de-coercion"><span class="header-section-number">2.2</span> Principe de coercion</a></li>
  <li><a href="#principe-de-recycling" id="toc-principe-de-recycling" class="nav-link" data-scroll-target="#principe-de-recycling"><span class="header-section-number">2.3</span> Principe de recycling</a></li>
  </ul></li>
  <li><a href="#le-saviez-vous" id="toc-le-saviez-vous" class="nav-link" data-scroll-target="#le-saviez-vous"><span class="header-section-number">3</span> Le saviez-vous ?</a>
  <ul class="collapse">
  <li><a href="#effets-des-calculs-en-virgule-flottante" id="toc-effets-des-calculs-en-virgule-flottante" class="nav-link" data-scroll-target="#effets-des-calculs-en-virgule-flottante"><span class="header-section-number">3.1</span> Effets des calculs en virgule flottante</a></li>
  <li><a href="#obtenir-de-linformations-sur-r" id="toc-obtenir-de-linformations-sur-r" class="nav-link" data-scroll-target="#obtenir-de-linformations-sur-r"><span class="header-section-number">3.2</span> Obtenir de l’informations sur <code>R</code></a></li>
  <li><a href="#le-pipe-sur-r" id="toc-le-pipe-sur-r" class="nav-link" data-scroll-target="#le-pipe-sur-r"><span class="header-section-number">3.3</span> Le pipe sur R</a></li>
  <li><a href="#conseils-divers" id="toc-conseils-divers" class="nav-link" data-scroll-target="#conseils-divers"><span class="header-section-number">3.4</span> Conseils divers</a></li>
  <li><a href="#list-comprehensions-en-r" id="toc-list-comprehensions-en-r" class="nav-link" data-scroll-target="#list-comprehensions-en-r"><span class="header-section-number">3.5</span> List-comprehensions en <code>R</code></a></li>
  </ul></li>
  <li><a href="#fonctions-utiles" id="toc-fonctions-utiles" class="nav-link" data-scroll-target="#fonctions-utiles"><span class="header-section-number">4</span> Fonctions utiles</a>
  <ul class="collapse">
  <li><a href="#ramasse-miettes-garbage-collector" id="toc-ramasse-miettes-garbage-collector" class="nav-link" data-scroll-target="#ramasse-miettes-garbage-collector"><span class="header-section-number">4.1</span> Ramasse-miettes (Garbage Collector)</a></li>
  <li><a href="#la-fonction-subset" id="toc-la-fonction-subset" class="nav-link" data-scroll-target="#la-fonction-subset"><span class="header-section-number">4.2</span> La fonction <code>subset()</code></a></li>
  <li><a href="#les-fonctions-try-et-trycatch" id="toc-les-fonctions-try-et-trycatch" class="nav-link" data-scroll-target="#les-fonctions-try-et-trycatch"><span class="header-section-number">4.3</span> Les fonctions <code>try()</code> et <code>tryCatch()</code></a></li>
  <li><a href="#les-fonctions-sort-order-et-rank" id="toc-les-fonctions-sort-order-et-rank" class="nav-link" data-scroll-target="#les-fonctions-sort-order-et-rank"><span class="header-section-number">4.4</span> Les fonctions <code>sort()</code>, <code>order()</code> et <code>rank()</code></a></li>
  <li><a href="#les-fonctions-seq-seq_len-et-seq_along" id="toc-les-fonctions-seq-seq_len-et-seq_along" class="nav-link" data-scroll-target="#les-fonctions-seq-seq_len-et-seq_along"><span class="header-section-number">4.5</span> Les fonctions <code>:</code>, <code>seq()</code>, <code>seq_len()</code> et <code>seq_along()</code></a></li>
  <li><a href="#fonction-pour-copier-des-données-r-dans-le-presse-papier-et-les-coller-par-exemple-dans-excel" id="toc-fonction-pour-copier-des-données-r-dans-le-presse-papier-et-les-coller-par-exemple-dans-excel" class="nav-link" data-scroll-target="#fonction-pour-copier-des-données-r-dans-le-presse-papier-et-les-coller-par-exemple-dans-excel"><span class="header-section-number">4.6</span> Fonction pour copier des données R dans le presse-papier et les coller (par exemple dans Excel)</a></li>
  <li><a href="#fonctions-diverses" id="toc-fonctions-diverses" class="nav-link" data-scroll-target="#fonctions-diverses"><span class="header-section-number">4.7</span> Fonctions diverses</a></li>
  <li><a href="#quelques-fonctions-mathématiques" id="toc-quelques-fonctions-mathématiques" class="nav-link" data-scroll-target="#quelques-fonctions-mathématiques"><span class="header-section-number">4.8</span> Quelques fonctions mathématiques</a></li>
  <li><a href="#ajouter-des-guillemets-dans-une-chaîne-de-caractères" id="toc-ajouter-des-guillemets-dans-une-chaîne-de-caractères" class="nav-link" data-scroll-target="#ajouter-des-guillemets-dans-une-chaîne-de-caractères"><span class="header-section-number">4.9</span> Ajouter des guillemets dans une chaîne de caractères</a></li>
  </ul></li>
  <li><a href="#importer-rapidement-un-fichier-r-dans-sas" id="toc-importer-rapidement-un-fichier-r-dans-sas" class="nav-link" data-scroll-target="#importer-rapidement-un-fichier-r-dans-sas"><span class="header-section-number">5</span> Importer rapidement un fichier <code>R</code> dans <code>SAS</code></a>
  <ul class="collapse">
  <li><a href="#copie-de-la-base-r-en-format-xpt" id="toc-copie-de-la-base-r-en-format-xpt" class="nav-link" data-scroll-target="#copie-de-la-base-r-en-format-xpt"><span class="header-section-number">5.1</span> Copie de la base <code>R</code> en format <code>xpt</code></a></li>
  <li><a href="#import-de-la-base-xpt-en-sas" id="toc-import-de-la-base-xpt-en-sas" class="nav-link" data-scroll-target="#import-de-la-base-xpt-en-sas"><span class="header-section-number">5.2</span> Import de la base <code>xpt</code> en <code>SAS</code></a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Trucs et astuces en <code>R</code></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
  </div>
  </div>

<div>
  <div class="description">
    <p>Trucs et astuces en <code>R</code>.</p>
  </div>
</div>

<div class="quarto-title-meta-author column-page-right">
  <div class="quarto-title-meta-heading">Auteur·rice·s</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Nassab ABDALLAH </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Dares/SCS, <a href="mailto:nassab.abdallah@travail.gouv.fr" class="email">nassab.abdallah@travail.gouv.fr</a>
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Damien EUZENAT </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Dares/DIP, <a href="mailto:damien.euzenat@travail.gouv.fr" class="email">damien.euzenat@travail.gouv.fr</a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta column-page-right">

      
    <div>
    <div class="quarto-title-meta-heading">Date de publication</div>
    <div class="quarto-title-meta-contents">
      <p class="date">29 janvier 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="justify">
<p>Voici quelques trucs et astuces utiles à connaître sur R, issus en partie des livres <a href="https://www.burns-stat.com/pages/Tutor/R_inferno.pdf">The R Inferno</a> et <a href="https://adv-r.hadley.nz/">Advanced R</a>, à consulter pour plus de détails.</p>
</div>
<section id="le-fonctionnement-du-langage-r" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Le fonctionnement du langage <code>R</code></h1>
<section id="les-types-dobjet" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="les-types-dobjet"><span class="header-section-number">1.1</span> Les types d’objet</h2>
<section id="généralités" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="généralités"><span class="header-section-number">1.1.1</span> Généralités</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># En savoir plus sur ses données</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"cars"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(cars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(cars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mode</span>(cars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "list"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(cars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   50 obs. of  2 variables:
 $ speed: num  4 4 7 7 8 9 10 10 10 11 ...
 $ dist : num  2 10 4 22 16 10 18 26 34 17 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(cars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 50  2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">is.data.frame</span>(cars), <span class="fu">is.list</span>(cars), <span class="fu">is.vector</span>(cars), <span class="fu">is.array</span>(cars))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<p>La notation L permet d’imposer à <code>R</code> de créer un nombre sous format <code>integer</code>d, moins gourmand en mémoire (pour des raisons d’efficacité).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">1</span>L)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
</section>
<section id="les-listes" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="les-listes"><span class="header-section-number">1.1.2</span> Les listes</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Créer une liste</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>liste</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>list()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pré-allouer une liste de 5 éléments</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="at">mode =</span> <span class="st">"list"</span>, <span class="dv">5</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>liste</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
NULL

[[5]]
NULL</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajouter un élément à une liste</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Il faut passer par cette syntaxe</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">c</span>(liste, <span class="fu">list</span>(<span class="dv">3</span>))</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>liste</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Trier une liste</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"2"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"0"</span> <span class="ot">=</span> <span class="dv">0</span>, <span class="st">"1"</span> <span class="ot">=</span> <span class="dv">1</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>liste</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$`2`
[1] 2

$`0`
[1] 0

$`1`
[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>liste[<span class="fu">order</span>(<span class="fu">names</span>(liste))]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$`0`
[1] 0

$`1`
[1] 1

$`2`
[1] 2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraction de listes</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">nombres =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">lettres =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>liste<span class="sc">$</span>nombres</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On veut faire appel à un élement de la liste à partir d'une variable extérieure</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>var <span class="ot">&lt;-</span> <span class="st">"nombres"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ne marche pas, car nombres est en caractère</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>liste<span class="sc">$</span>var</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonctionne</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>liste[[var]]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sélection dans une liste</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">nombres =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">lettres =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>liste[<span class="st">"nombres"</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$nombres
[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.list</span>(liste[<span class="st">"nombres"</span>])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>liste[[<span class="st">"nombres"</span>]]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.list</span>(liste[[<span class="st">"nombres"</span>]])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Suppression des éléments d'une liste</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">nombres =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">lettres =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>liste[<span class="sc">-</span><span class="dv">1</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$lettres
[1] "a" "b" "c" "d" "e"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>liste[<span class="st">"nombres"</span>] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>liste</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$lettres
[1] "a" "b" "c" "d" "e"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dernier élément de chaque composante d'une liste</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>liste <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">26</span>, letters)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(liste, tail, <span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 26

[[2]]
[1] "z"</code></pre>
</div>
</div>
</section>
</section>
<section id="les-affectations" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="les-affectations"><span class="header-section-number">1.2</span> Les affectations</h2>
<section id="généralités-1" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="généralités-1"><span class="header-section-number">1.2.1</span> Généralités</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importance des espaces</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="dv">3</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co"># S'agit-il de ?</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ou de ?</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">3</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Il s'agit du premier cas !</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Les {} permettent de réaliser une affectation (&lt;-) au sein d'un traitement plus complexe !</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple ici : sommer les positions paires multipliées par 2 et les positions impaires multipliées par 3</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>({x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span> ; x[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> x[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>] <span class="sc">*</span> <span class="dv">2</span> ; x[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">!=</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> x[<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x) <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">!=</span> <span class="dv">0</span>] <span class="sc">*</span> <span class="dv">3</span> ; x})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 51</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher ou non la valeur de l'objet affecté pendant l'affectation</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> pi</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>(x <span class="ot">&lt;-</span> pi)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.141593</code></pre>
</div>
</div>
</section>
<section id="le-comportement-de-lopérateur-c" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="le-comportement-de-lopérateur-c"><span class="header-section-number">1.2.2</span> Le comportement de l’opérateur <code>c()</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># c() est instable : c(x, y) n'est pas forcément du même type que c(y, x)</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co"># format double</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">NA</span>, <span class="fu">Sys.Date</span>())</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]    NA 20117</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># format Date</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">Sys.Date</span>(), <span class="cn">NA</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-01-29" NA          </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combiner des dates et date-times avec c() conduit à des résultats potentiellement incorrects</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2025-01-01"</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>datetime <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">"2025-01-01 09:00"</span>)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(date, datetime)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-01-01" "2025-01-01"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Incorrect</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(datetime, date)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-01-01 09:00:00 UTC" "2025-01-01 00:00:00 UTC"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Valeurs manquantes</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Si le NA est placé avant, c() supprime tous les attributs</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple 1</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">"2025-01-01"</span>), <span class="cn">NA</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-01-01" NA          </code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">NA</span>, <span class="fu">as.Date</span>(<span class="st">"2025-01-01"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]    NA 20089</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple 2</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">NA</span>, <span class="fu">as.POSIXct</span>(<span class="st">"2025-01-01 09:00"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]         NA 1735722000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">as.POSIXct</span>(<span class="st">"2025-01-01 09:00"</span>), <span class="cn">NA</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2025-01-01 09:00:00 UTC" NA                       </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># c() convertit de character &gt; complex &gt; double &gt; integer &gt; logical</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="dv">1</span>L, <span class="fl">2.5</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0 1.0 2.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="st">"x"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "FALSE" "x"    </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combiner 2 facteurs donne un integer</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">factor</span>(<span class="st">"a"</span>), <span class="fu">factor</span>(<span class="st">"b"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] a b
Levels: a b</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Data frames</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="co"># c() combines 2 data.frames dans une liste</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span>)</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">2</span>)</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">c</span>(df1, df1))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 2
 $ x: num 1
 $ x: num 1</code></pre>
</div>
</div>
</section>
</section>
<section id="les-comparaisons" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="les-comparaisons"><span class="header-section-number">1.3</span> Les comparaisons</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Comparaisons multiples</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fl">0.5</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="sc">&lt;</span> x <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">1</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Incorrect</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="sc">&lt;</span> x <span class="sc">&lt;</span> <span class="dv">1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:6:7: unexpected '&lt;'
5: # Incorrect
6: 0 &lt; x &lt;
         ^</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Opérations mathématiques</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Infini</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nan = not a number</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</section>
<section id="opérateurs-de-contrôle" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="opérateurs-de-contrôle"><span class="header-section-number">1.4</span> Opérateurs de contrôle</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Conditions if / else</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">identical</span>(x, <span class="dv">1</span>)) {</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"x est égal à 1"</span>)</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"x est différent de 1"</span>)</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x est égal à 1"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">identical</span>(x, <span class="dv">1</span>)) {<span class="fu">print</span>(<span class="st">"x est égal à 1"</span>)</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {<span class="fu">print</span>(<span class="st">"x est différent de 1"</span>)}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x est égal à 1"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">identical</span>(x, <span class="dv">1</span>)) <span class="fu">print</span>(<span class="st">"x est égal à 1"</span>) <span class="cf">else</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"x est différent de 1"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x est égal à 1"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">identical</span>(x, <span class="dv">1</span>)) <span class="fu">print</span>(<span class="st">"x est égal à 1"</span>) <span class="cf">else</span> <span class="fu">print</span>(<span class="st">"x est différent de 1"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x est égal à 1"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Incorrect</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">identical</span>(x, <span class="dv">1</span>)) <span class="fu">print</span>(<span class="st">"x est égal à 1"</span>)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span> <span class="fu">print</span>(<span class="st">"x est différent de 1"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:3:1: unexpected 'else'
2: if (identical(x, 1)) print("x est égal à 1")
3: else
   ^</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonctions et conditions if / else</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>condition <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">langue =</span> <span class="st">"Français"</span>) {</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (langue <span class="sc">==</span> <span class="st">"Français"</span>) {</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a><span class="st">"salut"</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (langue <span class="sc">==</span> <span class="st">"Anglais"</span>) {</span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="st">"hello"</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (langue <span class="sc">==</span> <span class="st">"Russe"</span>) {</span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a><span class="st">"привет"</span></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a><span class="fu">stop</span>(<span class="st">"salut"</span>)</span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb99-14"><a href="#cb99-14" aria-hidden="true" tabindex="-1"></a><span class="fu">condition</span>(<span class="st">"Anglais"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hello"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Autre possibilité avec switch, mais à réserver aux variables caractères !</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>condition <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">langue =</span> <span class="st">"Français"</span>) {</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span>(langue,</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>Français <span class="ot">=</span> <span class="st">"salut"</span>,</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="at">Anglais =</span> <span class="st">"hello"</span>,</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a><span class="at">Russe =</span> <span class="st">"привет"</span>,</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a><span class="fu">stop</span>(<span class="st">"salut"</span>)</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a><span class="fu">condition</span>(<span class="st">"Français"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "salut"</code></pre>
</div>
</div>
</section>
<section id="les-valeurs-manquantes" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="les-valeurs-manquantes"><span class="header-section-number">1.5</span> Les valeurs manquantes</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Transformer les valeurs manquantes en 0</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">X1 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">2</span>), <span class="at">X2 =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">3</span>))</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  X1 X2
1  1 NA
2 NA NA
3  2  3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">is.na</span>(x)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  X1 X2
1  1  0
2  0  0
3  2  3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pour les valeurs manquantes, toujours utiliser is.na et non ==</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="cn">NA</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA NA NA NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="cn">NA</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE  TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Utiliser %in% et non == pour vérifier une appartenance à plusieurs variables</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>x1 <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE FALSE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sélection de données en cas de valeurs manquantes</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>xna <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec ce code, les NA sont conservés</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>xna[xna <span class="sc">==</span> <span class="dv">2</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA  2  2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code sans les NA</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>xna[<span class="sc">!</span><span class="fu">is.na</span>(xna) <span class="sc">&amp;</span> xna <span class="sc">==</span> <span class="dv">2</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Code compact sans les NA</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>xna[<span class="fu">which</span>(xna <span class="sc">==</span> <span class="dv">2</span>)]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Incidence des NA dans le calcul de statistiques !</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Besoin de l'instruction na.rm = TRUE pour en supprimer l'incidence</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="cn">NA</span>, <span class="dv">8</span>)</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(x)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Une moyenne de NA donne NaN (Not a Number) avec na.rm = TRUE !</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Et donne NA avec na.rm = FALSE !</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>), <span class="at">na.rm =</span> <span class="cn">FALSE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</section>
<section id="sélection-déléments" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="sélection-déléments"><span class="header-section-number">1.6</span> Sélection d’éléments</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le 1er élément est numéroté 1 et non 0 comme dans Python</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">4</span>)] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Marche !!</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">3</span>) <span class="fu">print</span>(x[i])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>numeric(0)
[1] 1
[1] 2
[1] 3</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cas où les noms ne sont pas uniques</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">a =</span> <span class="dv">3</span>)</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>x[<span class="st">"a"</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>a 
1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">names</span>(x) <span class="sc">%in%</span> <span class="st">"a"</span>]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>a a 
1 3 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Options drop = FALSE</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">X1 =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">X2 =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>), <span class="at">x3 =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>))</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.frame</span>(x[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.frame</span>(x[, <span class="fu">c</span>(<span class="dv">1</span>)])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.data.frame</span>(x[, <span class="fu">c</span>(<span class="dv">1</span>), <span class="at">drop =</span> <span class="cn">FALSE</span>])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonction subset</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x1 =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">x2 =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>), <span class="at">x3 =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>))</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(x, <span class="at">select =</span> x1)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x1
1  1
2  2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(x, <span class="at">select =</span> <span class="sc">-</span>x1)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x2 x3
1  3  5
2  4  6</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(x, x1 <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x1 x2 x3
1  1  3  5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Incorrect</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(x, <span class="at">x1 =</span> <span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x1 x2 x3
1  1  3  5
2  2  4  6</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Référence à des noms de colonne non usuels</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">rnorm</span>(<span class="dv">5</span>), <span class="at">y =</span> <span class="fu">runif</span>(<span class="dv">5</span>))</span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df) <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span><span class="st">`</span><span class="at">1</span><span class="st">`</span></span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Incorrect</span></span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span><span class="dv">1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error: &lt;text&gt;:9:4: unexpected numeric constant
8: # Incorrect
9: df$1
      ^</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Utilisation de assign pour assigner une valeur à un objet en le désignant sous forme caractère</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="fu">assign</span>(<span class="st">'objet'</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a>objet</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="fu">assign</span>(<span class="fu">paste</span>(<span class="st">'objet'</span>, i, <span class="at">sep =</span> <span class="st">'_'</span>), i)</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>objet_5</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</section>
</section>
<section id="les-grandes-caractéristiques-du-langage-r" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Les grandes caractéristiques du langage <code>R</code></h1>
<section id="principe-de-vectorisation" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="principe-de-vectorisation"><span class="header-section-number">2.1</span> Principe de vectorisation</h2>
<p>Une fonction vectorisée s’applique à tous les éléments du vecteur !!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple de vecteur</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>valeurs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>valeurs <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Valeurs au carré</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>valeurs <span class="sc">**</span> <span class="dv">2</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   1   4   9  16  25  36  49  64  81 100</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># logarithme des valeurs</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(valeurs)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.0000000 0.6931472 1.0986123 1.3862944 1.6094379 1.7917595 1.9459101
 [8] 2.0794415 2.1972246 2.3025851</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Maximum des valeurs</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(valeurs)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Limite des valeurs</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(valeurs)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1 10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(valeurs)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inattendu</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Attention aux parenthèses !</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Inattendu ! Correspond à (1-1, 2-1, 3-1, ..., 10-1)</span></span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>n<span class="dv">-1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0 1 2 3 4 5 6 7 8 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>(n<span class="dv">-1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5 6 7 8 9</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Minimum ou maximum élément par élément</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">8</span>)</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Minimum : 2 possibilités</span></span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a><span class="fu">pmin</span>(x1, x2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 0 5 2 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapply</span>(min, x1, x2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 0 5 2 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Maximum : 2 possibilités</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pmax</span>(x1, x2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 2 7 6 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapply</span>(max, x1, x2)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 2 7 6 8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculer (x - min) / (max - min) pour chaque élément x d'un vecteur</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)</span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(x, <span class="cf">function</span>(xi, mn, mx) {(xi <span class="sc">-</span> mn) <span class="sc">/</span> (mx <span class="sc">-</span> mn)}, <span class="at">mn =</span> <span class="fu">min</span>(x), <span class="at">mx =</span> <span class="fu">max</span>(x))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0 0.5 1.0</code></pre>
</div>
</div>
</section>
<section id="principe-de-coercion" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="principe-de-coercion"><span class="header-section-number">2.2</span> Principe de coercion</h2>
<p>Dans les comparaisons, les objets R sont successivement convertis en logical, integer, numeric, complex et character, jusqu’à ce que la comparaison puisse se faire.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># TRUE / FALSE est transformé en integer (1 / 0)</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">==</span> <span class="dv">1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">==</span> <span class="dv">2</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">==</span> <span class="dv">0</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># TRUE est convertit en character</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">==</span> <span class="st">"1"</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 5 est convertit en character</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">&lt;</span> <span class="st">'7'</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 50 est convertit en character</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="dv">50</span> <span class="sc">&lt;</span> <span class="st">'7'</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="principe-de-recycling" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="principe-de-recycling"><span class="header-section-number">2.3</span> Principe de recycling</h2>
<p>En <code>R Base</code>, quand 2 vecteurs ne sont pas de même taille, le plus court vecteur est recyclé pour être de même taille que le plus long vecteur.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Si la taille du plus long vecteur est un entier multiple de la taile du plus court, R n'affiche pas d'avertissement</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> y</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6 5 7 9</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Si la taille du plus long vecteur n'est pas un entier multiple de la taille du plus court, R affiche un avertissement</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> y</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in x + y: longer object length is not a multiple of shorter object
length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6 5 7 9 8</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mais certaines fonctions pratiquent le recycling sans avertissement</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1 1" "2 2" "3 1"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Et data.frame() renvoie une erreur</span></span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="co">#data.frame(1:2, 1:3)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="le-saviez-vous" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Le saviez-vous ?</h1>
<section id="effets-des-calculs-en-virgule-flottante" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="effets-des-calculs-en-virgule-flottante"><span class="header-section-number">3.1</span> Effets des calculs en virgule flottante</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">2</span>) <span class="sc">^</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">2</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">/</span> <span class="dv">49</span> <span class="sc">*</span> <span class="dv">49</span> <span class="sc">==</span> <span class="dv">1</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>.<span class="dv">1</span> <span class="sc">==</span> .<span class="dv">3</span> <span class="sc">/</span> <span class="dv">3</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by=</span>.<span class="dv">1</span>) <span class="sc">==</span> .<span class="dv">3</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(<span class="fu">c</span>(.<span class="dv">3</span>, .<span class="dv">4</span> <span class="sc">-</span> .<span class="dv">1</span>, .<span class="dv">5</span> <span class="sc">-</span> .<span class="dv">2</span>, .<span class="dv">6</span> <span class="sc">-</span> .<span class="dv">3</span>, .<span class="dv">7</span> <span class="sc">-</span> .<span class="dv">4</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3 0.3 0.3</code></pre>
</div>
</div>
</section>
<section id="obtenir-de-linformations-sur-r" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="obtenir-de-linformations-sur-r"><span class="header-section-number">3.2</span> Obtenir de l’informations sur <code>R</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Informations sur la session de R</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.info</span>()</span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a>.Platform</span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Version de R</span></span>
<span id="cb221-7"><a href="#cb221-7" aria-hidden="true" tabindex="-1"></a>R.version.string</span>
<span id="cb221-8"><a href="#cb221-8" aria-hidden="true" tabindex="-1"></a><span class="fu">getRversion</span>()</span>
<span id="cb221-9"><a href="#cb221-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-10"><a href="#cb221-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Lien vers le bureau de l'utilisateur</span></span>
<span id="cb221-11"><a href="#cb221-11" aria-hidden="true" tabindex="-1"></a><span class="fu">file.path</span>(<span class="fu">Sys.getenv</span>(<span class="st">"USERPROFILE"</span>),<span class="st">"Desktop"</span>)</span>
<span id="cb221-12"><a href="#cb221-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-13"><a href="#cb221-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Chemin de l'exécutable R est-il installé ?</span></span>
<span id="cb221-14"><a href="#cb221-14" aria-hidden="true" tabindex="-1"></a><span class="fu">R.home</span>(<span class="st">"bin"</span>)</span>
<span id="cb221-15"><a href="#cb221-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-16"><a href="#cb221-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Où sont installés les packages R</span></span>
<span id="cb221-17"><a href="#cb221-17" aria-hidden="true" tabindex="-1"></a><span class="fu">.libPaths</span>()</span>
<span id="cb221-18"><a href="#cb221-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-19"><a href="#cb221-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Version d'un package installé (ici openxlsx)</span></span>
<span id="cb221-20"><a href="#cb221-20" aria-hidden="true" tabindex="-1"></a><span class="co"># packageVersion("openxlsx")</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="le-pipe-sur-r" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="le-pipe-sur-r"><span class="header-section-number">3.3</span> Le pipe sur R</h2>
<p>Cet opérateur permet d’enchaîner les opérations et d’avoir un code plus lisible.</p>
<p>Il existe différents types :</p>
<ul>
<li><p><strong>Le pipe de Rbase :</strong> <code>|&gt;</code></p></li>
<li><p><strong>Le pipe du tidyverse :</strong> <code>%&gt;%</code></p></li>
</ul>
<p>Les deux pipes fonctionnent de la même manière mais diffèrent sur les points suivants :</p>
<table class="caption-top table">
<colgroup>
<col style="width: 32%">
<col style="width: 18%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th>Thème</th>
<th><code>|&gt;</code></th>
<th><code>%&gt;%</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Placeholder (pour indiquer où placer l’objet)</td>
<td><p><code>_</code></p>
<p><code>x |&gt; f(y, a = _)</code></p></td>
<td><p><code>.</code></p>
<p><code>x %&gt;% f(y, a = .)</code></p></td>
</tr>
<tr class="even">
<td>Package</td>
<td>Aucun : directement sur R</td>
<td>Magrittr (pipe disponible lorsqu’on effectue <code>library(tidyverse)</code>) |</td>
</tr>
<tr class="odd">
<td>Fonction</td>
<td>Impossible</td>
<td>Possible</td>
</tr>
<tr class="even">
<td>Temps de calcul</td>
<td>Rapide</td>
<td>Plus lent</td>
</tr>
<tr class="odd">
<td>Opérateurs</td>
<td><code>|&gt;</code></td>
<td><code>%&gt;%</code> <code>%&lt;&gt;%</code> <code>%$%</code> <code>%!&gt;%</code> <code>%T&gt;%</code></td>
</tr>
</tbody>
</table>
<p><em>Source</em> :</p>
<ul>
<li><a href="https://larmarange.github.io/guide-R/manipulation/pipe.html#le-pipe-natif-de-r" class="uri">https://larmarange.github.io/guide-R/manipulation/pipe.html#le-pipe-natif-de-r</a></li>
</ul>
</section>
<section id="conseils-divers" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="conseils-divers"><span class="header-section-number">3.4</span> Conseils divers</h2>
<p>Il est déconseillé de nommer des variables temporaires <code>var</code>, car ce nom désigne la fonction permettant de calculer une variance en <code>R</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple : variance d'un échantillon aléatoire de 1000 observations tiré d'une loi normale centrée réduite</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.060657</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le format en résultat de sapply est imprévisible</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="co"># integer</span></span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(<span class="dv">1</span>L, <span class="cf">function</span>(x) <span class="fu">c</span>(x, x))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]
[1,]    1
[2,]    1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list</span></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(<span class="fu">integer</span>(), <span class="cf">function</span>(x) <span class="fu">c</span>(x, x))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>list()</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Le résultat de ifelse() dépend du format de la condition</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="co"># logical</span></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="cn">NA</span>, <span class="dv">1</span>L, <span class="dv">1</span>L)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="co"># integer</span></span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="cn">FALSE</span>, <span class="dv">1</span>L, <span class="dv">1</span>L)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>La fonction <code>if</code> utilisée sans <code>else</code> renvoie <code>NULL</code> si la condition est <code>FALSE</code>. Ceci permet d’écrire de façon élégante des conditions simples. Par exemple, prendre en compte un s final à un nom seulement si la valeur est strictement supérieure à 1 :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>NombreDeLignes <span class="ot">&lt;-</span> <span class="cf">function</span>(baseDeDonnees) {</span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>  ligne <span class="ot">&lt;-</span> <span class="fu">nrow</span>(baseDeDonnees)</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(ligne, <span class="st">" ligne"</span>, <span class="cf">if</span> (ligne <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="st">"s"</span>)</span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a><span class="fu">NombreDeLignes</span>(mtcars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "32 lignes"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">NombreDeLignes</span>(mtcars[<span class="dv">1</span>,])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1 ligne"</code></pre>
</div>
</div>
<p>Pré-allouer un vecteur de dimension 5 :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">5</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="list-comprehensions-en-r" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="list-comprehensions-en-r"><span class="header-section-number">3.5</span> List-comprehensions en <code>R</code></h2>
<p>Equivalent des list-comprehensions de <code>Python</code> en <code>R</code> !</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Equivalent des list-comprehensions de Python en R</span></span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Somme des entiers de 1 à 1 000 multiples de 3 ou 5, en une ligne !</span></span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 4 manières de faire</span></span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>({l <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span> ; l[l <span class="sc">%%</span> <span class="dv">3</span> <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> l <span class="sc">%%</span> <span class="dv">5</span> <span class="sc">==</span> <span class="dv">0</span>]})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 234168</code></pre>
</div>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>({l <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span> ; l[<span class="fu">seq_along</span>(l) <span class="sc">%%</span> <span class="dv">3</span> <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> <span class="fu">seq_along</span>(l) <span class="sc">%%</span> <span class="dv">5</span> <span class="sc">==</span> <span class="dv">0</span>]})</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 234168</code></pre>
</div>
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(l<span class="ot">&lt;-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>)[l <span class="sc">%%</span> <span class="dv">3</span> <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> l <span class="sc">%%</span> <span class="dv">5</span> <span class="sc">==</span> <span class="dv">0</span>])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 234168</code></pre>
</div>
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>((<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>)[(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span> <span class="sc">%%</span> <span class="dv">3</span>) <span class="sc">==</span> <span class="dv">0</span> <span class="sc">|</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span> <span class="sc">%%</span> <span class="dv">5</span>) <span class="sc">==</span> <span class="dv">0</span>])</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 234168</code></pre>
</div>
</div>
</section>
</section>
<section id="fonctions-utiles" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Fonctions utiles</h1>
<section id="ramasse-miettes-garbage-collector" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="ramasse-miettes-garbage-collector"><span class="header-section-number">4.1</span> Ramasse-miettes (Garbage Collector)</h2>
<p>Si la mémoire vive de l’ordinateur est saturée, on peut essayer de la “purger” en utilisant la fonction <code>gc()</code> de <code>R</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          used (Mb) gc trigger (Mb) max used (Mb)
Ncells  909528 48.6    1762680 94.2  1762680 94.2
Vcells 1769168 13.5   10146329 77.5  7682483 58.7</code></pre>
</div>
</div>
</section>
<section id="la-fonction-subset" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="la-fonction-subset"><span class="header-section-number">4.2</span> La fonction <code>subset()</code></h2>
<p>La fonction <code>subset()</code> présente deux intérêts par rapport à la sélection avec <code>[</code> :</p>
<ul>
<li>les lignes où la condition évaluée est <code>NA</code> sont retirées :</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a>exemple_subset <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>))</span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec []</span></span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a>exemple_subset[exemple_subset<span class="sc">$</span>x <span class="sc">==</span> <span class="dv">1</span>, ]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    x    y
1   1    a
NA NA &lt;NA&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec subset()</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(exemple_subset, x <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x y
1 1 a</code></pre>
</div>
</div>
<ul>
<li>l’option par défaut est <code>drop = FALSE</code>, ce qui garantit que la base de résultat est un dataframe :</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a>exemple_subset <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>))</span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec []</span></span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a>exemple_subset[exemple_subset<span class="sc">$</span>x <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"x"</span>] <span class="sc">%&gt;%</span> <span class="fu">is.data.frame</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec subset()</span></span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(exemple_subset, x <span class="sc">==</span> <span class="dv">1</span>, x) <span class="sc">%&gt;%</span> <span class="fu">is.data.frame</span>()</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="les-fonctions-try-et-trycatch" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="les-fonctions-try-et-trycatch"><span class="header-section-number">4.3</span> Les fonctions <code>try()</code> et <code>tryCatch()</code></h2>
<p>La fonction <code>try()</code> permet de poursuivre le programme malgré la survenue d’une erreur. Dans l’exemple suivant, le programme affiche bien “Suite du programme” malgré l’erreur au code précédent.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="fu">try</span>(<span class="fu">log</span>(<span class="st">"x"</span>)) ; <span class="fu">print</span>(<span class="st">"Suite du programme"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Error in log("x") : non-numeric argument to mathematical function</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Suite du programme"</code></pre>
</div>
</div>
<p>La fonction <code>tryCatch()</code> est plus élaborée, et permet de programmer une valeur par défaut en cas d’erreur.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a>FonctionLog <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>(</span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">error =</span> <span class="cf">function</span>(cnd) <span class="cn">NA</span>,</span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">log</span>(x)</span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb258-6"><a href="#cb258-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La fonction renvoie un <code>NA</code> si la fonction <code>log()</code> ne peut pas être appliquée, comme c’est le cas sur l’exemple pour la valeur “a”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">FonctionLog</span>(<span class="dv">1</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">FonctionLog</span>(<span class="st">"x"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</section>
<section id="les-fonctions-sort-order-et-rank" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="les-fonctions-sort-order-et-rank"><span class="header-section-number">4.4</span> Les fonctions <code>sort()</code>, <code>order()</code> et <code>rank()</code></h2>
<p><code>sort()</code> trie un vecteur par ordre croissant. <code>rank()</code> donne le rang de chaque élément du vecteur, le plus petit élément se voyant attribué le rang 1. <code>order()</code> renvoie l’indice du vecteur trié par ordre croissant.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a>vecteur <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>)</span>
<span id="cb263-2"><a href="#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 2 5 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rank</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 3 1 2 4</code></pre>
</div>
</div>
<p>Une autre solution que <code>sort()</code> pour trier un vecteur est :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb269"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a>vecteur <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>)</span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true" tabindex="-1"></a>vecteur[<span class="fu">order</span>(vecteur)]</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
<p>À noter aussi que <code>sort()</code> permet aussi d’exécuter simultanément les fonctions <code>sort()</code> et <code>order()</code>. Ainsi :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a>vecteur <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>)</span>
<span id="cb271-2"><a href="#cb271-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(vecteur, <span class="at">index.return =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$x
[1] 1 2 3 4 5

$ix
[1] 3 4 2 5 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonction sort()</span></span>
<span id="cb273-2"><a href="#cb273-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(vecteur, <span class="at">index.return =</span> <span class="cn">TRUE</span>)<span class="sc">$</span>x</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonction order()</span></span>
<span id="cb277-2"><a href="#cb277-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(vecteur, <span class="at">index.return =</span> <span class="cn">TRUE</span>)<span class="sc">$</span>ix</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 2 5 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">order</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 2 5 1</code></pre>
</div>
</div>
</section>
<section id="les-fonctions-seq-seq_len-et-seq_along" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="les-fonctions-seq-seq_len-et-seq_along"><span class="header-section-number">4.5</span> Les fonctions <code>:</code>, <code>seq()</code>, <code>seq_len()</code> et <code>seq_along()</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ne pas confondre !</span></span>
<span id="cb281-2"><a href="#cb281-2" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span><span class="sc">:</span><span class="dv">10</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  0  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  0  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Privilégier seq_len à : lorsqu'il y a un risque de 0</span></span>
<span id="cb287-2"><a href="#cb287-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonctionnement identique</span></span>
<span id="cb287-3"><a href="#cb287-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb287-4"><a href="#cb287-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>n</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_len</span>(n)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Problème avec les 0</span></span>
<span id="cb291-2"><a href="#cb291-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb291-3"><a href="#cb291-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span>n</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_len</span>(n)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>integer(0)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Préférer seq_along à : au cas où la taille de l'objet est 0</span></span>
<span id="cb295-2"><a href="#cb295-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>() ;<span class="fu">length</span>(x)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) <span class="fu">print</span>(i)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(x)) <span class="fu">print</span>(i)</span>
<span id="cb299-2"><a href="#cb299-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq</span>(<span class="at">along=</span>x)) <span class="fu">print</span>(i)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Différences seq, seq_len et seq_along</span></span>
<span id="cb300-2"><a href="#cb300-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb300-3"><a href="#cb300-3" aria-hidden="true" tabindex="-1"></a><span class="co"># seq : créé une séquence d'éléments successifs, espacés éventuellement d'un pas</span></span>
<span id="cb300-4"><a href="#cb300-4" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 5 7 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb302"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 5 7 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seq_len : créé une séquence d'éléments de 1 jusqu'au paramètre de la fonction (supposé positif)</span></span>
<span id="cb304-2"><a href="#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_len</span>(<span class="dv">10</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seq_along : créé une séquence d'éléments de 1 jusqu'au nombre d'éléments du vecteur</span></span>
<span id="cb306-2"><a href="#cb306-2" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(<span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">1</span>,<span class="dv">0</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb308"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="co"># seq se comporte comme seq_along si le vecteur comprend plusieurs éléments, et comme seq_len s'il comprend un seul élément</span></span>
<span id="cb308-2"><a href="#cb308-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb308-3"><a href="#cb308-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plusieurs éléments</span></span>
<span id="cb308-4"><a href="#cb308-4" aria-hidden="true" tabindex="-1"></a>vecteur <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb308-5"><a href="#cb308-5" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb310"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_len</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Un seul élement</span></span>
<span id="cb314-2"><a href="#cb314-2" aria-hidden="true" tabindex="-1"></a>vecteur <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb314-3"><a href="#cb314-3" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb316"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_len</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb318"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(vecteur)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
</section>
<section id="fonction-pour-copier-des-données-r-dans-le-presse-papier-et-les-coller-par-exemple-dans-excel" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="fonction-pour-copier-des-données-r-dans-le-presse-papier-et-les-coller-par-exemple-dans-excel"><span class="header-section-number">4.6</span> Fonction pour copier des données R dans le presse-papier et les coller (par exemple dans Excel)</h2>
<p>Pour coller des données de R dans Excel, on peut :</p>
<ul>
<li>faire passer la fonction <code>R</code> <code>CopierColler()</code> proposée ci-dessous sur les données <code>R</code> que l’on souhaite copier dans Excel ;</li>
<li>puis coller le presse-papier directement dans Excel.</li>
</ul>
<p>La fonction peut être assez pratique.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Copier des données dans le presse-papier</span></span>
<span id="cb320-2"><a href="#cb320-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> mtcars</span>
<span id="cb320-3"><a href="#cb320-3" aria-hidden="true" tabindex="-1"></a>CopierColler <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">row.names =</span> <span class="cn">FALSE</span>, <span class="at">col.names =</span> <span class="cn">TRUE</span>, <span class="at">dec =</span> <span class="st">","</span>, <span class="at">na =</span> <span class="st">""</span>, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\t</span><span class="st">"</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>, ...) {</span>
<span id="cb320-4"><a href="#cb320-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.table</span>(x, <span class="st">"clipboard"</span>, <span class="at">sep =</span> sep, <span class="at">row.names =</span> row.names, <span class="at">col.names =</span> col.names, <span class="at">dec =</span> dec, <span class="at">na =</span> na, <span class="at">quote =</span> quote, ...)</span>
<span id="cb320-5"><a href="#cb320-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb320-6"><a href="#cb320-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Fonctionne sous système Windows, pas Linux</span></span>
<span id="cb320-7"><a href="#cb320-7" aria-hidden="true" tabindex="-1"></a><span class="co">#CopierColler(x)</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fonctions-diverses" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="fonctions-diverses"><span class="header-section-number">4.7</span> Fonctions diverses</h2>
<p><code>browseURL()</code> lance une page Internet.</p>
<p>Outils de débogage :</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb321"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Outils de debogage</span></span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">error =</span> recover)</span>
<span id="cb321-3"><a href="#cb321-3" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">error=</span><span class="cn">NULL</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Fonction <code>dput()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Créer un objet sous forme de code R !</span></span>
<span id="cb322-2"><a href="#cb322-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">"mtcars"</span>)</span>
<span id="cb322-3"><a href="#cb322-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dput</span>(mtcars)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>structure(list(mpg = c(21, 21, 22.8, 21.4, 18.7, 18.1, 14.3, 
24.4, 22.8, 19.2, 17.8, 16.4, 17.3, 15.2, 10.4, 10.4, 14.7, 32.4, 
30.4, 33.9, 21.5, 15.5, 15.2, 13.3, 19.2, 27.3, 26, 30.4, 15.8, 
19.7, 15, 21.4), cyl = c(6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 
8, 8, 8, 8, 8, 4, 4, 4, 4, 8, 8, 8, 8, 4, 4, 4, 8, 6, 8, 4), 
    disp = c(160, 160, 108, 258, 360, 225, 360, 146.7, 140.8, 
    167.6, 167.6, 275.8, 275.8, 275.8, 472, 460, 440, 78.7, 75.7, 
    71.1, 120.1, 318, 304, 350, 400, 79, 120.3, 95.1, 351, 145, 
    301, 121), hp = c(110, 110, 93, 110, 175, 105, 245, 62, 95, 
    123, 123, 180, 180, 180, 205, 215, 230, 66, 52, 65, 97, 150, 
    150, 245, 175, 66, 91, 113, 264, 175, 335, 109), drat = c(3.9, 
    3.9, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3.92, 
    3.07, 3.07, 3.07, 2.93, 3, 3.23, 4.08, 4.93, 4.22, 3.7, 2.76, 
    3.15, 3.73, 3.08, 4.08, 4.43, 3.77, 4.22, 3.62, 3.54, 4.11
    ), wt = c(2.62, 2.875, 2.32, 3.215, 3.44, 3.46, 3.57, 3.19, 
    3.15, 3.44, 3.44, 4.07, 3.73, 3.78, 5.25, 5.424, 5.345, 2.2, 
    1.615, 1.835, 2.465, 3.52, 3.435, 3.84, 3.845, 1.935, 2.14, 
    1.513, 3.17, 2.77, 3.57, 2.78), qsec = c(16.46, 17.02, 18.61, 
    19.44, 17.02, 20.22, 15.84, 20, 22.9, 18.3, 18.9, 17.4, 17.6, 
    18, 17.98, 17.82, 17.42, 19.47, 18.52, 19.9, 20.01, 16.87, 
    17.3, 15.41, 17.05, 18.9, 16.7, 16.9, 14.5, 15.5, 14.6, 18.6
    ), vs = c(0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 
    0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1), am = c(1, 
    1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 
    0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1), gear = c(4, 4, 4, 3, 
    3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3, 3, 
    3, 3, 4, 5, 5, 5, 5, 5, 4), carb = c(4, 4, 1, 1, 2, 1, 4, 
    2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1, 2, 2, 4, 2, 1, 
    2, 2, 4, 6, 8, 2)), row.names = c("Mazda RX4", "Mazda RX4 Wag", 
"Datsun 710", "Hornet 4 Drive", "Hornet Sportabout", "Valiant", 
"Duster 360", "Merc 240D", "Merc 230", "Merc 280", "Merc 280C", 
"Merc 450SE", "Merc 450SL", "Merc 450SLC", "Cadillac Fleetwood", 
"Lincoln Continental", "Chrysler Imperial", "Fiat 128", "Honda Civic", 
"Toyota Corolla", "Toyota Corona", "Dodge Challenger", "AMC Javelin", 
"Camaro Z28", "Pontiac Firebird", "Fiat X1-9", "Porsche 914-2", 
"Lotus Europa", "Ford Pantera L", "Ferrari Dino", "Maserati Bora", 
"Volvo 142E"), class = "data.frame")</code></pre>
</div>
</div>
<p>Fonction <code>tribble()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="co"># En tidyverse, la fonction tribble peut être utile pour créer des bases lignes par lignes</span></span>
<span id="cb324-2"><a href="#cb324-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb324-3"><a href="#cb324-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tribble</span>(</span>
<span id="cb324-4"><a href="#cb324-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>x, <span class="sc">~</span>y,</span>
<span id="cb324-5"><a href="#cb324-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"a"</span>,   <span class="dv">1</span>,</span>
<span id="cb324-6"><a href="#cb324-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"b"</span>,   <span class="dv">2</span></span>
<span id="cb324-7"><a href="#cb324-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  x         y
  &lt;chr&gt; &lt;dbl&gt;
1 a         1
2 b         2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Définir ses propres opérateurs</span></span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true" tabindex="-1"></a><span class="co"># R reconnait le texte entre %% comme un opérateur binaire</span></span>
<span id="cb326-3"><a href="#cb326-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Exemple, simplifier la fonction paste</span></span>
<span id="cb326-4"><a href="#cb326-4" aria-hidden="true" tabindex="-1"></a><span class="st">'%+%'</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) { <span class="fu">paste</span>(x, y, <span class="at">sep =</span> <span class="st">""</span>) }</span>
<span id="cb326-5"><a href="#cb326-5" aria-hidden="true" tabindex="-1"></a><span class="st">"Groupe_"</span> <span class="sc">%+%</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">9</span></span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Groupe_0" "Groupe_1" "Groupe_2" "Groupe_3" "Groupe_4" "Groupe_5"
 [7] "Groupe_6" "Groupe_7" "Groupe_8" "Groupe_9"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Récupérer les éléments à la diagonale d'un dataframe</span></span>
<span id="cb328-2"><a href="#cb328-2" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(<span class="fu">as.matrix</span>(mtcars))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  21.00   6.00 108.00 110.00   3.15   3.46  15.84   1.00   0.00   4.00
[11]   4.00</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb330"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="co"># S'assurer qu'un objet R existe déjà</span></span>
<span id="cb330-2"><a href="#cb330-2" aria-hidden="true" tabindex="-1"></a><span class="fu">exists</span>(<span class="st">"mtcars"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb332"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Penser au print</span></span>
<span id="cb332-2"><a href="#cb332-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) i</span>
<span id="cb332-3"><a href="#cb332-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="fu">print</span>(i)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1
[1] 2
[1] 3
[1] 4
[1] 5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb334"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Différences print et cat</span></span>
<span id="cb334-2"><a href="#cb334-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Salut !</span><span class="sc">\n</span><span class="st">Comment vas-tu ?"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Salut !
Comment vas-tu ?</code></pre>
</div>
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="st">"Salut !</span><span class="sc">\n</span><span class="st">Comment vas-tu ?"</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Salut !\nComment vas-tu ?"</code></pre>
</div>
</div>
</section>
<section id="quelques-fonctions-mathématiques" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="quelques-fonctions-mathématiques"><span class="header-section-number">4.8</span> Quelques fonctions mathématiques</h2>
<p><code>integrate()</code> calcule l’aire sous la courbe <span class="math inline">\(f()\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="fu">integrate</span>(sin, <span class="dv">0</span>, pi <span class="sc">/</span> <span class="dv">2</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1 with absolute error &lt; 1.1e-14</code></pre>
</div>
</div>
<p><code>uniroot()</code> trouve la valeur de <span class="math inline">\(x\)</span> telle que <span class="math inline">\(f(x) = 0\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="fu">uniroot</span>(<span class="cf">function</span>(x) x <span class="sc">**</span> <span class="dv">3</span>, <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$root
[1] 0

$f.root
[1] 0

$iter
[1] 1

$init.it
[1] NA

$estim.prec
[1] 1</code></pre>
</div>
</div>
<p><code>optimise()</code> trouve le maximum ou le minimum d’une fonction sur un intervalle donné.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="fu">optimise</span>(<span class="cf">function</span>(x) <span class="sc">-</span>x <span class="sc">**</span> <span class="dv">2</span>, <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>), <span class="at">maximum =</span> <span class="cn">TRUE</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$maximum
[1] -2.775558e-17

$objective
[1] -7.70372e-34</code></pre>
</div>
</div>
</section>
<section id="ajouter-des-guillemets-dans-une-chaîne-de-caractères" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="ajouter-des-guillemets-dans-une-chaîne-de-caractères"><span class="header-section-number">4.9</span> Ajouter des guillemets dans une chaîne de caractères</h2>
<p>La fonction <code>shQuote()</code> permet d’ajouter des guillemets dans une chaîne de caractères.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb344"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"valeur ="</span>, <span class="fu">shQuote</span>(<span class="st">"10"</span>))</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "valeur = '10'"</code></pre>
</div>
</div>
</section>
</section>
<section id="importer-rapidement-un-fichier-r-dans-sas" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Importer rapidement un fichier <code>R</code> dans <code>SAS</code></h1>
<p>Le format de données <code>SAS</code> étant propriétaire, il n’est pas possible de créer directement en <code>R</code> des bases <code>SAS</code> d’extension <code>.sas7bdat</code>. Une solution relativement rapide pour ce faire est de passer par le format intermédiaire <code>.xpt</code> qui conserve les noms et formats des variables.</p>
<section id="copie-de-la-base-r-en-format-xpt" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="copie-de-la-base-r-en-format-xpt"><span class="header-section-number">5.1</span> Copie de la base <code>R</code> en format <code>xpt</code></h2>
<p>Pour ce faire, il faut copier la base <code>R</code> en format <code>xpt</code> en utilisant la fonction <code>write_xpt()</code> du package <code>haven</code>. Pour que la manipulation proposée ici fonctionne, il faut bien veiller à ce que la version du <code>xpt</code> soit la version 5.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On copie la base mtcars en format xpt sur le bureau de l'utilisateur</span></span>
<span id="cb346-2"><a href="#cb346-2" aria-hidden="true" tabindex="-1"></a>haven<span class="sc">::</span><span class="fu">write_xpt</span>(mtcars, <span class="fu">file.path</span>(<span class="fu">Sys.getenv</span>(<span class="st">"USERPROFILE"</span>), <span class="st">"Desktop"</span>, <span class="st">"mtcars.xpt"</span>), <span class="at">version =</span> <span class="dv">5</span>)</span></code><button title="Copier vers le presse-papier" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="import-de-la-base-xpt-en-sas" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="import-de-la-base-xpt-en-sas"><span class="header-section-number">5.2</span> Import de la base <code>xpt</code> en <code>SAS</code></h2>
<p>La base <code>R</code> copiée en format <code>xpt</code> peut ensuite être importée en <code>SAS</code> avec le code suivant :</p>
<pre class="sas"><code>libname xptfile xport "C:\Users\&amp;sysuserid.\Desktop\mtcars.xpt";
proc copy inlib = xptfile outlib = work;
run;</code></pre>
<p>Par défaut, la base est nommée du nom de la base <code>xpt</code> et se trouve dans la <code>work</code> de <code>SAS</code>, mais <code>outlib</code> peut être paramétré avec une autre libname.</p>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copié");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copié");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/nassab-abdallah\.github\.io\/aide_memoire_r_sas\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Code source</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb348" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb348-2"><a href="#cb348-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Trucs et astuces en `R`"</span></span>
<span id="cb348-3"><a href="#cb348-3" aria-hidden="true" tabindex="-1"></a><span class="an">lang :</span><span class="co"> fr</span></span>
<span id="cb348-4"><a href="#cb348-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb348-5"><a href="#cb348-5" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: Nassab ABDALLAH</span></span>
<span id="cb348-6"><a href="#cb348-6" aria-hidden="true" tabindex="-1"></a><span class="co">    affiliation: Dares/SCS, &lt;nassab.abdallah@travail.gouv.fr&gt;</span></span>
<span id="cb348-7"><a href="#cb348-7" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: Damien EUZENAT</span></span>
<span id="cb348-8"><a href="#cb348-8" aria-hidden="true" tabindex="-1"></a><span class="co">    affiliation: Dares/DIP, &lt;damien.euzenat@travail.gouv.fr&gt;</span></span>
<span id="cb348-9"><a href="#cb348-9" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb348-10"><a href="#cb348-10" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb348-11"><a href="#cb348-11" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb348-12"><a href="#cb348-12" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-expand: 1</span></span>
<span id="cb348-13"><a href="#cb348-13" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-depth: 2</span></span>
<span id="cb348-14"><a href="#cb348-14" aria-hidden="true" tabindex="-1"></a><span class="co">    toc-location: left</span></span>
<span id="cb348-15"><a href="#cb348-15" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: true</span></span>
<span id="cb348-16"><a href="#cb348-16" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb348-17"><a href="#cb348-17" aria-hidden="true" tabindex="-1"></a><span class="co">    smooth-scroll: true</span></span>
<span id="cb348-18"><a href="#cb348-18" aria-hidden="true" tabindex="-1"></a><span class="co">    link-external-icon: true</span></span>
<span id="cb348-19"><a href="#cb348-19" aria-hidden="true" tabindex="-1"></a><span class="co">    link-external-newwindow: true</span></span>
<span id="cb348-20"><a href="#cb348-20" aria-hidden="true" tabindex="-1"></a><span class="co">    page-layout: full</span></span>
<span id="cb348-21"><a href="#cb348-21" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb348-22"><a href="#cb348-22" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb348-23"><a href="#cb348-23" aria-hidden="true" tabindex="-1"></a><span class="co"># format : native    </span></span>
<span id="cb348-24"><a href="#cb348-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-25"><a href="#cb348-25" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb348-26"><a href="#cb348-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-27"><a href="#cb348-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary for listings and search engines</span></span>
<span id="cb348-28"><a href="#cb348-28" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> |</span></span>
<span id="cb348-29"><a href="#cb348-29" aria-hidden="true" tabindex="-1"></a><span class="co">  Trucs et astuces en `R`.</span></span>
<span id="cb348-30"><a href="#cb348-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-31"><a href="#cb348-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Date published</span></span>
<span id="cb348-32"><a href="#cb348-32" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "`r Sys.Date()`"</span></span>
<span id="cb348-33"><a href="#cb348-33" aria-hidden="true" tabindex="-1"></a><span class="an">output:</span></span>
<span id="cb348-34"><a href="#cb348-34" aria-hidden="true" tabindex="-1"></a><span class="co">  rmdformats::robobook:</span></span>
<span id="cb348-35"><a href="#cb348-35" aria-hidden="true" tabindex="-1"></a><span class="co">    highlight: tango</span></span>
<span id="cb348-36"><a href="#cb348-36" aria-hidden="true" tabindex="-1"></a><span class="co">    number_sections: true</span></span>
<span id="cb348-37"><a href="#cb348-37" aria-hidden="true" tabindex="-1"></a><span class="co">  </span></span>
<span id="cb348-38"><a href="#cb348-38" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb348-39"><a href="#cb348-39" aria-hidden="true" tabindex="-1"></a><span class="co">  - R</span></span>
<span id="cb348-40"><a href="#cb348-40" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb348-41"><a href="#cb348-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-42"><a href="#cb348-42" aria-hidden="true" tabindex="-1"></a>::: justify</span>
<span id="cb348-43"><a href="#cb348-43" aria-hidden="true" tabindex="-1"></a>Voici quelques trucs et astuces utiles à connaître sur R, issus en partie des livres <span class="co">[</span><span class="ot">The R Inferno</span><span class="co">](https://www.burns-stat.com/pages/Tutor/R_inferno.pdf)</span> et <span class="co">[</span><span class="ot">Advanced R</span><span class="co">](https://adv-r.hadley.nz/)</span>, à consulter pour plus de détails.</span>
<span id="cb348-44"><a href="#cb348-44" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb348-45"><a href="#cb348-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-46"><a href="#cb348-46" aria-hidden="true" tabindex="-1"></a><span class="fu"># Le fonctionnement du langage `R`</span></span>
<span id="cb348-47"><a href="#cb348-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-48"><a href="#cb348-48" aria-hidden="true" tabindex="-1"></a><span class="fu">## Les types d'objet</span></span>
<span id="cb348-49"><a href="#cb348-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-50"><a href="#cb348-50" aria-hidden="true" tabindex="-1"></a><span class="fu">### Généralités</span></span>
<span id="cb348-51"><a href="#cb348-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-52"><a href="#cb348-52" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-53"><a href="#cb348-53" aria-hidden="true" tabindex="-1"></a><span class="in"># En savoir plus sur ses données</span></span>
<span id="cb348-54"><a href="#cb348-54" aria-hidden="true" tabindex="-1"></a><span class="in">data("cars")</span></span>
<span id="cb348-55"><a href="#cb348-55" aria-hidden="true" tabindex="-1"></a><span class="in">typeof(cars)</span></span>
<span id="cb348-56"><a href="#cb348-56" aria-hidden="true" tabindex="-1"></a><span class="in">class(cars)</span></span>
<span id="cb348-57"><a href="#cb348-57" aria-hidden="true" tabindex="-1"></a><span class="in">mode(cars)</span></span>
<span id="cb348-58"><a href="#cb348-58" aria-hidden="true" tabindex="-1"></a><span class="in">str(cars)</span></span>
<span id="cb348-59"><a href="#cb348-59" aria-hidden="true" tabindex="-1"></a><span class="in">dim(cars)</span></span>
<span id="cb348-60"><a href="#cb348-60" aria-hidden="true" tabindex="-1"></a><span class="in">c(is.data.frame(cars), is.list(cars), is.vector(cars), is.array(cars))</span></span>
<span id="cb348-61"><a href="#cb348-61" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-62"><a href="#cb348-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-63"><a href="#cb348-63" aria-hidden="true" tabindex="-1"></a>La notation L permet d'imposer à <span class="in">`R`</span> de créer un nombre sous format <span class="in">`integer`</span>d, moins gourmand en mémoire (pour des raisons d'efficacité).</span>
<span id="cb348-64"><a href="#cb348-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-65"><a href="#cb348-65" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-66"><a href="#cb348-66" aria-hidden="true" tabindex="-1"></a><span class="in">class(1)</span></span>
<span id="cb348-67"><a href="#cb348-67" aria-hidden="true" tabindex="-1"></a><span class="in">class(1L)</span></span>
<span id="cb348-68"><a href="#cb348-68" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-69"><a href="#cb348-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-70"><a href="#cb348-70" aria-hidden="true" tabindex="-1"></a><span class="fu">### Les listes</span></span>
<span id="cb348-71"><a href="#cb348-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-72"><a href="#cb348-72" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-73"><a href="#cb348-73" aria-hidden="true" tabindex="-1"></a><span class="in"># Créer une liste</span></span>
<span id="cb348-74"><a href="#cb348-74" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list()</span></span>
<span id="cb348-75"><a href="#cb348-75" aria-hidden="true" tabindex="-1"></a><span class="in">liste</span></span>
<span id="cb348-76"><a href="#cb348-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-77"><a href="#cb348-77" aria-hidden="true" tabindex="-1"></a><span class="in"># Pré-allouer une liste de 5 éléments</span></span>
<span id="cb348-78"><a href="#cb348-78" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- vector(mode = "list", 5)</span></span>
<span id="cb348-79"><a href="#cb348-79" aria-hidden="true" tabindex="-1"></a><span class="in">liste</span></span>
<span id="cb348-80"><a href="#cb348-80" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-81"><a href="#cb348-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-82"><a href="#cb348-82" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-83"><a href="#cb348-83" aria-hidden="true" tabindex="-1"></a><span class="in"># Ajouter un élément à une liste</span></span>
<span id="cb348-84"><a href="#cb348-84" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list(1, 2)</span></span>
<span id="cb348-85"><a href="#cb348-85" aria-hidden="true" tabindex="-1"></a><span class="in"># Il faut passer par cette syntaxe</span></span>
<span id="cb348-86"><a href="#cb348-86" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- c(liste, list(3))</span></span>
<span id="cb348-87"><a href="#cb348-87" aria-hidden="true" tabindex="-1"></a><span class="in">liste</span></span>
<span id="cb348-88"><a href="#cb348-88" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-89"><a href="#cb348-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-90"><a href="#cb348-90" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-91"><a href="#cb348-91" aria-hidden="true" tabindex="-1"></a><span class="in"># Trier une liste</span></span>
<span id="cb348-92"><a href="#cb348-92" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list("2" = 2, "0" = 0, "1" = 1)</span></span>
<span id="cb348-93"><a href="#cb348-93" aria-hidden="true" tabindex="-1"></a><span class="in">liste</span></span>
<span id="cb348-94"><a href="#cb348-94" aria-hidden="true" tabindex="-1"></a><span class="in">liste[order(names(liste))]</span></span>
<span id="cb348-95"><a href="#cb348-95" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-96"><a href="#cb348-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-97"><a href="#cb348-97" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-98"><a href="#cb348-98" aria-hidden="true" tabindex="-1"></a><span class="in"># Extraction de listes</span></span>
<span id="cb348-99"><a href="#cb348-99" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list(nombres = 1:5, lettres = letters[1:5])</span></span>
<span id="cb348-100"><a href="#cb348-100" aria-hidden="true" tabindex="-1"></a><span class="in">liste$nombres</span></span>
<span id="cb348-101"><a href="#cb348-101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-102"><a href="#cb348-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-103"><a href="#cb348-103" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-104"><a href="#cb348-104" aria-hidden="true" tabindex="-1"></a><span class="in"># On veut faire appel à un élement de la liste à partir d'une variable extérieure</span></span>
<span id="cb348-105"><a href="#cb348-105" aria-hidden="true" tabindex="-1"></a><span class="in">var &lt;- "nombres"</span></span>
<span id="cb348-106"><a href="#cb348-106" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-107"><a href="#cb348-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-108"><a href="#cb348-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-109"><a href="#cb348-109" aria-hidden="true" tabindex="-1"></a><span class="in"># Ne marche pas, car nombres est en caractère</span></span>
<span id="cb348-110"><a href="#cb348-110" aria-hidden="true" tabindex="-1"></a><span class="in">liste$var</span></span>
<span id="cb348-111"><a href="#cb348-111" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-112"><a href="#cb348-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-113"><a href="#cb348-113" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-114"><a href="#cb348-114" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonctionne</span></span>
<span id="cb348-115"><a href="#cb348-115" aria-hidden="true" tabindex="-1"></a><span class="in">liste[[var]]</span></span>
<span id="cb348-116"><a href="#cb348-116" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-117"><a href="#cb348-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-118"><a href="#cb348-118" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-119"><a href="#cb348-119" aria-hidden="true" tabindex="-1"></a><span class="in"># Sélection dans une liste</span></span>
<span id="cb348-120"><a href="#cb348-120" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list(nombres = 1:5, lettres = letters[1:5])</span></span>
<span id="cb348-121"><a href="#cb348-121" aria-hidden="true" tabindex="-1"></a><span class="in">liste["nombres"]</span></span>
<span id="cb348-122"><a href="#cb348-122" aria-hidden="true" tabindex="-1"></a><span class="in">is.list(liste["nombres"])</span></span>
<span id="cb348-123"><a href="#cb348-123" aria-hidden="true" tabindex="-1"></a><span class="in">liste[["nombres"]]</span></span>
<span id="cb348-124"><a href="#cb348-124" aria-hidden="true" tabindex="-1"></a><span class="in">is.list(liste[["nombres"]])</span></span>
<span id="cb348-125"><a href="#cb348-125" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-126"><a href="#cb348-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-127"><a href="#cb348-127" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-128"><a href="#cb348-128" aria-hidden="true" tabindex="-1"></a><span class="in"># Suppression des éléments d'une liste</span></span>
<span id="cb348-129"><a href="#cb348-129" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list(nombres = 1:5, lettres = letters[1:5])</span></span>
<span id="cb348-130"><a href="#cb348-130" aria-hidden="true" tabindex="-1"></a><span class="in">liste[-1]</span></span>
<span id="cb348-131"><a href="#cb348-131" aria-hidden="true" tabindex="-1"></a><span class="in">liste["nombres"] &lt;- NULL</span></span>
<span id="cb348-132"><a href="#cb348-132" aria-hidden="true" tabindex="-1"></a><span class="in">liste</span></span>
<span id="cb348-133"><a href="#cb348-133" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-134"><a href="#cb348-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-135"><a href="#cb348-135" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-136"><a href="#cb348-136" aria-hidden="true" tabindex="-1"></a><span class="in"># Dernier élément de chaque composante d'une liste</span></span>
<span id="cb348-137"><a href="#cb348-137" aria-hidden="true" tabindex="-1"></a><span class="in">liste &lt;- list(1:26, letters)</span></span>
<span id="cb348-138"><a href="#cb348-138" aria-hidden="true" tabindex="-1"></a><span class="in">lapply(liste, tail, 1)</span></span>
<span id="cb348-139"><a href="#cb348-139" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-140"><a href="#cb348-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-141"><a href="#cb348-141" aria-hidden="true" tabindex="-1"></a><span class="fu">## Les affectations</span></span>
<span id="cb348-142"><a href="#cb348-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-143"><a href="#cb348-143" aria-hidden="true" tabindex="-1"></a><span class="fu">### Généralités</span></span>
<span id="cb348-144"><a href="#cb348-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-145"><a href="#cb348-145" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-146"><a href="#cb348-146" aria-hidden="true" tabindex="-1"></a><span class="in"># Importance des espaces</span></span>
<span id="cb348-147"><a href="#cb348-147" aria-hidden="true" tabindex="-1"></a><span class="in">x&lt;-3</span></span>
<span id="cb348-148"><a href="#cb348-148" aria-hidden="true" tabindex="-1"></a><span class="in"># S'agit-il de ?</span></span>
<span id="cb348-149"><a href="#cb348-149" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- 3</span></span>
<span id="cb348-150"><a href="#cb348-150" aria-hidden="true" tabindex="-1"></a><span class="in"># Ou de ?</span></span>
<span id="cb348-151"><a href="#cb348-151" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt; -3</span></span>
<span id="cb348-152"><a href="#cb348-152" aria-hidden="true" tabindex="-1"></a><span class="in"># Il s'agit du premier cas !</span></span>
<span id="cb348-153"><a href="#cb348-153" aria-hidden="true" tabindex="-1"></a><span class="in">x</span></span>
<span id="cb348-154"><a href="#cb348-154" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-155"><a href="#cb348-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-156"><a href="#cb348-156" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-157"><a href="#cb348-157" aria-hidden="true" tabindex="-1"></a><span class="in"># Les {} permettent de réaliser une affectation (&lt;-) au sein d'un traitement plus complexe !</span></span>
<span id="cb348-158"><a href="#cb348-158" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple ici : sommer les positions paires multipliées par 2 et les positions impaires multipliées par 3</span></span>
<span id="cb348-159"><a href="#cb348-159" aria-hidden="true" tabindex="-1"></a><span class="in">sum({x &lt;- 1:6 ; x[1:length(x) %% 2 == 0] &lt;- x[1:length(x) %% 2 == 0] * 2 ; x[1:length(x) %% 2 != 0] &lt;- x[1:length(x) %% 2 != 0] * 3 ; x})</span></span>
<span id="cb348-160"><a href="#cb348-160" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-161"><a href="#cb348-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-162"><a href="#cb348-162" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-163"><a href="#cb348-163" aria-hidden="true" tabindex="-1"></a><span class="in"># Afficher ou non la valeur de l'objet affecté pendant l'affectation</span></span>
<span id="cb348-164"><a href="#cb348-164" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- pi</span></span>
<span id="cb348-165"><a href="#cb348-165" aria-hidden="true" tabindex="-1"></a><span class="in">(x &lt;- pi)</span></span>
<span id="cb348-166"><a href="#cb348-166" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-167"><a href="#cb348-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-168"><a href="#cb348-168" aria-hidden="true" tabindex="-1"></a><span class="fu">### Le comportement de l'opérateur `c()`</span></span>
<span id="cb348-169"><a href="#cb348-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-170"><a href="#cb348-170" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-171"><a href="#cb348-171" aria-hidden="true" tabindex="-1"></a><span class="in"># c() est instable : c(x, y) n'est pas forcément du même type que c(y, x)</span></span>
<span id="cb348-172"><a href="#cb348-172" aria-hidden="true" tabindex="-1"></a><span class="in"># format double</span></span>
<span id="cb348-173"><a href="#cb348-173" aria-hidden="true" tabindex="-1"></a><span class="in">c(NA, Sys.Date())</span></span>
<span id="cb348-174"><a href="#cb348-174" aria-hidden="true" tabindex="-1"></a><span class="in"># format Date</span></span>
<span id="cb348-175"><a href="#cb348-175" aria-hidden="true" tabindex="-1"></a><span class="in">c(Sys.Date(), NA)</span></span>
<span id="cb348-176"><a href="#cb348-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-177"><a href="#cb348-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-178"><a href="#cb348-178" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-179"><a href="#cb348-179" aria-hidden="true" tabindex="-1"></a><span class="in"># Combiner des dates et date-times avec c() conduit à des résultats potentiellement incorrects</span></span>
<span id="cb348-180"><a href="#cb348-180" aria-hidden="true" tabindex="-1"></a><span class="in">date &lt;- as.Date("2025-01-01")</span></span>
<span id="cb348-181"><a href="#cb348-181" aria-hidden="true" tabindex="-1"></a><span class="in">datetime &lt;- as.POSIXct("2025-01-01 09:00")</span></span>
<span id="cb348-182"><a href="#cb348-182" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb348-183"><a href="#cb348-183" aria-hidden="true" tabindex="-1"></a><span class="in">c(date, datetime)</span></span>
<span id="cb348-184"><a href="#cb348-184" aria-hidden="true" tabindex="-1"></a><span class="in"># Incorrect</span></span>
<span id="cb348-185"><a href="#cb348-185" aria-hidden="true" tabindex="-1"></a><span class="in">c(datetime, date)</span></span>
<span id="cb348-186"><a href="#cb348-186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-187"><a href="#cb348-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-188"><a href="#cb348-188" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-189"><a href="#cb348-189" aria-hidden="true" tabindex="-1"></a><span class="in"># Valeurs manquantes</span></span>
<span id="cb348-190"><a href="#cb348-190" aria-hidden="true" tabindex="-1"></a><span class="in"># Si le NA est placé avant, c() supprime tous les attributs</span></span>
<span id="cb348-191"><a href="#cb348-191" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple 1</span></span>
<span id="cb348-192"><a href="#cb348-192" aria-hidden="true" tabindex="-1"></a><span class="in">c(as.Date("2025-01-01"), NA)</span></span>
<span id="cb348-193"><a href="#cb348-193" aria-hidden="true" tabindex="-1"></a><span class="in">c(NA, as.Date("2025-01-01"))</span></span>
<span id="cb348-194"><a href="#cb348-194" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple 2</span></span>
<span id="cb348-195"><a href="#cb348-195" aria-hidden="true" tabindex="-1"></a><span class="in">c(NA, as.POSIXct("2025-01-01 09:00"))</span></span>
<span id="cb348-196"><a href="#cb348-196" aria-hidden="true" tabindex="-1"></a><span class="in">c(as.POSIXct("2025-01-01 09:00"), NA)</span></span>
<span id="cb348-197"><a href="#cb348-197" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-198"><a href="#cb348-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-199"><a href="#cb348-199" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-200"><a href="#cb348-200" aria-hidden="true" tabindex="-1"></a><span class="in"># c() convertit de character &gt; complex &gt; double &gt; integer &gt; logical</span></span>
<span id="cb348-201"><a href="#cb348-201" aria-hidden="true" tabindex="-1"></a><span class="in">c(FALSE, 1L, 2.5)</span></span>
<span id="cb348-202"><a href="#cb348-202" aria-hidden="true" tabindex="-1"></a><span class="in">c(FALSE, "x")</span></span>
<span id="cb348-203"><a href="#cb348-203" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-204"><a href="#cb348-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-205"><a href="#cb348-205" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-206"><a href="#cb348-206" aria-hidden="true" tabindex="-1"></a><span class="in"># Combiner 2 facteurs donne un integer</span></span>
<span id="cb348-207"><a href="#cb348-207" aria-hidden="true" tabindex="-1"></a><span class="in">c(factor("a"), factor("b"))</span></span>
<span id="cb348-208"><a href="#cb348-208" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-209"><a href="#cb348-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-210"><a href="#cb348-210" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-211"><a href="#cb348-211" aria-hidden="true" tabindex="-1"></a><span class="in"># Data frames</span></span>
<span id="cb348-212"><a href="#cb348-212" aria-hidden="true" tabindex="-1"></a><span class="in"># c() combines 2 data.frames dans une liste</span></span>
<span id="cb348-213"><a href="#cb348-213" aria-hidden="true" tabindex="-1"></a><span class="in">df1 &lt;- data.frame(x = 1)</span></span>
<span id="cb348-214"><a href="#cb348-214" aria-hidden="true" tabindex="-1"></a><span class="in">df2 &lt;- data.frame(x = 2)</span></span>
<span id="cb348-215"><a href="#cb348-215" aria-hidden="true" tabindex="-1"></a><span class="in">str(c(df1, df1))</span></span>
<span id="cb348-216"><a href="#cb348-216" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-217"><a href="#cb348-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-218"><a href="#cb348-218" aria-hidden="true" tabindex="-1"></a><span class="fu">## Les comparaisons</span></span>
<span id="cb348-219"><a href="#cb348-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-220"><a href="#cb348-220" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, error=TRUE}</span></span>
<span id="cb348-221"><a href="#cb348-221" aria-hidden="true" tabindex="-1"></a><span class="in"># Comparaisons multiples</span></span>
<span id="cb348-222"><a href="#cb348-222" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- 0.5</span></span>
<span id="cb348-223"><a href="#cb348-223" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb348-224"><a href="#cb348-224" aria-hidden="true" tabindex="-1"></a><span class="in">0 &lt; x &amp; x &lt; 1</span></span>
<span id="cb348-225"><a href="#cb348-225" aria-hidden="true" tabindex="-1"></a><span class="in"># Incorrect</span></span>
<span id="cb348-226"><a href="#cb348-226" aria-hidden="true" tabindex="-1"></a><span class="in">0 &lt; x &lt; 1</span></span>
<span id="cb348-227"><a href="#cb348-227" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-228"><a href="#cb348-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-229"><a href="#cb348-229" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-230"><a href="#cb348-230" aria-hidden="true" tabindex="-1"></a><span class="in"># Opérations mathématiques</span></span>
<span id="cb348-231"><a href="#cb348-231" aria-hidden="true" tabindex="-1"></a><span class="in"># Infini</span></span>
<span id="cb348-232"><a href="#cb348-232" aria-hidden="true" tabindex="-1"></a><span class="in">1/0</span></span>
<span id="cb348-233"><a href="#cb348-233" aria-hidden="true" tabindex="-1"></a><span class="in"># Nan = not a number</span></span>
<span id="cb348-234"><a href="#cb348-234" aria-hidden="true" tabindex="-1"></a><span class="in">0/0</span></span>
<span id="cb348-235"><a href="#cb348-235" aria-hidden="true" tabindex="-1"></a><span class="in">log(-1)</span></span>
<span id="cb348-236"><a href="#cb348-236" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-237"><a href="#cb348-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-238"><a href="#cb348-238" aria-hidden="true" tabindex="-1"></a><span class="fu">## Opérateurs de contrôle</span></span>
<span id="cb348-239"><a href="#cb348-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-240"><a href="#cb348-240" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-241"><a href="#cb348-241" aria-hidden="true" tabindex="-1"></a><span class="in"># Conditions if / else</span></span>
<span id="cb348-242"><a href="#cb348-242" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- 1</span></span>
<span id="cb348-243"><a href="#cb348-243" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-244"><a href="#cb348-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-245"><a href="#cb348-245" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-246"><a href="#cb348-246" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb348-247"><a href="#cb348-247" aria-hidden="true" tabindex="-1"></a><span class="in">if (identical(x, 1)) {</span></span>
<span id="cb348-248"><a href="#cb348-248" aria-hidden="true" tabindex="-1"></a><span class="in">print("x est égal à 1")</span></span>
<span id="cb348-249"><a href="#cb348-249" aria-hidden="true" tabindex="-1"></a><span class="in">} else {</span></span>
<span id="cb348-250"><a href="#cb348-250" aria-hidden="true" tabindex="-1"></a><span class="in">print("x est différent de 1")</span></span>
<span id="cb348-251"><a href="#cb348-251" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb348-252"><a href="#cb348-252" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-253"><a href="#cb348-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-254"><a href="#cb348-254" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-255"><a href="#cb348-255" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb348-256"><a href="#cb348-256" aria-hidden="true" tabindex="-1"></a><span class="in">if (identical(x, 1)) {print("x est égal à 1")</span></span>
<span id="cb348-257"><a href="#cb348-257" aria-hidden="true" tabindex="-1"></a><span class="in">} else {print("x est différent de 1")}</span></span>
<span id="cb348-258"><a href="#cb348-258" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-259"><a href="#cb348-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-260"><a href="#cb348-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-261"><a href="#cb348-261" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb348-262"><a href="#cb348-262" aria-hidden="true" tabindex="-1"></a><span class="in">if (identical(x, 1)) print("x est égal à 1") else</span></span>
<span id="cb348-263"><a href="#cb348-263" aria-hidden="true" tabindex="-1"></a><span class="in">print("x est différent de 1")</span></span>
<span id="cb348-264"><a href="#cb348-264" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-265"><a href="#cb348-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-266"><a href="#cb348-266" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-267"><a href="#cb348-267" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb348-268"><a href="#cb348-268" aria-hidden="true" tabindex="-1"></a><span class="in">if (identical(x, 1)) print("x est égal à 1") else print("x est différent de 1")</span></span>
<span id="cb348-269"><a href="#cb348-269" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-270"><a href="#cb348-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-271"><a href="#cb348-271" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, error=TRUE}</span></span>
<span id="cb348-272"><a href="#cb348-272" aria-hidden="true" tabindex="-1"></a><span class="in"># Incorrect</span></span>
<span id="cb348-273"><a href="#cb348-273" aria-hidden="true" tabindex="-1"></a><span class="in">if (identical(x, 1)) print("x est égal à 1")</span></span>
<span id="cb348-274"><a href="#cb348-274" aria-hidden="true" tabindex="-1"></a><span class="in">else print("x est différent de 1")</span></span>
<span id="cb348-275"><a href="#cb348-275" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-276"><a href="#cb348-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-277"><a href="#cb348-277" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-278"><a href="#cb348-278" aria-hidden="true" tabindex="-1"></a><span class="in"># Switch</span></span>
<span id="cb348-279"><a href="#cb348-279" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonctions et conditions if / else</span></span>
<span id="cb348-280"><a href="#cb348-280" aria-hidden="true" tabindex="-1"></a><span class="in">condition &lt;- function(langue = "Français") {</span></span>
<span id="cb348-281"><a href="#cb348-281" aria-hidden="true" tabindex="-1"></a><span class="in">if (langue == "Français") {</span></span>
<span id="cb348-282"><a href="#cb348-282" aria-hidden="true" tabindex="-1"></a><span class="in">"salut"</span></span>
<span id="cb348-283"><a href="#cb348-283" aria-hidden="true" tabindex="-1"></a><span class="in">} else if (langue == "Anglais") {</span></span>
<span id="cb348-284"><a href="#cb348-284" aria-hidden="true" tabindex="-1"></a><span class="in">"hello"</span></span>
<span id="cb348-285"><a href="#cb348-285" aria-hidden="true" tabindex="-1"></a><span class="in">} else if (langue == "Russe") {</span></span>
<span id="cb348-286"><a href="#cb348-286" aria-hidden="true" tabindex="-1"></a><span class="in">"привет"</span></span>
<span id="cb348-287"><a href="#cb348-287" aria-hidden="true" tabindex="-1"></a><span class="in">} else {</span></span>
<span id="cb348-288"><a href="#cb348-288" aria-hidden="true" tabindex="-1"></a><span class="in">stop("salut")</span></span>
<span id="cb348-289"><a href="#cb348-289" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb348-290"><a href="#cb348-290" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb348-291"><a href="#cb348-291" aria-hidden="true" tabindex="-1"></a><span class="in">condition("Anglais")</span></span>
<span id="cb348-292"><a href="#cb348-292" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-293"><a href="#cb348-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-294"><a href="#cb348-294" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-295"><a href="#cb348-295" aria-hidden="true" tabindex="-1"></a><span class="in"># Autre possibilité avec switch, mais à réserver aux variables caractères !</span></span>
<span id="cb348-296"><a href="#cb348-296" aria-hidden="true" tabindex="-1"></a><span class="in">condition &lt;- function(langue = "Français") {</span></span>
<span id="cb348-297"><a href="#cb348-297" aria-hidden="true" tabindex="-1"></a><span class="in">switch(langue,</span></span>
<span id="cb348-298"><a href="#cb348-298" aria-hidden="true" tabindex="-1"></a><span class="in">Français = "salut",</span></span>
<span id="cb348-299"><a href="#cb348-299" aria-hidden="true" tabindex="-1"></a><span class="in">Anglais = "hello",</span></span>
<span id="cb348-300"><a href="#cb348-300" aria-hidden="true" tabindex="-1"></a><span class="in">Russe = "привет",</span></span>
<span id="cb348-301"><a href="#cb348-301" aria-hidden="true" tabindex="-1"></a><span class="in">stop("salut")</span></span>
<span id="cb348-302"><a href="#cb348-302" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb348-303"><a href="#cb348-303" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb348-304"><a href="#cb348-304" aria-hidden="true" tabindex="-1"></a><span class="in">condition("Français")</span></span>
<span id="cb348-305"><a href="#cb348-305" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-306"><a href="#cb348-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-307"><a href="#cb348-307" aria-hidden="true" tabindex="-1"></a><span class="fu">## Les valeurs manquantes</span></span>
<span id="cb348-308"><a href="#cb348-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-309"><a href="#cb348-309" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-310"><a href="#cb348-310" aria-hidden="true" tabindex="-1"></a><span class="in"># Transformer les valeurs manquantes en 0</span></span>
<span id="cb348-311"><a href="#cb348-311" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- data.frame(X1 = c(1, NA, 2), X2 = c(NA, NA, 3))</span></span>
<span id="cb348-312"><a href="#cb348-312" aria-hidden="true" tabindex="-1"></a><span class="in">x</span></span>
<span id="cb348-313"><a href="#cb348-313" aria-hidden="true" tabindex="-1"></a><span class="in">x[is.na(x)] &lt;- 0</span></span>
<span id="cb348-314"><a href="#cb348-314" aria-hidden="true" tabindex="-1"></a><span class="in">x</span></span>
<span id="cb348-315"><a href="#cb348-315" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-316"><a href="#cb348-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-317"><a href="#cb348-317" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-318"><a href="#cb348-318" aria-hidden="true" tabindex="-1"></a><span class="in"># Pour les valeurs manquantes, toujours utiliser is.na et non ==</span></span>
<span id="cb348-319"><a href="#cb348-319" aria-hidden="true" tabindex="-1"></a><span class="in">NA == c(3, 1, 3, NA)</span></span>
<span id="cb348-320"><a href="#cb348-320" aria-hidden="true" tabindex="-1"></a><span class="in">is.na(c(3, 1, 3, NA))</span></span>
<span id="cb348-321"><a href="#cb348-321" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-322"><a href="#cb348-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-323"><a href="#cb348-323" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-324"><a href="#cb348-324" aria-hidden="true" tabindex="-1"></a><span class="in"># Utiliser %in% et non == pour vérifier une appartenance à plusieurs variables</span></span>
<span id="cb348-325"><a href="#cb348-325" aria-hidden="true" tabindex="-1"></a><span class="in">x1 &lt;- 1:6</span></span>
<span id="cb348-326"><a href="#cb348-326" aria-hidden="true" tabindex="-1"></a><span class="in">x1 == c(1, 5)</span></span>
<span id="cb348-327"><a href="#cb348-327" aria-hidden="true" tabindex="-1"></a><span class="in">x1 %in% c(1, 5)</span></span>
<span id="cb348-328"><a href="#cb348-328" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-329"><a href="#cb348-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-330"><a href="#cb348-330" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-331"><a href="#cb348-331" aria-hidden="true" tabindex="-1"></a><span class="in"># Sélection de données en cas de valeurs manquantes</span></span>
<span id="cb348-332"><a href="#cb348-332" aria-hidden="true" tabindex="-1"></a><span class="in">xna &lt;- c(1, NA, 3, 2, 4, 2)</span></span>
<span id="cb348-333"><a href="#cb348-333" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-334"><a href="#cb348-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-335"><a href="#cb348-335" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-336"><a href="#cb348-336" aria-hidden="true" tabindex="-1"></a><span class="in"># Avec ce code, les NA sont conservés</span></span>
<span id="cb348-337"><a href="#cb348-337" aria-hidden="true" tabindex="-1"></a><span class="in">xna[xna == 2]</span></span>
<span id="cb348-338"><a href="#cb348-338" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-339"><a href="#cb348-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-340"><a href="#cb348-340" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-341"><a href="#cb348-341" aria-hidden="true" tabindex="-1"></a><span class="in"># Code sans les NA</span></span>
<span id="cb348-342"><a href="#cb348-342" aria-hidden="true" tabindex="-1"></a><span class="in">xna[!is.na(xna) &amp; xna == 2]</span></span>
<span id="cb348-343"><a href="#cb348-343" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-344"><a href="#cb348-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-345"><a href="#cb348-345" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-346"><a href="#cb348-346" aria-hidden="true" tabindex="-1"></a><span class="in"># Code compact sans les NA</span></span>
<span id="cb348-347"><a href="#cb348-347" aria-hidden="true" tabindex="-1"></a><span class="in">xna[which(xna == 2)]</span></span>
<span id="cb348-348"><a href="#cb348-348" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-349"><a href="#cb348-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-350"><a href="#cb348-350" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-351"><a href="#cb348-351" aria-hidden="true" tabindex="-1"></a><span class="in"># Incidence des NA dans le calcul de statistiques !</span></span>
<span id="cb348-352"><a href="#cb348-352" aria-hidden="true" tabindex="-1"></a><span class="in"># Besoin de l'instruction na.rm = TRUE pour en supprimer l'incidence</span></span>
<span id="cb348-353"><a href="#cb348-353" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- c(1, 5, 6, NA, 8)</span></span>
<span id="cb348-354"><a href="#cb348-354" aria-hidden="true" tabindex="-1"></a><span class="in">mean(x)</span></span>
<span id="cb348-355"><a href="#cb348-355" aria-hidden="true" tabindex="-1"></a><span class="in">mean(x, na.rm = TRUE)</span></span>
<span id="cb348-356"><a href="#cb348-356" aria-hidden="true" tabindex="-1"></a><span class="in">max(x)</span></span>
<span id="cb348-357"><a href="#cb348-357" aria-hidden="true" tabindex="-1"></a><span class="in">max(x, na.rm = TRUE)</span></span>
<span id="cb348-358"><a href="#cb348-358" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-359"><a href="#cb348-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-360"><a href="#cb348-360" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-361"><a href="#cb348-361" aria-hidden="true" tabindex="-1"></a><span class="in"># Une moyenne de NA donne NaN (Not a Number) avec na.rm = TRUE !</span></span>
<span id="cb348-362"><a href="#cb348-362" aria-hidden="true" tabindex="-1"></a><span class="in">mean(c(NA, NA, NA), na.rm = TRUE)</span></span>
<span id="cb348-363"><a href="#cb348-363" aria-hidden="true" tabindex="-1"></a><span class="in"># Et donne NA avec na.rm = FALSE !</span></span>
<span id="cb348-364"><a href="#cb348-364" aria-hidden="true" tabindex="-1"></a><span class="in">mean(c(NA, NA, NA), na.rm = FALSE)</span></span>
<span id="cb348-365"><a href="#cb348-365" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-366"><a href="#cb348-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-367"><a href="#cb348-367" aria-hidden="true" tabindex="-1"></a><span class="fu">## Sélection d'éléments</span></span>
<span id="cb348-368"><a href="#cb348-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-369"><a href="#cb348-369" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-370"><a href="#cb348-370" aria-hidden="true" tabindex="-1"></a><span class="in"># Le 1er élément est numéroté 1 et non 0 comme dans Python</span></span>
<span id="cb348-371"><a href="#cb348-371" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- 1:3</span></span>
<span id="cb348-372"><a href="#cb348-372" aria-hidden="true" tabindex="-1"></a><span class="in">x[c(0, 4)] &lt;- c(-1, 9)</span></span>
<span id="cb348-373"><a href="#cb348-373" aria-hidden="true" tabindex="-1"></a><span class="in"># Marche !!</span></span>
<span id="cb348-374"><a href="#cb348-374" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in 0:3) print(x[i])</span></span>
<span id="cb348-375"><a href="#cb348-375" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-376"><a href="#cb348-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-377"><a href="#cb348-377" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-378"><a href="#cb348-378" aria-hidden="true" tabindex="-1"></a><span class="in"># Cas où les noms ne sont pas uniques</span></span>
<span id="cb348-379"><a href="#cb348-379" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- c(a = 1, b = 2, a = 3)</span></span>
<span id="cb348-380"><a href="#cb348-380" aria-hidden="true" tabindex="-1"></a><span class="in">x["a"]</span></span>
<span id="cb348-381"><a href="#cb348-381" aria-hidden="true" tabindex="-1"></a><span class="in">x[names(x) %in% "a"]</span></span>
<span id="cb348-382"><a href="#cb348-382" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-383"><a href="#cb348-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-384"><a href="#cb348-384" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-385"><a href="#cb348-385" aria-hidden="true" tabindex="-1"></a><span class="in"># Options drop = FALSE</span></span>
<span id="cb348-386"><a href="#cb348-386" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- data.frame(X1 = c(1,2), X2 = c(3,4), x3 = c(5,6))</span></span>
<span id="cb348-387"><a href="#cb348-387" aria-hidden="true" tabindex="-1"></a><span class="in">is.data.frame(x[, c(1,2)])</span></span>
<span id="cb348-388"><a href="#cb348-388" aria-hidden="true" tabindex="-1"></a><span class="in">is.data.frame(x[, c(1)])</span></span>
<span id="cb348-389"><a href="#cb348-389" aria-hidden="true" tabindex="-1"></a><span class="in">is.data.frame(x[, c(1), drop = FALSE])</span></span>
<span id="cb348-390"><a href="#cb348-390" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-391"><a href="#cb348-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-392"><a href="#cb348-392" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-393"><a href="#cb348-393" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonction subset</span></span>
<span id="cb348-394"><a href="#cb348-394" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- data.frame(x1 = c(1,2), x2 = c(3,4), x3 = c(5,6))</span></span>
<span id="cb348-395"><a href="#cb348-395" aria-hidden="true" tabindex="-1"></a><span class="in">subset(x, select = x1)</span></span>
<span id="cb348-396"><a href="#cb348-396" aria-hidden="true" tabindex="-1"></a><span class="in">subset(x, select = -x1)</span></span>
<span id="cb348-397"><a href="#cb348-397" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-398"><a href="#cb348-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-399"><a href="#cb348-399" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-400"><a href="#cb348-400" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb348-401"><a href="#cb348-401" aria-hidden="true" tabindex="-1"></a><span class="in">subset(x, x1 == 1)</span></span>
<span id="cb348-402"><a href="#cb348-402" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-403"><a href="#cb348-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-404"><a href="#cb348-404" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-405"><a href="#cb348-405" aria-hidden="true" tabindex="-1"></a><span class="in"># Incorrect</span></span>
<span id="cb348-406"><a href="#cb348-406" aria-hidden="true" tabindex="-1"></a><span class="in">subset(x, x1 = 1)</span></span>
<span id="cb348-407"><a href="#cb348-407" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-408"><a href="#cb348-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-409"><a href="#cb348-409" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, error=TRUE}</span></span>
<span id="cb348-410"><a href="#cb348-410" aria-hidden="true" tabindex="-1"></a><span class="in"># Référence à des noms de colonne non usuels</span></span>
<span id="cb348-411"><a href="#cb348-411" aria-hidden="true" tabindex="-1"></a><span class="in">df &lt;- data.frame(x = rnorm(5), y = runif(5))</span></span>
<span id="cb348-412"><a href="#cb348-412" aria-hidden="true" tabindex="-1"></a><span class="in">names(df) &lt;- 1:2</span></span>
<span id="cb348-413"><a href="#cb348-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-414"><a href="#cb348-414" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb348-415"><a href="#cb348-415" aria-hidden="true" tabindex="-1"></a><span class="in">df$`1`</span></span>
<span id="cb348-416"><a href="#cb348-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-417"><a href="#cb348-417" aria-hidden="true" tabindex="-1"></a><span class="in"># Incorrect</span></span>
<span id="cb348-418"><a href="#cb348-418" aria-hidden="true" tabindex="-1"></a><span class="in">df$1</span></span>
<span id="cb348-419"><a href="#cb348-419" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-420"><a href="#cb348-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-421"><a href="#cb348-421" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-422"><a href="#cb348-422" aria-hidden="true" tabindex="-1"></a><span class="in"># Utilisation de assign pour assigner une valeur à un objet en le désignant sous forme caractère</span></span>
<span id="cb348-423"><a href="#cb348-423" aria-hidden="true" tabindex="-1"></a><span class="in">assign('objet', 3:5)</span></span>
<span id="cb348-424"><a href="#cb348-424" aria-hidden="true" tabindex="-1"></a><span class="in">objet</span></span>
<span id="cb348-425"><a href="#cb348-425" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in 1:5) assign(paste('objet', i, sep = '_'), i)</span></span>
<span id="cb348-426"><a href="#cb348-426" aria-hidden="true" tabindex="-1"></a><span class="in">objet_5</span></span>
<span id="cb348-427"><a href="#cb348-427" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-428"><a href="#cb348-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-429"><a href="#cb348-429" aria-hidden="true" tabindex="-1"></a><span class="fu"># Les grandes caractéristiques du langage `R`</span></span>
<span id="cb348-430"><a href="#cb348-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-431"><a href="#cb348-431" aria-hidden="true" tabindex="-1"></a><span class="fu">## Principe de vectorisation</span></span>
<span id="cb348-432"><a href="#cb348-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-433"><a href="#cb348-433" aria-hidden="true" tabindex="-1"></a>Une fonction vectorisée s'applique à tous les éléments du vecteur !!</span>
<span id="cb348-434"><a href="#cb348-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-435"><a href="#cb348-435" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-436"><a href="#cb348-436" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple de vecteur</span></span>
<span id="cb348-437"><a href="#cb348-437" aria-hidden="true" tabindex="-1"></a><span class="in">valeurs &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)</span></span>
<span id="cb348-438"><a href="#cb348-438" aria-hidden="true" tabindex="-1"></a><span class="in">valeurs &lt;- 1:10</span></span>
<span id="cb348-439"><a href="#cb348-439" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-440"><a href="#cb348-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-441"><a href="#cb348-441" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-442"><a href="#cb348-442" aria-hidden="true" tabindex="-1"></a><span class="in"># Valeurs au carré</span></span>
<span id="cb348-443"><a href="#cb348-443" aria-hidden="true" tabindex="-1"></a><span class="in">valeurs ** 2</span></span>
<span id="cb348-444"><a href="#cb348-444" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-445"><a href="#cb348-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-446"><a href="#cb348-446" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-447"><a href="#cb348-447" aria-hidden="true" tabindex="-1"></a><span class="in"># logarithme des valeurs</span></span>
<span id="cb348-448"><a href="#cb348-448" aria-hidden="true" tabindex="-1"></a><span class="in">log(valeurs)</span></span>
<span id="cb348-449"><a href="#cb348-449" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-450"><a href="#cb348-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-451"><a href="#cb348-451" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-452"><a href="#cb348-452" aria-hidden="true" tabindex="-1"></a><span class="in"># Maximum des valeurs</span></span>
<span id="cb348-453"><a href="#cb348-453" aria-hidden="true" tabindex="-1"></a><span class="in">max(valeurs)</span></span>
<span id="cb348-454"><a href="#cb348-454" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-455"><a href="#cb348-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-456"><a href="#cb348-456" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-457"><a href="#cb348-457" aria-hidden="true" tabindex="-1"></a><span class="in"># Limite des valeurs</span></span>
<span id="cb348-458"><a href="#cb348-458" aria-hidden="true" tabindex="-1"></a><span class="in">range(valeurs)</span></span>
<span id="cb348-459"><a href="#cb348-459" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-460"><a href="#cb348-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-461"><a href="#cb348-461" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-462"><a href="#cb348-462" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb348-463"><a href="#cb348-463" aria-hidden="true" tabindex="-1"></a><span class="in">mean(valeurs)</span></span>
<span id="cb348-464"><a href="#cb348-464" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-465"><a href="#cb348-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-466"><a href="#cb348-466" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-467"><a href="#cb348-467" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb348-468"><a href="#cb348-468" aria-hidden="true" tabindex="-1"></a><span class="in">mean(c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10))</span></span>
<span id="cb348-469"><a href="#cb348-469" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-470"><a href="#cb348-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-471"><a href="#cb348-471" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-472"><a href="#cb348-472" aria-hidden="true" tabindex="-1"></a><span class="in"># Inattendu</span></span>
<span id="cb348-473"><a href="#cb348-473" aria-hidden="true" tabindex="-1"></a><span class="in">mean(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)</span></span>
<span id="cb348-474"><a href="#cb348-474" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-475"><a href="#cb348-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-476"><a href="#cb348-476" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-477"><a href="#cb348-477" aria-hidden="true" tabindex="-1"></a><span class="in"># Attention aux parenthèses !</span></span>
<span id="cb348-478"><a href="#cb348-478" aria-hidden="true" tabindex="-1"></a><span class="in">n &lt;- 10</span></span>
<span id="cb348-479"><a href="#cb348-479" aria-hidden="true" tabindex="-1"></a><span class="in"># Inattendu ! Correspond à (1-1, 2-1, 3-1, ..., 10-1)</span></span>
<span id="cb348-480"><a href="#cb348-480" aria-hidden="true" tabindex="-1"></a><span class="in">1:n-1</span></span>
<span id="cb348-481"><a href="#cb348-481" aria-hidden="true" tabindex="-1"></a><span class="in"># Correct</span></span>
<span id="cb348-482"><a href="#cb348-482" aria-hidden="true" tabindex="-1"></a><span class="in">1:(n-1)</span></span>
<span id="cb348-483"><a href="#cb348-483" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-484"><a href="#cb348-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-485"><a href="#cb348-485" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-486"><a href="#cb348-486" aria-hidden="true" tabindex="-1"></a><span class="in"># Minimum ou maximum élément par élément</span></span>
<span id="cb348-487"><a href="#cb348-487" aria-hidden="true" tabindex="-1"></a><span class="in">x1 &lt;- c(1, 2, 5, 6, 8)</span></span>
<span id="cb348-488"><a href="#cb348-488" aria-hidden="true" tabindex="-1"></a><span class="in">x2 &lt;- c(4, 0, 7, 2, 1)</span></span>
<span id="cb348-489"><a href="#cb348-489" aria-hidden="true" tabindex="-1"></a><span class="in"># Minimum : 2 possibilités</span></span>
<span id="cb348-490"><a href="#cb348-490" aria-hidden="true" tabindex="-1"></a><span class="in">pmin(x1, x2)</span></span>
<span id="cb348-491"><a href="#cb348-491" aria-hidden="true" tabindex="-1"></a><span class="in">mapply(min, x1, x2)</span></span>
<span id="cb348-492"><a href="#cb348-492" aria-hidden="true" tabindex="-1"></a><span class="in"># Maximum : 2 possibilités</span></span>
<span id="cb348-493"><a href="#cb348-493" aria-hidden="true" tabindex="-1"></a><span class="in">pmax(x1, x2)</span></span>
<span id="cb348-494"><a href="#cb348-494" aria-hidden="true" tabindex="-1"></a><span class="in">mapply(max, x1, x2)</span></span>
<span id="cb348-495"><a href="#cb348-495" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-496"><a href="#cb348-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-497"><a href="#cb348-497" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-498"><a href="#cb348-498" aria-hidden="true" tabindex="-1"></a><span class="in"># Calculer (x - min) / (max - min) pour chaque élément x d'un vecteur</span></span>
<span id="cb348-499"><a href="#cb348-499" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- c(1,2,3)</span></span>
<span id="cb348-500"><a href="#cb348-500" aria-hidden="true" tabindex="-1"></a><span class="in">sapply(x, function(xi, mn, mx) {(xi - mn) / (mx - mn)}, mn = min(x), mx = max(x))</span></span>
<span id="cb348-501"><a href="#cb348-501" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-502"><a href="#cb348-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-503"><a href="#cb348-503" aria-hidden="true" tabindex="-1"></a><span class="fu">## Principe de coercion</span></span>
<span id="cb348-504"><a href="#cb348-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-505"><a href="#cb348-505" aria-hidden="true" tabindex="-1"></a>Dans les comparaisons, les objets R sont successivement convertis en logical, integer, numeric, complex et character, jusqu'à ce que la comparaison puisse se faire.</span>
<span id="cb348-506"><a href="#cb348-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-507"><a href="#cb348-507" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-508"><a href="#cb348-508" aria-hidden="true" tabindex="-1"></a><span class="in"># TRUE / FALSE est transformé en integer (1 / 0)</span></span>
<span id="cb348-509"><a href="#cb348-509" aria-hidden="true" tabindex="-1"></a><span class="in">TRUE == 1</span></span>
<span id="cb348-510"><a href="#cb348-510" aria-hidden="true" tabindex="-1"></a><span class="in">TRUE == 2</span></span>
<span id="cb348-511"><a href="#cb348-511" aria-hidden="true" tabindex="-1"></a><span class="in">FALSE == 0</span></span>
<span id="cb348-512"><a href="#cb348-512" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-513"><a href="#cb348-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-514"><a href="#cb348-514" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-515"><a href="#cb348-515" aria-hidden="true" tabindex="-1"></a><span class="in"># TRUE est convertit en character</span></span>
<span id="cb348-516"><a href="#cb348-516" aria-hidden="true" tabindex="-1"></a><span class="in">TRUE == "1"</span></span>
<span id="cb348-517"><a href="#cb348-517" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-518"><a href="#cb348-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-519"><a href="#cb348-519" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-520"><a href="#cb348-520" aria-hidden="true" tabindex="-1"></a><span class="in"># 5 est convertit en character</span></span>
<span id="cb348-521"><a href="#cb348-521" aria-hidden="true" tabindex="-1"></a><span class="in">5 &lt; '7'</span></span>
<span id="cb348-522"><a href="#cb348-522" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-523"><a href="#cb348-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-524"><a href="#cb348-524" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-525"><a href="#cb348-525" aria-hidden="true" tabindex="-1"></a><span class="in"># 50 est convertit en character</span></span>
<span id="cb348-526"><a href="#cb348-526" aria-hidden="true" tabindex="-1"></a><span class="in">50 &lt; '7'</span></span>
<span id="cb348-527"><a href="#cb348-527" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-528"><a href="#cb348-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-529"><a href="#cb348-529" aria-hidden="true" tabindex="-1"></a><span class="fu">## Principe de recycling</span></span>
<span id="cb348-530"><a href="#cb348-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-531"><a href="#cb348-531" aria-hidden="true" tabindex="-1"></a>En <span class="in">`R Base`</span>, quand 2 vecteurs ne sont pas de même taille, le plus court vecteur est recyclé pour être de même taille que le plus long vecteur.</span>
<span id="cb348-532"><a href="#cb348-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-535"><a href="#cb348-535" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb348-536"><a href="#cb348-536" aria-hidden="true" tabindex="-1"></a><span class="co"># Si la taille du plus long vecteur est un entier multiple de la taile du plus court, R n'affiche pas d'avertissement</span></span>
<span id="cb348-537"><a href="#cb348-537" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb348-538"><a href="#cb348-538" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb348-539"><a href="#cb348-539" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> y</span>
<span id="cb348-540"><a href="#cb348-540" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-541"><a href="#cb348-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-544"><a href="#cb348-544" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb348-545"><a href="#cb348-545" aria-hidden="true" tabindex="-1"></a><span class="co"># Si la taille du plus long vecteur n'est pas un entier multiple de la taille du plus court, R affiche un avertissement</span></span>
<span id="cb348-546"><a href="#cb348-546" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb348-547"><a href="#cb348-547" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb348-548"><a href="#cb348-548" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> y</span>
<span id="cb348-549"><a href="#cb348-549" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-550"><a href="#cb348-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-553"><a href="#cb348-553" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb348-554"><a href="#cb348-554" aria-hidden="true" tabindex="-1"></a><span class="co"># Mais certaines fonctions pratiquent le recycling sans avertissement</span></span>
<span id="cb348-555"><a href="#cb348-555" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb348-556"><a href="#cb348-556" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb348-557"><a href="#cb348-557" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-558"><a href="#cb348-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-561"><a href="#cb348-561" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb348-562"><a href="#cb348-562" aria-hidden="true" tabindex="-1"></a><span class="co"># Et data.frame() renvoie une erreur</span></span>
<span id="cb348-563"><a href="#cb348-563" aria-hidden="true" tabindex="-1"></a><span class="co">#data.frame(1:2, 1:3)</span></span>
<span id="cb348-564"><a href="#cb348-564" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-565"><a href="#cb348-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-566"><a href="#cb348-566" aria-hidden="true" tabindex="-1"></a><span class="fu"># Le saviez-vous ?</span></span>
<span id="cb348-567"><a href="#cb348-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-568"><a href="#cb348-568" aria-hidden="true" tabindex="-1"></a><span class="fu">## Effets des calculs en virgule flottante</span></span>
<span id="cb348-569"><a href="#cb348-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-570"><a href="#cb348-570" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-571"><a href="#cb348-571" aria-hidden="true" tabindex="-1"></a><span class="in">sqrt(2) ^ 2 == 2</span></span>
<span id="cb348-572"><a href="#cb348-572" aria-hidden="true" tabindex="-1"></a><span class="in">1 / 49 * 49 == 1</span></span>
<span id="cb348-573"><a href="#cb348-573" aria-hidden="true" tabindex="-1"></a><span class="in">.1 == .3 / 3</span></span>
<span id="cb348-574"><a href="#cb348-574" aria-hidden="true" tabindex="-1"></a><span class="in">seq(0, 1, by=.1) == .3</span></span>
<span id="cb348-575"><a href="#cb348-575" aria-hidden="true" tabindex="-1"></a><span class="in">unique(c(.3, .4 - .1, .5 - .2, .6 - .3, .7 - .4))</span></span>
<span id="cb348-576"><a href="#cb348-576" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-577"><a href="#cb348-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-578"><a href="#cb348-578" aria-hidden="true" tabindex="-1"></a><span class="fu">## Obtenir de l'informations sur `R`</span></span>
<span id="cb348-579"><a href="#cb348-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-580"><a href="#cb348-580" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE, results='hide'}</span></span>
<span id="cb348-581"><a href="#cb348-581" aria-hidden="true" tabindex="-1"></a><span class="in"># Informations sur la session de R</span></span>
<span id="cb348-582"><a href="#cb348-582" aria-hidden="true" tabindex="-1"></a><span class="in">sessionInfo()</span></span>
<span id="cb348-583"><a href="#cb348-583" aria-hidden="true" tabindex="-1"></a><span class="in">Sys.info()</span></span>
<span id="cb348-584"><a href="#cb348-584" aria-hidden="true" tabindex="-1"></a><span class="in">.Platform</span></span>
<span id="cb348-585"><a href="#cb348-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-586"><a href="#cb348-586" aria-hidden="true" tabindex="-1"></a><span class="in"># Version de R</span></span>
<span id="cb348-587"><a href="#cb348-587" aria-hidden="true" tabindex="-1"></a><span class="in">R.version.string</span></span>
<span id="cb348-588"><a href="#cb348-588" aria-hidden="true" tabindex="-1"></a><span class="in">getRversion()</span></span>
<span id="cb348-589"><a href="#cb348-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-590"><a href="#cb348-590" aria-hidden="true" tabindex="-1"></a><span class="in"># Lien vers le bureau de l'utilisateur</span></span>
<span id="cb348-591"><a href="#cb348-591" aria-hidden="true" tabindex="-1"></a><span class="in">file.path(Sys.getenv("USERPROFILE"),"Desktop")</span></span>
<span id="cb348-592"><a href="#cb348-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-593"><a href="#cb348-593" aria-hidden="true" tabindex="-1"></a><span class="in"># Chemin de l'exécutable R est-il installé ?</span></span>
<span id="cb348-594"><a href="#cb348-594" aria-hidden="true" tabindex="-1"></a><span class="in">R.home("bin")</span></span>
<span id="cb348-595"><a href="#cb348-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-596"><a href="#cb348-596" aria-hidden="true" tabindex="-1"></a><span class="in"># Où sont installés les packages R</span></span>
<span id="cb348-597"><a href="#cb348-597" aria-hidden="true" tabindex="-1"></a><span class="in">.libPaths()</span></span>
<span id="cb348-598"><a href="#cb348-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-599"><a href="#cb348-599" aria-hidden="true" tabindex="-1"></a><span class="in"># Version d'un package installé (ici openxlsx)</span></span>
<span id="cb348-600"><a href="#cb348-600" aria-hidden="true" tabindex="-1"></a><span class="in"># packageVersion("openxlsx")</span></span>
<span id="cb348-601"><a href="#cb348-601" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-602"><a href="#cb348-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-603"><a href="#cb348-603" aria-hidden="true" tabindex="-1"></a><span class="fu">## Le pipe sur R</span></span>
<span id="cb348-604"><a href="#cb348-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-605"><a href="#cb348-605" aria-hidden="true" tabindex="-1"></a>Cet opérateur permet d'enchaîner les opérations et d'avoir un code plus lisible.</span>
<span id="cb348-606"><a href="#cb348-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-607"><a href="#cb348-607" aria-hidden="true" tabindex="-1"></a>Il existe différents types :</span>
<span id="cb348-608"><a href="#cb348-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-609"><a href="#cb348-609" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Le pipe de Rbase :** <span class="in">`|&gt;`</span></span>
<span id="cb348-610"><a href="#cb348-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-611"><a href="#cb348-611" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Le pipe du tidyverse :** <span class="in">`%&gt;%`</span></span>
<span id="cb348-612"><a href="#cb348-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-613"><a href="#cb348-613" aria-hidden="true" tabindex="-1"></a>Les deux pipes fonctionnent de la même manière mais diffèrent sur les points suivants :</span>
<span id="cb348-614"><a href="#cb348-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-615"><a href="#cb348-615" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb348-616"><a href="#cb348-616" aria-hidden="true" tabindex="-1"></a>| Thème                                         | <span class="in">`|&gt;`</span>                      | <span class="in">`%&gt;%`</span>                                                                 |</span>
<span id="cb348-617"><a href="#cb348-617" aria-hidden="true" tabindex="-1"></a>+===============================================+===========================+=======================================================================+</span>
<span id="cb348-618"><a href="#cb348-618" aria-hidden="true" tabindex="-1"></a>| Placeholder (pour indiquer où placer l'objet) | <span class="in">`_`</span>                       | <span class="in">`.`</span>                                                                   |</span>
<span id="cb348-619"><a href="#cb348-619" aria-hidden="true" tabindex="-1"></a>|                                               |                           |                                                                       |</span>
<span id="cb348-620"><a href="#cb348-620" aria-hidden="true" tabindex="-1"></a>|                                               | <span class="in">`x |&gt; f(y, a = _)`</span>        | <span class="in">`x %&gt;% f(y, a = .)`</span>                                                   |</span>
<span id="cb348-621"><a href="#cb348-621" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb348-622"><a href="#cb348-622" aria-hidden="true" tabindex="-1"></a>| Package                                       | Aucun : directement sur R | Magrittr (pipe disponible lorsqu'on effectue <span class="in">`library(tidyverse)`</span>) \| |</span>
<span id="cb348-623"><a href="#cb348-623" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb348-624"><a href="#cb348-624" aria-hidden="true" tabindex="-1"></a>| Fonction                                      | Impossible                | Possible                                                              |</span>
<span id="cb348-625"><a href="#cb348-625" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb348-626"><a href="#cb348-626" aria-hidden="true" tabindex="-1"></a>| Temps de calcul                               | Rapide                    | Plus lent                                                             |</span>
<span id="cb348-627"><a href="#cb348-627" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb348-628"><a href="#cb348-628" aria-hidden="true" tabindex="-1"></a>| Opérateurs                                    | <span class="in">`|&gt;`</span>                      | <span class="in">`%&gt;%`</span> <span class="in">`%&lt;&gt;%`</span> <span class="in">`%$%`</span> <span class="in">`%!&gt;%`</span> <span class="in">`%T&gt;%`</span>                                      |</span>
<span id="cb348-629"><a href="#cb348-629" aria-hidden="true" tabindex="-1"></a>+-----------------------------------------------+---------------------------+-----------------------------------------------------------------------+</span>
<span id="cb348-630"><a href="#cb348-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-631"><a href="#cb348-631" aria-hidden="true" tabindex="-1"></a>*Source* :</span>
<span id="cb348-632"><a href="#cb348-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-633"><a href="#cb348-633" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="ot">&lt;https://larmarange.github.io/guide-R/manipulation/pipe.html#le-pipe-natif-de-r&gt;</span></span>
<span id="cb348-634"><a href="#cb348-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-635"><a href="#cb348-635" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conseils divers</span></span>
<span id="cb348-636"><a href="#cb348-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-637"><a href="#cb348-637" aria-hidden="true" tabindex="-1"></a>Il est déconseillé de nommer des variables temporaires <span class="in">`var`</span>, car ce nom désigne la fonction permettant de calculer une variance en <span class="in">`R`</span>.</span>
<span id="cb348-638"><a href="#cb348-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-639"><a href="#cb348-639" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-640"><a href="#cb348-640" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple : variance d'un échantillon aléatoire de 1000 observations tiré d'une loi normale centrée réduite</span></span>
<span id="cb348-641"><a href="#cb348-641" aria-hidden="true" tabindex="-1"></a><span class="in">var(rnorm(1000))</span></span>
<span id="cb348-642"><a href="#cb348-642" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-643"><a href="#cb348-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-644"><a href="#cb348-644" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-645"><a href="#cb348-645" aria-hidden="true" tabindex="-1"></a><span class="in"># Le format en résultat de sapply est imprévisible</span></span>
<span id="cb348-646"><a href="#cb348-646" aria-hidden="true" tabindex="-1"></a><span class="in"># integer</span></span>
<span id="cb348-647"><a href="#cb348-647" aria-hidden="true" tabindex="-1"></a><span class="in">sapply(1L, function(x) c(x, x))</span></span>
<span id="cb348-648"><a href="#cb348-648" aria-hidden="true" tabindex="-1"></a><span class="in"># list</span></span>
<span id="cb348-649"><a href="#cb348-649" aria-hidden="true" tabindex="-1"></a><span class="in">sapply(integer(), function(x) c(x, x))</span></span>
<span id="cb348-650"><a href="#cb348-650" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-651"><a href="#cb348-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-652"><a href="#cb348-652" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-653"><a href="#cb348-653" aria-hidden="true" tabindex="-1"></a><span class="in"># Le résultat de ifelse() dépend du format de la condition</span></span>
<span id="cb348-654"><a href="#cb348-654" aria-hidden="true" tabindex="-1"></a><span class="in"># logical</span></span>
<span id="cb348-655"><a href="#cb348-655" aria-hidden="true" tabindex="-1"></a><span class="in">ifelse(NA, 1L, 1L)</span></span>
<span id="cb348-656"><a href="#cb348-656" aria-hidden="true" tabindex="-1"></a><span class="in"># integer</span></span>
<span id="cb348-657"><a href="#cb348-657" aria-hidden="true" tabindex="-1"></a><span class="in">ifelse(FALSE, 1L, 1L)</span></span>
<span id="cb348-658"><a href="#cb348-658" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-659"><a href="#cb348-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-660"><a href="#cb348-660" aria-hidden="true" tabindex="-1"></a>La fonction <span class="in">`if`</span> utilisée sans <span class="in">`else`</span> renvoie <span class="in">`NULL`</span> si la condition est <span class="in">`FALSE`</span>. Ceci permet d'écrire de façon élégante des conditions simples. Par exemple, prendre en compte un s final à un nom seulement si la valeur est strictement supérieure à 1 :</span>
<span id="cb348-661"><a href="#cb348-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-662"><a href="#cb348-662" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-663"><a href="#cb348-663" aria-hidden="true" tabindex="-1"></a><span class="in">NombreDeLignes &lt;- function(baseDeDonnees) {</span></span>
<span id="cb348-664"><a href="#cb348-664" aria-hidden="true" tabindex="-1"></a><span class="in">  ligne &lt;- nrow(baseDeDonnees)</span></span>
<span id="cb348-665"><a href="#cb348-665" aria-hidden="true" tabindex="-1"></a><span class="in">  paste0(ligne, " ligne", if (ligne &gt; 1) "s")</span></span>
<span id="cb348-666"><a href="#cb348-666" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb348-667"><a href="#cb348-667" aria-hidden="true" tabindex="-1"></a><span class="in">NombreDeLignes(mtcars)</span></span>
<span id="cb348-668"><a href="#cb348-668" aria-hidden="true" tabindex="-1"></a><span class="in">NombreDeLignes(mtcars[1,])</span></span>
<span id="cb348-669"><a href="#cb348-669" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-670"><a href="#cb348-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-671"><a href="#cb348-671" aria-hidden="true" tabindex="-1"></a>Pré-allouer un vecteur de dimension 5 :</span>
<span id="cb348-672"><a href="#cb348-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-673"><a href="#cb348-673" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-674"><a href="#cb348-674" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- rep(NA, 5)</span></span>
<span id="cb348-675"><a href="#cb348-675" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-676"><a href="#cb348-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-677"><a href="#cb348-677" aria-hidden="true" tabindex="-1"></a><span class="fu">## List-comprehensions en `R`</span></span>
<span id="cb348-678"><a href="#cb348-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-679"><a href="#cb348-679" aria-hidden="true" tabindex="-1"></a>Equivalent des list-comprehensions de <span class="in">`Python`</span> en <span class="in">`R`</span> !</span>
<span id="cb348-680"><a href="#cb348-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-681"><a href="#cb348-681" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-682"><a href="#cb348-682" aria-hidden="true" tabindex="-1"></a><span class="in"># Equivalent des list-comprehensions de Python en R</span></span>
<span id="cb348-683"><a href="#cb348-683" aria-hidden="true" tabindex="-1"></a><span class="in"># Somme des entiers de 1 à 1 000 multiples de 3 ou 5, en une ligne !</span></span>
<span id="cb348-684"><a href="#cb348-684" aria-hidden="true" tabindex="-1"></a><span class="in"># 4 manières de faire</span></span>
<span id="cb348-685"><a href="#cb348-685" aria-hidden="true" tabindex="-1"></a><span class="in">sum({l &lt;- 1:1000 ; l[l %% 3 == 0 | l %% 5 == 0]})</span></span>
<span id="cb348-686"><a href="#cb348-686" aria-hidden="true" tabindex="-1"></a><span class="in">sum({l &lt;- 1:1000 ; l[seq_along(l) %% 3 == 0 | seq_along(l) %% 5 == 0]})</span></span>
<span id="cb348-687"><a href="#cb348-687" aria-hidden="true" tabindex="-1"></a><span class="in">sum(l&lt;-(1:1000)[l %% 3 == 0 | l %% 5 == 0])</span></span>
<span id="cb348-688"><a href="#cb348-688" aria-hidden="true" tabindex="-1"></a><span class="in">sum((1:1000)[(1:1000 %% 3) == 0 | (1:1000 %% 5) == 0])</span></span>
<span id="cb348-689"><a href="#cb348-689" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-690"><a href="#cb348-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-691"><a href="#cb348-691" aria-hidden="true" tabindex="-1"></a><span class="fu"># Fonctions utiles</span></span>
<span id="cb348-692"><a href="#cb348-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-693"><a href="#cb348-693" aria-hidden="true" tabindex="-1"></a><span class="fu">## Ramasse-miettes (Garbage Collector)</span></span>
<span id="cb348-694"><a href="#cb348-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-695"><a href="#cb348-695" aria-hidden="true" tabindex="-1"></a>Si la mémoire vive de l'ordinateur est saturée, on peut essayer de la "purger" en utilisant la fonction <span class="in">`gc()`</span> de <span class="in">`R`</span>.</span>
<span id="cb348-696"><a href="#cb348-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-697"><a href="#cb348-697" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-698"><a href="#cb348-698" aria-hidden="true" tabindex="-1"></a><span class="in">gc()</span></span>
<span id="cb348-699"><a href="#cb348-699" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-700"><a href="#cb348-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-701"><a href="#cb348-701" aria-hidden="true" tabindex="-1"></a><span class="fu">## La fonction `subset()`</span></span>
<span id="cb348-702"><a href="#cb348-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-703"><a href="#cb348-703" aria-hidden="true" tabindex="-1"></a>La fonction <span class="in">`subset()`</span> présente deux intérêts par rapport à la sélection avec <span class="in">`[`</span> :</span>
<span id="cb348-704"><a href="#cb348-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-705"><a href="#cb348-705" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>les lignes où la condition évaluée est <span class="in">`NA`</span> sont retirées :</span>
<span id="cb348-706"><a href="#cb348-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-707"><a href="#cb348-707" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-708"><a href="#cb348-708" aria-hidden="true" tabindex="-1"></a><span class="in">exemple_subset &lt;- data.frame(x = c(1, 2, NA), y = c("a", "b", "c"))</span></span>
<span id="cb348-709"><a href="#cb348-709" aria-hidden="true" tabindex="-1"></a><span class="in"># Avec []</span></span>
<span id="cb348-710"><a href="#cb348-710" aria-hidden="true" tabindex="-1"></a><span class="in">exemple_subset[exemple_subset$x == 1, ]</span></span>
<span id="cb348-711"><a href="#cb348-711" aria-hidden="true" tabindex="-1"></a><span class="in"># Avec subset()</span></span>
<span id="cb348-712"><a href="#cb348-712" aria-hidden="true" tabindex="-1"></a><span class="in">subset(exemple_subset, x == 1)</span></span>
<span id="cb348-713"><a href="#cb348-713" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-714"><a href="#cb348-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-715"><a href="#cb348-715" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>l'option par défaut est <span class="in">`drop = FALSE`</span>, ce qui garantit que la base de résultat est un dataframe :</span>
<span id="cb348-716"><a href="#cb348-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-717"><a href="#cb348-717" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-718"><a href="#cb348-718" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb348-719"><a href="#cb348-719" aria-hidden="true" tabindex="-1"></a><span class="in">exemple_subset &lt;- data.frame(x = c(1, 2, NA), y = c("a", "b", "c"))</span></span>
<span id="cb348-720"><a href="#cb348-720" aria-hidden="true" tabindex="-1"></a><span class="in"># Avec []</span></span>
<span id="cb348-721"><a href="#cb348-721" aria-hidden="true" tabindex="-1"></a><span class="in">exemple_subset[exemple_subset$x == 1, "x"] %&gt;% is.data.frame()</span></span>
<span id="cb348-722"><a href="#cb348-722" aria-hidden="true" tabindex="-1"></a><span class="in"># Avec subset()</span></span>
<span id="cb348-723"><a href="#cb348-723" aria-hidden="true" tabindex="-1"></a><span class="in">subset(exemple_subset, x == 1, x) %&gt;% is.data.frame()</span></span>
<span id="cb348-724"><a href="#cb348-724" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-725"><a href="#cb348-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-726"><a href="#cb348-726" aria-hidden="true" tabindex="-1"></a><span class="fu">## Les fonctions `try()` et `tryCatch()`</span></span>
<span id="cb348-727"><a href="#cb348-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-728"><a href="#cb348-728" aria-hidden="true" tabindex="-1"></a>La fonction <span class="in">`try()`</span> permet de poursuivre le programme malgré la survenue d'une erreur. Dans l'exemple suivant, le programme affiche bien "Suite du programme" malgré l'erreur au code précédent.</span>
<span id="cb348-729"><a href="#cb348-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-730"><a href="#cb348-730" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-731"><a href="#cb348-731" aria-hidden="true" tabindex="-1"></a><span class="in">try(log("x")) ; print("Suite du programme")</span></span>
<span id="cb348-732"><a href="#cb348-732" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-733"><a href="#cb348-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-734"><a href="#cb348-734" aria-hidden="true" tabindex="-1"></a>La fonction <span class="in">`tryCatch()`</span> est plus élaborée, et permet de programmer une valeur par défaut en cas d'erreur.</span>
<span id="cb348-735"><a href="#cb348-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-736"><a href="#cb348-736" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-737"><a href="#cb348-737" aria-hidden="true" tabindex="-1"></a><span class="in">FonctionLog &lt;- function(x) {</span></span>
<span id="cb348-738"><a href="#cb348-738" aria-hidden="true" tabindex="-1"></a><span class="in">  tryCatch(</span></span>
<span id="cb348-739"><a href="#cb348-739" aria-hidden="true" tabindex="-1"></a><span class="in">    error = function(cnd) NA,</span></span>
<span id="cb348-740"><a href="#cb348-740" aria-hidden="true" tabindex="-1"></a><span class="in">    log(x)</span></span>
<span id="cb348-741"><a href="#cb348-741" aria-hidden="true" tabindex="-1"></a><span class="in">  )</span></span>
<span id="cb348-742"><a href="#cb348-742" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb348-743"><a href="#cb348-743" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-744"><a href="#cb348-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-745"><a href="#cb348-745" aria-hidden="true" tabindex="-1"></a>La fonction renvoie un <span class="in">`NA`</span> si la fonction <span class="in">`log()`</span> ne peut pas être appliquée, comme c'est le cas sur l'exemple pour la valeur "a".</span>
<span id="cb348-746"><a href="#cb348-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-747"><a href="#cb348-747" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-748"><a href="#cb348-748" aria-hidden="true" tabindex="-1"></a><span class="in">FonctionLog(1)</span></span>
<span id="cb348-749"><a href="#cb348-749" aria-hidden="true" tabindex="-1"></a><span class="in">FonctionLog("x")</span></span>
<span id="cb348-750"><a href="#cb348-750" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-751"><a href="#cb348-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-752"><a href="#cb348-752" aria-hidden="true" tabindex="-1"></a><span class="fu">## Les fonctions `sort()`, `order()` et `rank()`</span></span>
<span id="cb348-753"><a href="#cb348-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-754"><a href="#cb348-754" aria-hidden="true" tabindex="-1"></a><span class="in">`sort()`</span> trie un vecteur par ordre croissant. <span class="in">`rank()`</span> donne le rang de chaque élément du vecteur, le plus petit élément se voyant attribué le rang 1. <span class="in">`order()`</span> renvoie l'indice du vecteur trié par ordre croissant.</span>
<span id="cb348-755"><a href="#cb348-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-756"><a href="#cb348-756" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-757"><a href="#cb348-757" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur &lt;- c(5,3,1,2,4)</span></span>
<span id="cb348-758"><a href="#cb348-758" aria-hidden="true" tabindex="-1"></a><span class="in">sort(vecteur)</span></span>
<span id="cb348-759"><a href="#cb348-759" aria-hidden="true" tabindex="-1"></a><span class="in">order(vecteur)</span></span>
<span id="cb348-760"><a href="#cb348-760" aria-hidden="true" tabindex="-1"></a><span class="in">rank(vecteur)</span></span>
<span id="cb348-761"><a href="#cb348-761" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-762"><a href="#cb348-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-763"><a href="#cb348-763" aria-hidden="true" tabindex="-1"></a>Une autre solution que <span class="in">`sort()`</span> pour trier un vecteur est :</span>
<span id="cb348-764"><a href="#cb348-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-765"><a href="#cb348-765" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-766"><a href="#cb348-766" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur &lt;- c(5,3,1,2,4)</span></span>
<span id="cb348-767"><a href="#cb348-767" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur[order(vecteur)]</span></span>
<span id="cb348-768"><a href="#cb348-768" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-769"><a href="#cb348-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-770"><a href="#cb348-770" aria-hidden="true" tabindex="-1"></a>À noter aussi que <span class="in">`sort()`</span> permet aussi d'exécuter simultanément les fonctions <span class="in">`sort()`</span> et <span class="in">`order()`</span>. Ainsi :</span>
<span id="cb348-771"><a href="#cb348-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-772"><a href="#cb348-772" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-773"><a href="#cb348-773" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur &lt;- c(5,3,1,2,4)</span></span>
<span id="cb348-774"><a href="#cb348-774" aria-hidden="true" tabindex="-1"></a><span class="in">sort(vecteur, index.return = TRUE)</span></span>
<span id="cb348-775"><a href="#cb348-775" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonction sort()</span></span>
<span id="cb348-776"><a href="#cb348-776" aria-hidden="true" tabindex="-1"></a><span class="in">sort(vecteur, index.return = TRUE)$x</span></span>
<span id="cb348-777"><a href="#cb348-777" aria-hidden="true" tabindex="-1"></a><span class="in">sort(vecteur)</span></span>
<span id="cb348-778"><a href="#cb348-778" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonction order()</span></span>
<span id="cb348-779"><a href="#cb348-779" aria-hidden="true" tabindex="-1"></a><span class="in">sort(vecteur, index.return = TRUE)$ix</span></span>
<span id="cb348-780"><a href="#cb348-780" aria-hidden="true" tabindex="-1"></a><span class="in">order(vecteur)</span></span>
<span id="cb348-781"><a href="#cb348-781" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-782"><a href="#cb348-782" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-783"><a href="#cb348-783" aria-hidden="true" tabindex="-1"></a><span class="fu">## Les fonctions `:`, `seq()`, `seq_len()` et `seq_along()`</span></span>
<span id="cb348-784"><a href="#cb348-784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-785"><a href="#cb348-785" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-786"><a href="#cb348-786" aria-hidden="true" tabindex="-1"></a><span class="in"># Ne pas confondre !</span></span>
<span id="cb348-787"><a href="#cb348-787" aria-hidden="true" tabindex="-1"></a><span class="in">seq(0:10)</span></span>
<span id="cb348-788"><a href="#cb348-788" aria-hidden="true" tabindex="-1"></a><span class="in">0:10</span></span>
<span id="cb348-789"><a href="#cb348-789" aria-hidden="true" tabindex="-1"></a><span class="in">seq(0, 10)</span></span>
<span id="cb348-790"><a href="#cb348-790" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-791"><a href="#cb348-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-792"><a href="#cb348-792" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-793"><a href="#cb348-793" aria-hidden="true" tabindex="-1"></a><span class="in"># Privilégier seq_len à : lorsqu'il y a un risque de 0</span></span>
<span id="cb348-794"><a href="#cb348-794" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonctionnement identique</span></span>
<span id="cb348-795"><a href="#cb348-795" aria-hidden="true" tabindex="-1"></a><span class="in">n &lt;- 5</span></span>
<span id="cb348-796"><a href="#cb348-796" aria-hidden="true" tabindex="-1"></a><span class="in">1:n</span></span>
<span id="cb348-797"><a href="#cb348-797" aria-hidden="true" tabindex="-1"></a><span class="in">seq_len(n)</span></span>
<span id="cb348-798"><a href="#cb348-798" aria-hidden="true" tabindex="-1"></a><span class="in"># Problème avec les 0</span></span>
<span id="cb348-799"><a href="#cb348-799" aria-hidden="true" tabindex="-1"></a><span class="in">n &lt;- 0</span></span>
<span id="cb348-800"><a href="#cb348-800" aria-hidden="true" tabindex="-1"></a><span class="in">1:n</span></span>
<span id="cb348-801"><a href="#cb348-801" aria-hidden="true" tabindex="-1"></a><span class="in">seq_len(n)</span></span>
<span id="cb348-802"><a href="#cb348-802" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-803"><a href="#cb348-803" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-804"><a href="#cb348-804" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-805"><a href="#cb348-805" aria-hidden="true" tabindex="-1"></a><span class="in"># Préférer seq_along à : au cas où la taille de l'objet est 0</span></span>
<span id="cb348-806"><a href="#cb348-806" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- c() ;length(x)</span></span>
<span id="cb348-807"><a href="#cb348-807" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in 1:length(x)) print(i)</span></span>
<span id="cb348-808"><a href="#cb348-808" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in seq_along(x)) print(i)</span></span>
<span id="cb348-809"><a href="#cb348-809" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in seq(along=x)) print(i)</span></span>
<span id="cb348-810"><a href="#cb348-810" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-811"><a href="#cb348-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-812"><a href="#cb348-812" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-813"><a href="#cb348-813" aria-hidden="true" tabindex="-1"></a><span class="in"># Différences seq, seq_len et seq_along</span></span>
<span id="cb348-814"><a href="#cb348-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-815"><a href="#cb348-815" aria-hidden="true" tabindex="-1"></a><span class="in"># seq : créé une séquence d'éléments successifs, espacés éventuellement d'un pas</span></span>
<span id="cb348-816"><a href="#cb348-816" aria-hidden="true" tabindex="-1"></a><span class="in">seq(from = 1, to = 10, by = 2)</span></span>
<span id="cb348-817"><a href="#cb348-817" aria-hidden="true" tabindex="-1"></a><span class="in">seq(1, 10, 2)</span></span>
<span id="cb348-818"><a href="#cb348-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-819"><a href="#cb348-819" aria-hidden="true" tabindex="-1"></a><span class="in"># seq_len : créé une séquence d'éléments de 1 jusqu'au paramètre de la fonction (supposé positif)</span></span>
<span id="cb348-820"><a href="#cb348-820" aria-hidden="true" tabindex="-1"></a><span class="in">seq_len(10)</span></span>
<span id="cb348-821"><a href="#cb348-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-822"><a href="#cb348-822" aria-hidden="true" tabindex="-1"></a><span class="in"># seq_along : créé une séquence d'éléments de 1 jusqu'au nombre d'éléments du vecteur</span></span>
<span id="cb348-823"><a href="#cb348-823" aria-hidden="true" tabindex="-1"></a><span class="in">seq_along(c(7,9,1,0))</span></span>
<span id="cb348-824"><a href="#cb348-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-825"><a href="#cb348-825" aria-hidden="true" tabindex="-1"></a><span class="in"># seq se comporte comme seq_along si le vecteur comprend plusieurs éléments, et comme seq_len s'il comprend un seul élément</span></span>
<span id="cb348-826"><a href="#cb348-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-827"><a href="#cb348-827" aria-hidden="true" tabindex="-1"></a><span class="in"># Plusieurs éléments</span></span>
<span id="cb348-828"><a href="#cb348-828" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur &lt;- c(10, 20, 30)</span></span>
<span id="cb348-829"><a href="#cb348-829" aria-hidden="true" tabindex="-1"></a><span class="in">seq_along(vecteur)</span></span>
<span id="cb348-830"><a href="#cb348-830" aria-hidden="true" tabindex="-1"></a><span class="in">seq_len(vecteur)</span></span>
<span id="cb348-831"><a href="#cb348-831" aria-hidden="true" tabindex="-1"></a><span class="in">seq(vecteur)</span></span>
<span id="cb348-832"><a href="#cb348-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-833"><a href="#cb348-833" aria-hidden="true" tabindex="-1"></a><span class="in"># Un seul élement</span></span>
<span id="cb348-834"><a href="#cb348-834" aria-hidden="true" tabindex="-1"></a><span class="in">vecteur &lt;- 10</span></span>
<span id="cb348-835"><a href="#cb348-835" aria-hidden="true" tabindex="-1"></a><span class="in">seq_along(vecteur)</span></span>
<span id="cb348-836"><a href="#cb348-836" aria-hidden="true" tabindex="-1"></a><span class="in">seq_len(vecteur)</span></span>
<span id="cb348-837"><a href="#cb348-837" aria-hidden="true" tabindex="-1"></a><span class="in">seq(vecteur)</span></span>
<span id="cb348-838"><a href="#cb348-838" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-839"><a href="#cb348-839" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-840"><a href="#cb348-840" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fonction pour copier des données R dans le presse-papier et les coller (par exemple dans Excel)</span></span>
<span id="cb348-841"><a href="#cb348-841" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-842"><a href="#cb348-842" aria-hidden="true" tabindex="-1"></a>Pour coller des données de R dans Excel, on peut :</span>
<span id="cb348-843"><a href="#cb348-843" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-844"><a href="#cb348-844" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>faire passer la fonction <span class="in">`R`</span> <span class="in">`CopierColler()`</span> proposée ci-dessous sur les données <span class="in">`R`</span> que l'on souhaite copier dans Excel ;</span>
<span id="cb348-845"><a href="#cb348-845" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>puis coller le presse-papier directement dans Excel.</span>
<span id="cb348-846"><a href="#cb348-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-847"><a href="#cb348-847" aria-hidden="true" tabindex="-1"></a>La fonction peut être assez pratique.</span>
<span id="cb348-848"><a href="#cb348-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-849"><a href="#cb348-849" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-850"><a href="#cb348-850" aria-hidden="true" tabindex="-1"></a><span class="in"># Copier des données dans le presse-papier</span></span>
<span id="cb348-851"><a href="#cb348-851" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- mtcars</span></span>
<span id="cb348-852"><a href="#cb348-852" aria-hidden="true" tabindex="-1"></a><span class="in">CopierColler &lt;- function(x, row.names = FALSE, col.names = TRUE, dec = ",", na = "", sep = "\t", quote = FALSE, ...) {</span></span>
<span id="cb348-853"><a href="#cb348-853" aria-hidden="true" tabindex="-1"></a><span class="in">  write.table(x, "clipboard", sep = sep, row.names = row.names, col.names = col.names, dec = dec, na = na, quote = quote, ...)</span></span>
<span id="cb348-854"><a href="#cb348-854" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb348-855"><a href="#cb348-855" aria-hidden="true" tabindex="-1"></a><span class="in"># Fonctionne sous système Windows, pas Linux</span></span>
<span id="cb348-856"><a href="#cb348-856" aria-hidden="true" tabindex="-1"></a><span class="in">#CopierColler(x)</span></span>
<span id="cb348-857"><a href="#cb348-857" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-858"><a href="#cb348-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-859"><a href="#cb348-859" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fonctions diverses</span></span>
<span id="cb348-860"><a href="#cb348-860" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-861"><a href="#cb348-861" aria-hidden="true" tabindex="-1"></a><span class="in">`browseURL()`</span> lance une page Internet.</span>
<span id="cb348-862"><a href="#cb348-862" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-863"><a href="#cb348-863" aria-hidden="true" tabindex="-1"></a>Outils de débogage :</span>
<span id="cb348-864"><a href="#cb348-864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-865"><a href="#cb348-865" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-866"><a href="#cb348-866" aria-hidden="true" tabindex="-1"></a><span class="in"># Outils de debogage</span></span>
<span id="cb348-867"><a href="#cb348-867" aria-hidden="true" tabindex="-1"></a><span class="in">options(error = recover)</span></span>
<span id="cb348-868"><a href="#cb348-868" aria-hidden="true" tabindex="-1"></a><span class="in">options(error=NULL)</span></span>
<span id="cb348-869"><a href="#cb348-869" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-870"><a href="#cb348-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-871"><a href="#cb348-871" aria-hidden="true" tabindex="-1"></a>Fonction <span class="in">`dput()`</span></span>
<span id="cb348-872"><a href="#cb348-872" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-873"><a href="#cb348-873" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-874"><a href="#cb348-874" aria-hidden="true" tabindex="-1"></a><span class="in"># Créer un objet sous forme de code R !</span></span>
<span id="cb348-875"><a href="#cb348-875" aria-hidden="true" tabindex="-1"></a><span class="in">data("mtcars")</span></span>
<span id="cb348-876"><a href="#cb348-876" aria-hidden="true" tabindex="-1"></a><span class="in">dput(mtcars)</span></span>
<span id="cb348-877"><a href="#cb348-877" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-878"><a href="#cb348-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-879"><a href="#cb348-879" aria-hidden="true" tabindex="-1"></a>Fonction <span class="in">`tribble()`</span></span>
<span id="cb348-880"><a href="#cb348-880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-881"><a href="#cb348-881" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-882"><a href="#cb348-882" aria-hidden="true" tabindex="-1"></a><span class="in"># En tidyverse, la fonction tribble peut être utile pour créer des bases lignes par lignes</span></span>
<span id="cb348-883"><a href="#cb348-883" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb348-884"><a href="#cb348-884" aria-hidden="true" tabindex="-1"></a><span class="in">tribble(</span></span>
<span id="cb348-885"><a href="#cb348-885" aria-hidden="true" tabindex="-1"></a><span class="in">  ~x, ~y,</span></span>
<span id="cb348-886"><a href="#cb348-886" aria-hidden="true" tabindex="-1"></a><span class="in">  "a",   1,</span></span>
<span id="cb348-887"><a href="#cb348-887" aria-hidden="true" tabindex="-1"></a><span class="in">  "b",   2</span></span>
<span id="cb348-888"><a href="#cb348-888" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb348-889"><a href="#cb348-889" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-890"><a href="#cb348-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-891"><a href="#cb348-891" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-892"><a href="#cb348-892" aria-hidden="true" tabindex="-1"></a><span class="in"># Définir ses propres opérateurs</span></span>
<span id="cb348-893"><a href="#cb348-893" aria-hidden="true" tabindex="-1"></a><span class="in"># R reconnait le texte entre %% comme un opérateur binaire</span></span>
<span id="cb348-894"><a href="#cb348-894" aria-hidden="true" tabindex="-1"></a><span class="in"># Exemple, simplifier la fonction paste</span></span>
<span id="cb348-895"><a href="#cb348-895" aria-hidden="true" tabindex="-1"></a><span class="in">'%+%' &lt;- function(x, y) { paste(x, y, sep = "") }</span></span>
<span id="cb348-896"><a href="#cb348-896" aria-hidden="true" tabindex="-1"></a><span class="in">"Groupe_" %+% 0:9</span></span>
<span id="cb348-897"><a href="#cb348-897" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-898"><a href="#cb348-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-899"><a href="#cb348-899" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-900"><a href="#cb348-900" aria-hidden="true" tabindex="-1"></a><span class="in"># Récupérer les éléments à la diagonale d'un dataframe</span></span>
<span id="cb348-901"><a href="#cb348-901" aria-hidden="true" tabindex="-1"></a><span class="in">diag(as.matrix(mtcars))</span></span>
<span id="cb348-902"><a href="#cb348-902" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-903"><a href="#cb348-903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-904"><a href="#cb348-904" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-905"><a href="#cb348-905" aria-hidden="true" tabindex="-1"></a><span class="in"># S'assurer qu'un objet R existe déjà</span></span>
<span id="cb348-906"><a href="#cb348-906" aria-hidden="true" tabindex="-1"></a><span class="in">exists("mtcars")</span></span>
<span id="cb348-907"><a href="#cb348-907" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-908"><a href="#cb348-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-909"><a href="#cb348-909" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-910"><a href="#cb348-910" aria-hidden="true" tabindex="-1"></a><span class="in"># Penser au print</span></span>
<span id="cb348-911"><a href="#cb348-911" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in 1:5) i</span></span>
<span id="cb348-912"><a href="#cb348-912" aria-hidden="true" tabindex="-1"></a><span class="in">for(i in 1:5) print(i)</span></span>
<span id="cb348-913"><a href="#cb348-913" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-914"><a href="#cb348-914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-915"><a href="#cb348-915" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-916"><a href="#cb348-916" aria-hidden="true" tabindex="-1"></a><span class="in"># Différences print et cat</span></span>
<span id="cb348-917"><a href="#cb348-917" aria-hidden="true" tabindex="-1"></a><span class="in">cat("Salut !\nComment vas-tu ?")</span></span>
<span id="cb348-918"><a href="#cb348-918" aria-hidden="true" tabindex="-1"></a><span class="in">print("Salut !\nComment vas-tu ?")</span></span>
<span id="cb348-919"><a href="#cb348-919" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-920"><a href="#cb348-920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-921"><a href="#cb348-921" aria-hidden="true" tabindex="-1"></a><span class="fu">## Quelques fonctions mathématiques</span></span>
<span id="cb348-922"><a href="#cb348-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-923"><a href="#cb348-923" aria-hidden="true" tabindex="-1"></a><span class="in">`integrate()`</span> calcule l'aire sous la courbe $f()$.</span>
<span id="cb348-924"><a href="#cb348-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-925"><a href="#cb348-925" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-926"><a href="#cb348-926" aria-hidden="true" tabindex="-1"></a><span class="in">integrate(sin, 0, pi / 2)</span></span>
<span id="cb348-927"><a href="#cb348-927" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-928"><a href="#cb348-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-929"><a href="#cb348-929" aria-hidden="true" tabindex="-1"></a><span class="in">`uniroot()`</span> trouve la valeur de $x$ telle que $f(x) = 0$.</span>
<span id="cb348-930"><a href="#cb348-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-931"><a href="#cb348-931" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-932"><a href="#cb348-932" aria-hidden="true" tabindex="-1"></a><span class="in">uniroot(function(x) x ** 3, c(-1, 1))</span></span>
<span id="cb348-933"><a href="#cb348-933" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-934"><a href="#cb348-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-935"><a href="#cb348-935" aria-hidden="true" tabindex="-1"></a><span class="in">`optimise()`</span> trouve le maximum ou le minimum d'une fonction sur un intervalle donné.</span>
<span id="cb348-936"><a href="#cb348-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-937"><a href="#cb348-937" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-938"><a href="#cb348-938" aria-hidden="true" tabindex="-1"></a><span class="in">optimise(function(x) -x ** 2, c(-1, 1), maximum = TRUE)</span></span>
<span id="cb348-939"><a href="#cb348-939" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-940"><a href="#cb348-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-941"><a href="#cb348-941" aria-hidden="true" tabindex="-1"></a><span class="fu">## Ajouter des guillemets dans une chaîne de caractères</span></span>
<span id="cb348-942"><a href="#cb348-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-943"><a href="#cb348-943" aria-hidden="true" tabindex="-1"></a>La fonction <span class="in">`shQuote()`</span> permet d'ajouter des guillemets dans une chaîne de caractères.</span>
<span id="cb348-944"><a href="#cb348-944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-945"><a href="#cb348-945" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-946"><a href="#cb348-946" aria-hidden="true" tabindex="-1"></a><span class="in">paste("valeur =", shQuote("10"))</span></span>
<span id="cb348-947"><a href="#cb348-947" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-948"><a href="#cb348-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-949"><a href="#cb348-949" aria-hidden="true" tabindex="-1"></a><span class="fu"># Importer rapidement un fichier `R` dans `SAS`</span></span>
<span id="cb348-950"><a href="#cb348-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-951"><a href="#cb348-951" aria-hidden="true" tabindex="-1"></a>Le format de données <span class="in">`SAS`</span> étant propriétaire, il n'est pas possible de créer directement en <span class="in">`R`</span> des bases <span class="in">`SAS`</span> d'extension <span class="in">`.sas7bdat`</span>. Une solution relativement rapide pour ce faire est de passer par le format intermédiaire <span class="in">`.xpt`</span> qui conserve les noms et formats des variables.</span>
<span id="cb348-952"><a href="#cb348-952" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-953"><a href="#cb348-953" aria-hidden="true" tabindex="-1"></a><span class="fu">## Copie de la base `R` en format `xpt`</span></span>
<span id="cb348-954"><a href="#cb348-954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-955"><a href="#cb348-955" aria-hidden="true" tabindex="-1"></a>Pour ce faire, il faut copier la base <span class="in">`R`</span> en format <span class="in">`xpt`</span> en utilisant la fonction <span class="in">`write_xpt()`</span> du package <span class="in">`haven`</span>. Pour que la manipulation proposée ici fonctionne, il faut bien veiller à ce que la version du <span class="in">`xpt`</span> soit la version 5.</span>
<span id="cb348-956"><a href="#cb348-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-957"><a href="#cb348-957" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, warning=FALSE, message=FALSE}</span></span>
<span id="cb348-958"><a href="#cb348-958" aria-hidden="true" tabindex="-1"></a><span class="in">#| eval: false</span></span>
<span id="cb348-959"><a href="#cb348-959" aria-hidden="true" tabindex="-1"></a><span class="in"># On copie la base mtcars en format xpt sur le bureau de l'utilisateur</span></span>
<span id="cb348-960"><a href="#cb348-960" aria-hidden="true" tabindex="-1"></a><span class="in">haven::write_xpt(mtcars, file.path(Sys.getenv("USERPROFILE"), "Desktop", "mtcars.xpt"), version = 5)</span></span>
<span id="cb348-961"><a href="#cb348-961" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-962"><a href="#cb348-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-963"><a href="#cb348-963" aria-hidden="true" tabindex="-1"></a><span class="fu">## Import de la base `xpt` en `SAS`</span></span>
<span id="cb348-964"><a href="#cb348-964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-965"><a href="#cb348-965" aria-hidden="true" tabindex="-1"></a>La base <span class="in">`R`</span> copiée en format <span class="in">`xpt`</span> peut ensuite être importée en <span class="in">`SAS`</span> avec le code suivant :</span>
<span id="cb348-966"><a href="#cb348-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-967"><a href="#cb348-967" aria-hidden="true" tabindex="-1"></a><span class="in">``` sas</span></span>
<span id="cb348-968"><a href="#cb348-968" aria-hidden="true" tabindex="-1"></a><span class="in">libname xptfile xport "C:\Users\&amp;sysuserid.\Desktop\mtcars.xpt";</span></span>
<span id="cb348-969"><a href="#cb348-969" aria-hidden="true" tabindex="-1"></a><span class="in">proc copy inlib = xptfile outlib = work;</span></span>
<span id="cb348-970"><a href="#cb348-970" aria-hidden="true" tabindex="-1"></a><span class="in">run;</span></span>
<span id="cb348-971"><a href="#cb348-971" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb348-972"><a href="#cb348-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-973"><a href="#cb348-973" aria-hidden="true" tabindex="-1"></a>Par défaut, la base est nommée du nom de la base <span class="in">`xpt`</span> et se trouve dans la <span class="in">`work`</span> de <span class="in">`SAS`</span>, mais <span class="in">`outlib`</span> peut être paramétré avec une autre libname.</span>
</code><button title="Copier vers le presse-papier" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Ce site a été créé avec <a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>